import{s as $}from"./statutInfos-CQo4TYHA.js";import{P as ne,_ as re}from"./printRamassage-Xwrccrnh.js";import{_ as ie}from"./DialogCloseBtn-CyhOHkF9.js";import{V as me,_ as ue,c as de}from"./VDataTableServer-DgY7t16v.js";import{_ as pe}from"./AppTextField-DcnJNrqY.js";import{_ as fe}from"./AppSelect-BNJgt2DB.js";import{c as ce}from"./constants-BltA3_Ka.js";import{r as n,aq as ge,j as ve,Y as F,a as Ve,c as O,o as r,b as s,f as p,m as f,e as o,d as L,n as a,ak as i,v as c,x as B,s as q,A as I,ai as w,$ as h}from"./index-Cpx2oQOu.js";import{$ as ye}from"./VForm-DE5Dv9Vg.js";import{t as ke}from"./toast-DRzPnEr1.js";import{u as _e}from"./index-Dt9Tyk0y.js";import{V as z}from"./VCardText-C2zmEXKG.js";import{V as be,a as K}from"./VRow-D3F4KUiE.js";import{a as M,V as Ce}from"./VList-FbrG2muM.js";import{V as Y}from"./VDivider-PtAXYG4Q.js";import{V as Ie}from"./VSpacer-kbMM-EH7.js";import{V as we}from"./VMenu-SP-Qfij5.js";import{V as xe}from"./VChip-DLIMD1Bc.js";import{V as $e}from"./VDialog-DZYKZxfn.js";import{V as G}from"./VCard-ReRXJKrU.js";import"./VTabs-FSF85mBO.js";import"./VOverlay-B2_IMlFx.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-BaA_dvcq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppTextarea-kINhzqyt.js";import"./VInput-DGQc-sBd.js";import"./VAlert-DKVGvw_n.js";import"./VAvatar-CsMBVwvd.js";import"./VDataTable-CwT4qoSb.js";import"./VSelect-RP3MareX.js";import"./VTextField-yTp9D8wO.js";import"./filter-CoHf6CYO.js";import"./VNodeRenderer-BLthce2V.js";import"./qrcode.vue.esm-B2UpXNuA.js";/* empty css              */const Be={class:"d-flex flex-wrap gap-4 ma-6"},De={class:"d-flex gap-4 flex-wrap align-center"},Te={key:1},gt={__name:"list",async setup(Ue){let V,D;const H=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Nombre de colis",key:"nombre_colis",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],y=n(),k=n(),_=n(!1),m=n(!1),x=n(),b=n(!1),J=n(),u=n(5),d=n(1),T=n(),U=n(),Q=l=>{m.value=!0,x.value=l},W=async()=>{let l="/api/ramassage/"+x.value.id;_.value=!0,ye({method:"DELETE",url:l}).then(async e=>{e.status===200&&(m.value=!1,ke.success(e.data),N()),_.value=!1}).catch(e=>{_.value=!1})},X=l=>{var e,v;T.value=(e=l.sortBy[0])==null?void 0:e.key,U.value=(v=l.sortBy[0])==null?void 0:v.order},{data:E,error:Ee,statusCode:Ne,isFetching:Z,execute:N}=([V,D]=ge(()=>_e(de("/api/ramassage",{query:{code:y,statut:k,page:d,itemsPerPage:u,sortBy:T,orderBy:U}}))),V=await V,D(),V),P=ve(),ee=F(()=>E.value.items),S=F(()=>E.value.total),g=n(!1),R=n(0),A=n(0),te=l=>{A.value=l.id,R.value++,g.value=!0};return(l,e)=>{const v=fe,ae=pe,j=Ve("IconBtn"),se=ue,oe=ie,le=re;return r(),O("div",null,[s(G,{title:"Filtres",class:"mb-6 d-print-none"},{default:o(()=>[s(z,null,{default:o(()=>[s(be,null,{default:o(()=>[s(K,{cols:"12",sm:"3"},{default:o(()=>[s(v,{modelValue:a(k),"onUpdate:modelValue":e[0]||(e[0]=t=>i(k)?k.value=t:null),placeholder:"Statut",items:a(ce),clearable:"","clear-icon":"tabler-x"},{item:o(({item:t,props:C})=>[s(M,q(C,{title:("statutInfos"in l?l.statutInfos:a($))(t.value).text}),null,16,["title"])]),selection:o(({item:t})=>[c(B(("statutInfos"in l?l.statutInfos:a($))(t.value).text),1)]),_:1},8,["modelValue","items"])]),_:1}),s(K,{cols:"12",sm:"2"},{default:o(()=>[s(ae,{modelValue:a(y),"onUpdate:modelValue":e[1]||(e[1]=t=>i(y)?y.value=t:null),placeholder:"Code"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(Y),L("div",Be,[s(Ie),L("div",De,[s(v,{modelValue:a(u),"onUpdate:modelValue":e[2]||(e[2]=t=>i(u)?u.value=t:null),items:[5,10,20,25,50]},null,8,["modelValue"]),a(I)("create","ramassage")?(r(),p(w,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[3]||(e[3]=t=>a(P).push({name:"ramassage-add"}))},{default:o(()=>e[12]||(e[12]=[c(" Ajouter Ramassage ")])),_:1})):f("",!0)])]),s(Y,{class:"mt-4"}),s(me,{"items-per-page":a(u),"onUpdate:itemsPerPage":e[5]||(e[5]=t=>i(u)?u.value=t:null),page:a(d),"onUpdate:page":e[6]||(e[6]=t=>i(d)?d.value=t:null),loading:a(Z),headers:H,items:a(ee),"items-length":a(S),class:"text-no-wrap",locale:"fr","onUpdate:options":X},{"item.code":o(({item:t})=>[a(I)("show","ramassage")?(r(),p(w,{key:0,variant:"text",onClick:C=>te(t)},{default:o(()=>[c(B(t.code),1)]),_:2},1032,["onClick"])):(r(),O("span",Te,B(t.code),1))]),"item.statut":o(({item:t})=>[s(xe,q(("statutInfos"in l?l.statutInfos:a($))(t.statut),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":o(({item:t})=>[t.statut=="EN_ATTENTE"&&a(I)("update","ramassage")?(r(),p(j,{key:0,onClick:C=>a(P).push("/ramassage/"+t.id)},{default:o(()=>[s(h,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):f("",!0),t.statut=="EN_ATTENTE"?(r(),p(j,{key:1},{default:o(()=>[s(h,{icon:"tabler-dots-vertical"}),s(we,{activator:"parent"},{default:o(()=>[s(Ce,null,{default:o(()=>[a(I)("delete","ramassage")?(r(),p(M,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:C=>Q(t)},{default:o(()=>e[13]||(e[13]=[c(" Delete ")])),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):f("",!0)]),bottom:o(()=>[s(se,{page:a(d),"onUpdate:page":e[4]||(e[4]=t=>i(d)?d.value=t:null),"items-per-page":a(u),"total-items":a(S)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),s($e,{modelValue:a(m),"onUpdate:modelValue":e[9]||(e[9]=t=>i(m)?m.value=t:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[s(oe,{onClick:e[7]||(e[7]=t=>m.value=!a(m))}),s(G,{title:"Êtes-vous sûr de vouloir supprimer le ramassage "+a(x).code+" ?"},{default:o(()=>[s(z,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[s(w,{color:"secondary",variant:"tonal",onClick:e[8]||(e[8]=t=>m.value=!1)},{default:o(()=>e[14]||(e[14]=[c(" Non ")])),_:1}),s(w,{loading:a(_),onClick:W},{default:o(()=>e[15]||(e[15]=[c(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),a(b)?(r(),p(ne,{key:0,"is-print-ramassage":a(b),"onUpdate:isPrintRamassage":e[10]||(e[10]=t=>i(b)?b.value=t:null),item:a(J)},null,8,["is-print-ramassage","item"])):f("",!0),a(g)?(r(),p(le,{id:a(A),key:a(R),"is-show-item":a(g),"onUpdate:isShowItem":e[11]||(e[11]=t=>i(g)?g.value=t:null),onFetchItems:a(N)},null,8,["id","is-show-item","onFetchItems"])):f("",!0)])}}};export{gt as default};
