import{Q as ae,s as ie}from"./qrcode.vue.esm-Dos8Dfef.js";import{_ as ne}from"./DialogCloseBtn-BjnZptwZ.js";import{V as re,_ as de,c as ue}from"./VDataTableServer-BrGyXY0f.js";import{_ as me}from"./AppSelect-Dsd4dWo0.js";import{_ as pe}from"./AppTextField-B71EgLUu.js";import{V as ce}from"./VNodeRenderer-B_RQ16A2.js";import{c as G,m as x,o as V,d as a,b as t,e as s,n as l,H as M,x as d,r as n,aq as fe,j as _e,Y as z,a as ve,f as $,ak as u,A as B,ai as D,v as k,$ as Q,s as ge}from"./index-CDDwny-K.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as b}from"./VDivider-CkbwQFHj.js";import{V as I,a as v}from"./VRow-BSePUP6J.js";import{V as O}from"./VCard-DKep4z2G.js";import{$ as be}from"./api-CmUFIEMg.js";import{t as Ce}from"./toast-Dv8jPkVd.js";import{u as ye}from"./index-B-aSBDP4.js";import{V as H}from"./VCardText-C4f9vuwE.js";import{V as ke}from"./VSpacer-DwRt49LY.js";import{V as xe}from"./VMenu-BJLWNyyG.js";import{V as we,a as Y}from"./VList-C2aQHrPu.js";import{V as Ne}from"./VChip-DCOqYpAb.js";import{V as Pe}from"./VDialog-CD7W6UOQ.js";import"./VSelect-Bat98VMv.js";import"./VTextField-Cq9gHUQ4.js";import"./VImg-ClcHaf1h.js";import"./forwardRefs-DWGaNmQL.js";import"./VOverlay-BujVAH3e.js";import"./VAvatar-oKMy1cq5.js";import"./filter-CkL7EDzh.js";/* empty css              */const $e={key:0},Ie={id:"print-area"},Ue={class:"print-content"},he={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Be={class:"d-flex align-center app-logo"},De={class:"app-logo-title"},Oe={class:"d-flex align-center destination"},Te={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},je={class:"mb-0"},Ae={class:"mb-0"},Se={class:"mb-0"},qe={class:"mb-0"},Ee={class:"mb-0"},Re={class:"mb-0"},Fe={class:"mb-0"},Le={class:"mb-0"},Me={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(T,{emit:g}){const i=T,U=g;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){U("update:isPrintColis",!1)},(C,m)=>i.isPrintColis?(V(),G("div",$e,[a("div",Ie,[a("div",Ue,[t(O,{class:"props.item-preview-wrapper"},{default:s(()=>[m[0]||(m[0]=a("div",null,null,-1)),a("div",he,[a("div",null,[a("div",Be,[t(l(ce),{nodes:l(M).app.logo},null,8,["nodes"]),a("h6",De,d(l(M).app.title),1)])]),a("div",Oe,d(i.item.destination),1)]),t(b,{class:"border-solid"}),t(I,{class:"print-row little-margin"},{default:s(()=>[t(v,{class:"text"},{default:s(()=>[a("div",Te,[a("div",null,[a("p",je," Code : "+d(i.item.code),1),a("p",Ae," Nom : "+d(i.item.nom_client),1),a("p",Se," tel : "+d(i.item.tel_client),1)]),a("div",null,[a("p",qe,[t(ae,{size:"70",value:i.item.code},null,8,["value"])])])]),a("p",Ee," Adresse : "+d(i.item.adresse),1)]),_:1})]),_:1}),t(b,{class:"border-solid"}),t(I,{class:"align-right little-margin"},{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[a("p",Re," Produits : "+d(i.item.produit),1),a("p",Fe," Montant : "+d(i.item.montant),1)]),_:1})]),_:1}),t(b,{class:"border-solid"}),t(I,{class:"align-right little-margin"},{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[a("p",Le," essayage : "+d(i.item.essayage?"OUI":"NON")+" | ouvrir : "+d(i.item.ouvrir?"OUI":"NON")+" | echange : "+d(i.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),t(b,{class:"border-solid"}),m[1]||(m[1]=a("p",{class:"mb-0"},[a("span",null," Remarque: "),a("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):x("",!0)}},ze=Ve(Me,[["__scopeId","data-v-4ffea5da"]]),Qe={class:"d-flex flex-wrap gap-4 ma-6"},He={class:"d-flex gap-4 flex-wrap align-center"},xt={__name:"list",async setup(T){let g,i;const U=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"actions",key:"actions",sortable:!1}],C=n(),m=n(),w=n(),N=n(),P=n(!1),p=n(!1),h=n(),y=n(!1),j=n(),c=n(5),f=n(1),A=n(),S=n(),J=r=>{var e,_;A.value=(e=r.sortBy[0])==null?void 0:e.key,S.value=(_=r.sortBy[0])==null?void 0:_.order},K=r=>{y.value=!0,j.value=r},W=r=>{p.value=!0,h.value=r},X=async()=>{let r="/api/colis/"+h.value.id;P.value=!0,be({method:"DELETE",url:r}).then(async e=>{e.status===200&&(p.value=!1,Ce.success(e.data),ee()),P.value=!1}).catch(e=>{P.value=!1})},{data:q,error:Ye,statusCode:Ge,isFetching:Z,execute:ee}=([g,i]=fe(()=>ye(ue("/api/colis",{query:{code:C,statut:m,nom_client:w,tel_client:N,page:f,itemsPerPage:c,sortBy:A,orderBy:S}}))),g=await g,i(),g),E=_e(),te=z(()=>q.value.items),R=z(()=>q.value.total);return(r,e)=>{const _=pe,le=me,F=ve("IconBtn"),se=de,oe=ne;return V(),G("div",null,[t(O,{title:"Filtres",class:"mb-6 d-print-none"},{default:s(()=>[t(H,null,{default:s(()=>[t(I,null,{default:s(()=>[t(v,{cols:"12",sm:"2"},{default:s(()=>[t(_,{modelValue:l(m),"onUpdate:modelValue":e[0]||(e[0]=o=>u(m)?m.value=o:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",sm:"2"},{default:s(()=>[t(_,{modelValue:l(C),"onUpdate:modelValue":e[1]||(e[1]=o=>u(C)?C.value=o:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",sm:"2"},{default:s(()=>[t(_,{modelValue:l(w),"onUpdate:modelValue":e[2]||(e[2]=o=>u(w)?w.value=o:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",sm:"2"},{default:s(()=>[t(_,{modelValue:l(N),"onUpdate:modelValue":e[3]||(e[3]=o=>u(N)?N.value=o:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b),a("div",Qe,[t(ke),a("div",He,[t(le,{modelValue:l(c),"onUpdate:modelValue":e[4]||(e[4]=o=>u(c)?c.value=o:null),items:[5,10,20,25,50]},null,8,["modelValue"]),l(B)("create","colis")?(V(),$(D,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[5]||(e[5]=o=>l(E).push({name:"colis-add"}))},{default:s(()=>e[13]||(e[13]=[k(" Ajouter Colis ")])),_:1})):x("",!0)])]),t(b,{class:"mt-4"}),t(re,{"items-per-page":l(c),"onUpdate:itemsPerPage":e[7]||(e[7]=o=>u(c)?c.value=o:null),page:l(f),"onUpdate:page":e[8]||(e[8]=o=>u(f)?f.value=o:null),loading:l(Z),headers:U,items:l(te),"items-length":l(R),class:"text-no-wrap",locale:"fr","onUpdate:options":J},{"item.statut":s(({item:o})=>[t(Ne,ge(("statutInfos"in r?r.statutInfos:l(ie))(o.statut),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":s(({item:o})=>[l(B)("update","colis")?(V(),$(F,{key:0,onClick:L=>l(E).push("/colis/"+o.id)},{default:s(()=>[t(Q,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):x("",!0),t(F,null,{default:s(()=>[t(Q,{icon:"tabler-dots-vertical"}),t(xe,{activator:"parent"},{default:s(()=>[t(we,null,{default:s(()=>[t(Y,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:L=>K(o)},{default:s(()=>e[14]||(e[14]=[k(" Print ")])),_:2},1032,["onClick"]),l(B)("delete","colis")?(V(),$(Y,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:L=>W(o)},{default:s(()=>e[15]||(e[15]=[k(" Delete ")])),_:2},1032,["onClick"])):x("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[t(se,{page:l(f),"onUpdate:page":e[6]||(e[6]=o=>u(f)?f.value=o:null),"items-per-page":l(c),"total-items":l(R)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),t(Pe,{modelValue:l(p),"onUpdate:modelValue":e[11]||(e[11]=o=>u(p)?p.value=o:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[t(oe,{onClick:e[9]||(e[9]=o=>p.value=!l(p))}),t(O,{title:"Êtes-vous sûr de vouloir supprimer le colis "+l(h).code+" ?"},{default:s(()=>[t(H,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[t(D,{color:"secondary",variant:"tonal",onClick:e[10]||(e[10]=o=>p.value=!1)},{default:s(()=>e[16]||(e[16]=[k(" Non ")])),_:1}),t(D,{loading:l(P),onClick:X},{default:s(()=>e[17]||(e[17]=[k(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),l(y)?(V(),$(ze,{key:0,"is-print-colis":l(y),"onUpdate:isPrintColis":e[12]||(e[12]=o=>u(y)?y.value=o:null),item:l(j)},null,8,["is-print-colis","item"])):x("",!0)])}}};export{xt as default};
