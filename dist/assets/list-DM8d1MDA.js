import{Q as Ue,s as q,_ as Fe,a as Le,V as De,b as Be,c as je,d as be,e as qe}from"./VTabs-B7mJAAOY.js";import{_ as ke}from"./DialogCloseBtn-CA2OX9nj.js";import{V as ge,a as Me,_ as ze,c as He}from"./VDataTableServer-BywS9XHK.js";import{_ as Ee}from"./AppSelect-DWxu4sV5.js";import{_ as Se}from"./AppTextField-CrAlU6gB.js";import{V as Ke}from"./VNodeRenderer-CbKLgVqJ.js";import{c as P,m as O,o as V,d as t,b as e,e as s,n as l,H as ye,x as v,a1 as Qe,a2 as We,a5 as Ye,al as Ge,at as Ae,Y as D,au as Ve,r as f,w as pe,a9 as Je,ar as Xe,s as me,F as le,av as Ze,aw as et,A as W,h as Ne,f as M,v as T,ai as B,aq as Re,as as he,J as Ce,$ as fe,ak as N,K as we,j as tt,a as lt}from"./index-CJ4IgJQr.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as X}from"./VDivider-aP-yZROD.js";import{V as U,a as E}from"./VRow-_wUxO3gL.js";import{V as ee}from"./VCard-C6PGjlKr.js";import{r as ce,V as st,$ as se}from"./VForm-CJrumaOn.js";import{_ as at}from"./AppTextarea-BB8sFHme.js";import{t as z}from"./toast-BK7ruyfP.js";import{u as ot,V as xe,f as nt,b as it,m as ut,c as rt,d as dt}from"./VTextField-B_SWCDg5.js";import{f as mt}from"./forwardRefs-DWGaNmQL.js";import{V as Pe}from"./VChip-Bnp3FgHr.js";import{V as Z}from"./VCardText-BGBPTyEd.js";import{V as Te}from"./VDialog-mPk1sZIA.js";import{u as ct}from"./index-Bbews3C0.js";import{V as pt}from"./VSpacer-BXWztqgn.js";import{V as ft}from"./VMenu-CC2pladv.js";import{V as vt,a as Ie}from"./VList-jbM3Woii.js";import"./VOverlay-D45V686F.js";import"./VImg-Dt1V5UNN.js";import"./VSelect-BtTR3FRa.js";import"./VAvatar-CyoIQH2Z.js";import"./filter-CcSIQiU4.js";/* empty css              */const _t={key:0},bt={id:"print-area"},gt={class:"print-content"},yt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Vt={class:"d-flex align-center app-logo"},ht={class:"app-logo-title"},Ct={class:"d-flex align-center destination"},wt={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},xt={class:"mb-0"},It={class:"mb-0"},kt={class:"mb-0"},Et={class:"mb-0"},St={class:"mb-0"},At={class:"mb-0"},Nt={class:"mb-0"},Rt={class:"mb-0"},$t={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(i,{emit:x}){const _=i,S=x;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){S("update:isPrintColis",!1)},(b,C)=>_.isPrintColis?(V(),P("div",_t,[t("div",bt,[t("div",gt,[e(ee,{class:"props.item-preview-wrapper"},{default:s(()=>[C[0]||(C[0]=t("div",null,null,-1)),t("div",yt,[t("div",null,[t("div",Vt,[e(l(Ke),{nodes:l(ye).app.logo},null,8,["nodes"]),t("h6",ht,v(l(ye).app.title),1)])]),t("div",Ct,v(_.item.destination),1)]),e(X,{class:"border-solid"}),e(U,{class:"print-row little-margin"},{default:s(()=>[e(E,{class:"text"},{default:s(()=>[t("div",wt,[t("div",null,[t("p",xt," Code : "+v(_.item.code),1),t("p",It," Nom : "+v(_.item.nom_client),1),t("p",kt," tel : "+v(_.item.tel_client),1)]),t("div",null,[t("p",Et,[e(Ue,{size:"70",value:_.item.code},null,8,["value"])])])]),t("p",St," Adresse : "+v(_.item.adresse),1)]),_:1})]),_:1}),e(X,{class:"border-solid"}),e(U,{class:"align-right little-margin"},{default:s(()=>[e(E,{cols:"12"},{default:s(()=>[t("p",At," Produits : "+v(_.item.produit),1),t("p",Nt," Montant : "+v(_.item.montant),1)]),_:1})]),_:1}),e(X,{class:"border-solid"}),e(U,{class:"align-right little-margin"},{default:s(()=>[e(E,{cols:"12"},{default:s(()=>[t("p",Rt," essayage : "+v(_.item.essayage?"OUI":"NON")+" | ouvrir : "+v(_.item.ouvrir?"OUI":"NON")+" | echange : "+v(_.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),e(X,{class:"border-solid"}),C[1]||(C[1]=t("p",{class:"mb-0"},[t("span",null," Remarque: "),t("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):O("",!0)}},Pt=$e($t,[["__scopeId","data-v-4ffea5da"]]),Tt=We({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:i=>typeof i=="boolean"||[1e3,1024].includes(Number(i))},...ut({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:i=>i.multiple?[]:null,validator:i=>Ae(i).every(x=>x!=null&&typeof x=="object")},...it({clearable:!0})},"VFileInput"),Ot=Qe()({name:"VFileInput",inheritAttrs:!1,props:Tt(),emits:{"click:control":i=>!0,"mousedown:control":i=>!0,"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,x){let{attrs:_,emit:S,slots:b}=x;const{t:C}=Ye(),u=Ge(i,"modelValue",i.modelValue,m=>Ae(m),m=>!i.multiple&&Array.isArray(m)?m[0]:m),{isFocused:I,focus:d,blur:k}=ot(i),F=D(()=>typeof i.showSize!="boolean"?i.showSize:void 0),A=D(()=>(u.value??[]).reduce((m,p)=>{let{size:j=0}=p;return m+j},0)),$=D(()=>Ve(A.value,F.value)),o=D(()=>(u.value??[]).map(m=>{const{name:p="",size:j=0}=m;return i.showSize?`${p} (${Ve(j,F.value)})`:p})),c=D(()=>{var p;const m=((p=u.value)==null?void 0:p.length)??0;return i.showSize?C(i.counterSizeString,m,$.value):C(i.counterString,m)}),h=f(),R=f(),g=f(),y=D(()=>I.value||i.active),a=D(()=>["plain","underlined"].includes(i.variant));function K(){var m;g.value!==document.activeElement&&((m=g.value)==null||m.focus()),I.value||d()}function Y(m){var p;(p=g.value)==null||p.click()}function ae(m){S("mousedown:control",m)}function oe(m){var p;(p=g.value)==null||p.click(),S("click:control",m)}function te(m){m.stopPropagation(),K(),Ze(()=>{u.value=[],et(i["onClick:clear"],m)})}return pe(u,m=>{(!Array.isArray(m)||!m.length)&&g.value&&(g.value.value="")}),Je(()=>{const m=!!(b.counter||i.counter),p=!!(m||b.details),[j,ne]=Xe(_),{modelValue:G,...ie}=xe.filterProps(i),ue=nt(i);return e(xe,me({ref:h,modelValue:u.value,"onUpdate:modelValue":Q=>u.value=Q,class:["v-file-input",{"v-file-input--chips":!!i.chips,"v-file-input--hide":i.hideInput,"v-input--plain-underlined":a.value},i.class],style:i.style,"onClick:prepend":Y},j,ie,{centerAffix:!a.value,focused:I.value}),{...b,default:Q=>{let{id:w,isDisabled:n,isDirty:L,isReadonly:re,isValid:de}=Q;return e(dt,me({ref:R,"prepend-icon":i.prependIcon,onMousedown:ae,onClick:oe,"onClick:clear":te,"onClick:prependInner":i["onClick:prependInner"],"onClick:appendInner":i["onClick:appendInner"]},ue,{id:w.value,active:y.value||L.value,dirty:L.value||i.dirty,disabled:n.value,focused:I.value,error:de.value===!1}),{...b,default:ve=>{var J;let{props:{class:_e,...r}}=ve;return e(le,null,[e("input",me({ref:g,type:"file",readonly:re.value,disabled:n.value,multiple:i.multiple,name:i.name,onClick:H=>{H.stopPropagation(),re.value&&H.preventDefault(),K()},onChange:H=>{if(!H.target)return;const Oe=H.target;u.value=[...Oe.files??[]]},onFocus:K,onBlur:k},r,ne),null),e("div",{class:_e},[!!((J=u.value)!=null&&J.length)&&!i.hideInput&&(b.selection?b.selection({fileNames:o.value,totalBytes:A.value,totalBytesReadable:$.value}):i.chips?o.value.map(H=>e(Pe,{key:H,size:"small",text:H},null)):o.value.join(", "))])])}})},details:p?Q=>{var w,n;return e(le,null,[(w=b.details)==null?void 0:w.call(b,Q),m&&e(le,null,[e("span",null,null),e(rt,{active:!!((n=u.value)!=null&&n.length),value:c.value,disabled:i.disabled},b.counter)])])}:void 0})}),mt({},h,R,g)}}),Ut={key:0,class:"text-center"},Ft={key:0},Lt={key:1},Dt={class:"text-center"},Bt={key:0},jt={key:1},qt={__name:"actionsColis",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},setup(i){const x=i,_=f({}),S=f(""),b=f(!1),C=f(),u=f({id:null,statut:"",commentaire:"",date:"",file:""});pe(()=>x.currentStatut,o=>{S.value=o},{immediate:!0}),pe(()=>x.item,o=>{_.value=o},{immediate:!0});const I=f(""),d=o=>{b.value=!0,u.value.statut=o},k=async()=>{const{valid:o}=await C.value.validate();o&&await F(u.value.statut)},F=async o=>{u.value.statut=o,u.value.id=x.id,I.value=o;const c=new FormData;c.append("file",u.value.file),c.append("id",u.value.id),c.append("statut",u.value.statut),c.append("commentaire",u.value.commentaire),c.append("date",u.value.date),se({method:"POST",url:"/api/updateStatutColis",data:c,headers:{"Content-Type":"multipart/form-data"}}).then(async h=>{h.status===200&&(z.success(h.data),o!="COMMENTAIRE"&&(S.value=o),b.value=!1),I.value=""}).catch(h=>{I.value="",h.response&&h.response.status===422?z.error(h.response.data.message):z.error("something wrong")})},A=W("livreur","action");W("gestionnaire","action");const $=D(()=>{let o=[];return o.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),["ENTREPOT","REPORTE"].includes(S.value)&&A&&o.push({...q("EN_COURS_LIVRAISON"),statut:"EN_COURS_LIVRAISON"}),["EN_COURS_LIVRAISON","LIVRE_PARTIELLEMENT"].includes(S.value)&&A&&(o.push({...q("LIVRE"),statut:"LIVRE"}),o.push({...q("LIVRE_PARTIELLEMENT"),statut:"LIVRE_PARTIELLEMENT"}),o.push({...q("PAS_REPONSE"),statut:"PAS_REPONSE"}),o.push({...q("REPORTE"),statut:"REPORTE"}),o.push({...q("ANNULE"),statut:"ANNULE"}),o.push({...q("REFUSE"),statut:"REFUSE"})),o});return(o,c)=>{const h=Fe,R=at;return l(b)?(V(),P("div",Lt,[e(st,{ref_key:"refForm",ref:C,class:"mt-3"},{default:s(()=>[t("p",Dt," Statut Ã  envoyer : "+v(("statutInfos"in o?o.statutInfos:l(q))(l(u).statut).text),1),["LIVRE_PARTIELLEMENT","PAS_REPONSE","REPORTE","REFUSE","ANNULE"].includes(l(u).statut)?(V(),P("div",Bt,[e(U,{class:"d-flex align-center justify-center"},{default:s(()=>[e(E,{md:"6",cols:"12"},{default:s(()=>[e(Ot,{modelValue:l(u).file,"onUpdate:modelValue":c[0]||(c[0]=g=>l(u).file=g),rules:["requiredValidator"in o?o.requiredValidator:l(ce)],accept:"image/*",label:"File input"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):O("",!0),l(u).statut=="REPORTE"?(V(),P("div",jt,[e(U,{class:"d-flex align-center justify-center"},{default:s(()=>[e(E,{md:"6",cols:"12"},{default:s(()=>[e(h,{modelValue:l(u).date,"onUpdate:modelValue":c[1]||(c[1]=g=>l(u).date=g),rules:["requiredValidator"in o?o.requiredValidator:l(ce)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):O("",!0),t("div",null,[e(U,{class:"d-flex align-center justify-center"},{default:s(()=>[e(E,{md:"6",cols:"12"},{default:s(()=>[e(R,{modelValue:l(u).commentaire,"onUpdate:modelValue":c[2]||(c[2]=g=>l(u).commentaire=g),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE"].includes(l(u).statut)?["requiredValidator"in o?o.requiredValidator:l(ce)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),e(U,null,{default:s(()=>[e(E,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[e(B,{color:"secondary",onClick:c[3]||(c[3]=g=>b.value=!1)},{default:s(()=>c[4]||(c[4]=[T(" retour ")])),_:1}),e(B,{loading:l(I)==l(u).statut,onClick:k},{default:s(()=>c[5]||(c[5]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):(V(),P("div",Ut,[(V(!0),P(le,null,Ne(l($),(g,y)=>(V(),M(B,{key:y,color:g.color,class:"ma-1",loading:l(I)==g.statut,onClick:a=>d(g.statut)},{default:s(()=>[T(v(g.text),1)]),_:2},1032,["color","loading","onClick"]))),128)),l($).length==0?(V(),P("div",Ft," Aucune action requise ")):O("",!0)]))}}},Mt={key:0,class:"text-end position-absolute right-0 parms-btn"},zt={class:"text-body-1 mb-2"},Ht={class:"text-body-1 mb-2"},Kt={class:"text-body-1 mb-2"},Qt={class:"text-body-1 mb-2"},Wt={class:"text-body-1 mb-2"},Yt={class:"text-body-1 mb-2"},Gt={class:"text-body-1 mb-2"},Jt={class:"text-body-1 mb-2"},Xt={class:"text-body-1 mb-2"},Zt={class:"text-body-1 mb-2"},el={class:"text-body-1 mb-2"},tl={class:"text-body-1 mb-2"},ll={class:"text-body-1 mb-2"},sl={class:"text-body-1 mb-2"},al={__name:"showColis",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(i,{emit:x}){let _,S;const b=i,C=x;let u={id:"",nom_vendeur:"",tel_vendeur:"",tarif_id:"",commentaire_vendeur:"",code_ramassage:"",frais_livreur:"",adresse:"",livreur:"",livreur_id:"",tel_livreur:"",statut:"",vendeur:"",colisHistories:[]};const I=([_,S]=Re(()=>se("/api/ramasseurs").then(y=>y.data)),_=await _,S(),_),d=f(structuredClone(he(u))),k=f(!1),F=async y=>{k.value=!0,await se("/api/colis/"+y).then(async a=>{a.status===200&&(d.value=a.data),k.value=!1}).catch(a=>{k.value=!1,a.response&&a.response.status===422?z.error(a.response.data.message):z.error("something wrong")})};pe(()=>b.id,y=>{F(y)},{immediate:!0});const A=()=>{C("update:isShowItem",!1),C("fetchItems"),d.value=structuredClone(he(u))},$=W("gestionnaire","action"),o=f("Actions"),c=["tabler-adjustments-share","tabler-logs"],h=f(!1),R=f(!1),g=async()=>{R.value=!0,await se({method:"POST",url:"/api/parametrerColis",data:{id:d.value.id,livreur_id:d.value.livreur_id,frais_livreur:d.value.frais_livreur}}).then(async y=>{y.status===200&&z.success(y.data),R.value=!1}).catch(y=>{R.value=!1,y.response&&y.response.status===422?z.error(y.response.data.message):z.error("something wrong")})};return(y,a)=>{const K=ke,Y=qt,ae=qe,oe=Ee,te=Se,m=Le;return V(),M(Te,{width:y.$vuetify.display.smAndDown?"auto":900,"model-value":b.isShowItem,"onUpdate:modelValue":A},{default:s(()=>[e(K,{onClick:A}),e(m,{title:"Details Colis",loading:l(k),"no-actions":""},{default:s(()=>[e(ee,null,{default:s(()=>[Ce(e(Z,null,{default:s(()=>[l($)?(V(),P("div",Mt,[e(B,{icon:"",class:"rounded-0",onClick:a[0]||(a[0]=p=>h.value=!0)},{default:s(()=>[e(fe,{size:"22",icon:"tabler-settings"})]),_:1})])):O("",!0),e(U,null,{default:s(()=>[e(E,{cols:"12",lg:"6"},{default:s(()=>[e(ee,{title:"Informations colis"},{default:s(()=>[e(Z,null,{default:s(()=>[e(ge,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[6]||(a[6]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),t("td",null,[t("p",zt,v(l(d).code),1)])]),t("tr",null,[a[7]||(a[7]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Livreur : ")],-1)),t("td",null,[t("p",Ht,v(l(d).livreur),1)])]),t("tr",null,[a[8]||(a[8]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Livreur : ")],-1)),t("td",null,[t("p",Kt,v(l(d).tel_livreur),1)])]),t("tr",null,[a[9]||(a[9]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramassage : ")],-1)),t("td",null,[t("p",Qt,v(l(d).code_ramassage),1)])]),t("tr",null,[a[10]||(a[10]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Prix : ")],-1)),t("td",null,[t("p",Wt,v(l(d).montant),1)])]),t("tr",null,[a[11]||(a[11]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Produit : ")],-1)),t("td",null,[t("p",Yt,v(l(d).produit),1)])]),t("tr",null,[a[12]||(a[12]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," essayage : ")],-1)),t("td",null,[t("p",Gt,v(l(d).essayage?"OUI":"NON"),1)])]),t("tr",null,[a[13]||(a[13]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," ouvrir : ")],-1)),t("td",null,[t("p",Jt,v(l(d).ouvrir?"OUI":"NON"),1)])]),t("tr",null,[a[14]||(a[14]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," echange : ")],-1)),t("td",null,[t("p",Xt,v(l(d).echange?"OUI":"NON"),1)])]),t("tr",null,[a[15]||(a[15]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Commentaire : ")],-1)),t("td",null,[t("p",Zt,v(l(d).commentaire_vendeur),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",lg:"6"},{default:s(()=>[e(ee,{title:"Informations client"},{default:s(()=>[e(Z,null,{default:s(()=>[e(ge,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[16]||(a[16]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Nom de client : ")],-1)),t("td",null,[t("p",el,v(l(d).nom_client),1)])]),t("tr",null,[a[17]||(a[17]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel de client : ")],-1)),t("td",null,[t("p",tl,v(l(d).tel_client),1)])]),t("tr",null,[a[18]||(a[18]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Distination : ")],-1)),t("td",null,[t("p",ll,v(l(d).destination),1)])]),t("tr",null,[a[19]||(a[19]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Adresse : ")],-1)),t("td",null,[t("p",sl,v(l(d).adresse),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(De,{modelValue:l(o),"onUpdate:modelValue":a[1]||(a[1]=p=>N(o)?o.value=p:null),grow:"",class:"disable-tab-transition",stacked:""},{default:s(()=>[(V(),P(le,null,Ne(c,(p,j)=>e(Be,{key:j},{default:s(()=>[e(fe,{size:"40",icon:p},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),e(je,{modelValue:l(o),"onUpdate:modelValue":a[2]||(a[2]=p=>N(o)?o.value=p:null),class:"mt-3"},{default:s(()=>[e(be,null,{default:s(()=>[e(Y,{id:l(d).id,"current-statut":l(d).statut},null,8,["id","current-statut"])]),_:1}),e(be,null,{default:s(()=>[e(ae,{histories:l(d).colisHistories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[we,!l(h)]]),l($)?Ce((V(),M(Z,{key:0},{default:s(()=>[e(U,null,{default:s(()=>[e(E,{md:"6",cols:"12"},{default:s(()=>[e(oe,{modelValue:l(d).livreur_id,"onUpdate:modelValue":a[3]||(a[3]=p=>l(d).livreur_id=p),placeholder:"Livreurs",label:"Livreurs",items:l(I),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(E,{cols:"12",md:"6"},{default:s(()=>[e(te,{modelValue:l(d).frais_livreur,"onUpdate:modelValue":a[4]||(a[4]=p=>l(d).frais_livreur=p),rules:["requiredValidator"in y?y.requiredValidator:l(ce)],label:"Frais de livreur",type:"number",placeholder:"Frais de livreur"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(U,null,{default:s(()=>[e(E,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[e(B,{color:"secondary",onClick:a[5]||(a[5]=p=>h.value=!1)},{default:s(()=>a[20]||(a[20]=[T(" retour ")])),_:1}),e(B,{loading:l(R),onClick:g},{default:s(()=>a[21]||(a[21]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[we,l(h)]]):O("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},ol=$e(al,[["__scopeId","data-v-8e94f9f7"]]),nl={class:"d-flex flex-wrap gap-4 ma-6"},il={class:"d-flex gap-4 flex-wrap align-center"},ul={key:1},Ll={__name:"list",async setup(i){let x,_;const S=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],b=f(),C=f(),u=f(),I=f(),d=f(!1),k=f(!1),F=f(),A=f(!1),$=f(),o=f(5),c=f(1),h=f(),R=f(),g=w=>{var n,L;h.value=(n=w.sortBy[0])==null?void 0:n.key,R.value=(L=w.sortBy[0])==null?void 0:L.order},y=w=>{A.value=!0,$.value=w},a=w=>{k.value=!0,F.value=w},K=async()=>{let w="/api/colis/"+F.value.id;d.value=!0,se({method:"DELETE",url:w}).then(async n=>{n.status===200&&(k.value=!1,z.success(n.data),m()),d.value=!1}).catch(n=>{d.value=!1})},{data:Y,error:ae,statusCode:oe,isFetching:te,execute:m}=([x,_]=Re(()=>ct(He("/api/colis",{query:{code:b,statut:C,nom_client:u,tel_client:I,page:c,itemsPerPage:o,sortBy:h,orderBy:R}}))),x=await x,_(),x),p=tt(),j=D(()=>Y.value.items),ne=D(()=>Y.value.total),G=f(!1),ie=f(0),ue=f(0),Q=w=>{ue.value=w.id,ie.value++,G.value=!0};return(w,n)=>{const L=Se,re=Ee,de=lt("IconBtn"),ve=ze,_e=ke;return V(),P("div",null,[e(ee,{title:"Filtres",class:"mb-6 d-print-none"},{default:s(()=>[e(Z,null,{default:s(()=>[e(U,null,{default:s(()=>[e(E,{cols:"12",sm:"2"},{default:s(()=>[e(L,{modelValue:l(C),"onUpdate:modelValue":n[0]||(n[0]=r=>N(C)?C.value=r:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",sm:"2"},{default:s(()=>[e(L,{modelValue:l(b),"onUpdate:modelValue":n[1]||(n[1]=r=>N(b)?b.value=r:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",sm:"2"},{default:s(()=>[e(L,{modelValue:l(u),"onUpdate:modelValue":n[2]||(n[2]=r=>N(u)?u.value=r:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",sm:"2"},{default:s(()=>[e(L,{modelValue:l(I),"onUpdate:modelValue":n[3]||(n[3]=r=>N(I)?I.value=r:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(X),t("div",nl,[e(pt),t("div",il,[e(re,{modelValue:l(o),"onUpdate:modelValue":n[4]||(n[4]=r=>N(o)?o.value=r:null),items:[5,10,20,25,50]},null,8,["modelValue"]),l(W)("create","colis")?(V(),M(B,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:n[5]||(n[5]=r=>l(p).push({name:"colis-add"}))},{default:s(()=>n[14]||(n[14]=[T(" Ajouter Colis ")])),_:1})):O("",!0)])]),e(X,{class:"mt-4"}),e(Me,{"items-per-page":l(o),"onUpdate:itemsPerPage":n[7]||(n[7]=r=>N(o)?o.value=r:null),page:l(c),"onUpdate:page":n[8]||(n[8]=r=>N(c)?c.value=r:null),loading:l(te),headers:S,items:l(j),"items-length":l(ne),class:"text-no-wrap",locale:"fr","onUpdate:options":g},{"item.code":s(({item:r})=>[l(W)("show","colis")?(V(),M(B,{key:0,variant:"text",onClick:J=>Q(r)},{default:s(()=>[T(v(r.code),1)]),_:2},1032,["onClick"])):(V(),P("span",ul,v(r.code),1))]),"item.statut":s(({item:r})=>[e(Pe,me(("statutInfos"in w?w.statutInfos:l(q))(r.statut),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":s(({item:r})=>[t("div",null,[l(W)("update","colis")&&r.statut=="EN_ATTENTE"?(V(),M(de,{key:0,onClick:J=>l(p).push("/colis/"+r.id)},{default:s(()=>[e(fe,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):O("",!0),e(de,null,{default:s(()=>[e(fe,{icon:"tabler-dots-vertical"}),e(ft,{activator:"parent"},{default:s(()=>[e(vt,null,{default:s(()=>[e(Ie,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:J=>y(r)},{default:s(()=>n[15]||(n[15]=[T(" Print ")])),_:2},1032,["onClick"]),l(W)("delete","colis")&&r.statut=="EN_ATTENTE"?(V(),M(Ie,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:J=>a(r)},{default:s(()=>n[16]||(n[16]=[T(" Delete ")])),_:2},1032,["onClick"])):O("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:s(()=>[e(ve,{page:l(c),"onUpdate:page":n[6]||(n[6]=r=>N(c)?c.value=r:null),"items-per-page":l(o),"total-items":l(ne)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),e(Te,{modelValue:l(k),"onUpdate:modelValue":n[11]||(n[11]=r=>N(k)?k.value=r:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[e(_e,{onClick:n[9]||(n[9]=r=>k.value=!l(k))}),e(ee,{title:"Ãtes-vous sÃ»r de vouloir supprimer le colis "+l(F).code+" ?"},{default:s(()=>[e(Z,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[e(B,{color:"secondary",variant:"tonal",onClick:n[10]||(n[10]=r=>k.value=!1)},{default:s(()=>n[17]||(n[17]=[T(" Non ")])),_:1}),e(B,{loading:l(d),onClick:K},{default:s(()=>n[18]||(n[18]=[T(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),l(A)?(V(),M(Pt,{key:0,"is-print-colis":l(A),"onUpdate:isPrintColis":n[12]||(n[12]=r=>N(A)?A.value=r:null),item:l($)},null,8,["is-print-colis","item"])):O("",!0),l(G)?(V(),M(ol,{id:l(ue),key:l(ie),"is-show-item":l(G),"onUpdate:isShowItem":n[13]||(n[13]=r=>N(G)?G.value=r:null),onFetchItems:l(m)},null,8,["id","is-show-item","onFetchItems"])):O("",!0)])}}};export{Ll as default};
