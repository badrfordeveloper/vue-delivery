import{_ as q}from"./AddEditRoleDialog-DhRxyXe4.js";import{a as j,c as z,_ as O}from"./VDataTableServer-CfDYCTqh.js";import{_ as Y}from"./AppSelect-y6FoQWxb.js";import{_ as G}from"./AppTextField-CmS8k3i0.js";import{r as s,aq as H,Y as C,o as v,c as J,d as V,b as l,e as i,m as t,ak as r,f as U,t as K,ai as L,y as w,$ as M,F as Q,a as W,A as F}from"./index-DPEARWyz.js";import{u as X}from"./index-_IxcGEJc.js";import{V as Z}from"./VCardText-f7-Kcvw5.js";import{V as h,a as ee}from"./VRow-Dfw-41Up.js";import{V as A}from"./VDivider-hzcI50H3.js";import{V as oe}from"./VSpacer-BqhLF761.js";import{V as te}from"./VCard-B2jYeW2D.js";import"./VForm-Cy5hsHMQ.js";import"./VTextField-euNnZfEI.js";import"./VImg-B5j7I_AE.js";import"./forwardRefs-DWGaNmQL.js";import"./DialogCloseBtn-DYkDxoTT.js";import"./api-DhWGbEVG.js";import"./toast-qMdeGvQh.js";import"./VSelect-CBQXVdf1.js";import"./VList-bbfuGvOt.js";import"./VAvatar-BH_YnDZc.js";import"./VOverlay-CFFYPqc7.js";import"./VMenu-CLGsvIgf.js";import"./VChip-D585xh2w.js";import"./VDialog-7lteG5Ac.js";import"./filter-CCjRknBQ.js";/* empty css              */const le={class:"d-flex flex-wrap gap-4 ma-6"},se={class:"d-flex gap-4 flex-wrap align-center"},Ie={__name:"list",async setup(ae){let p,_;const D=[{title:"Role",key:"name",sortable:!1},{title:"actions",key:"actions",sortable:!1}],d=s(),u=s(!1),c=s(!1);s(!1);const f=s({name:"",permissions:[]}),P=m=>{f.value={...m},c.value=!0},a=s(5),n=s(1),b=s(),R=s(),$=m=>{var e,g;b.value=(e=m.sortBy[0])==null?void 0:e.key,R.value=(g=m.sortBy[0])==null?void 0:g.order},{data:y,error:ie,statusCode:re,isFetching:N,execute:k}=([p,_]=H(()=>X(z("/api/roles",{query:{name:d,page:n,itemsPerPage:a,sortBy:b,orderBy:R}}))),p=await p,_(),p),T=C(()=>y.value.items),x=C(()=>y.value.total);return(m,e)=>{const g=G,E=Y,I=W("IconBtn"),S=O,B=q;return v(),J(Q,null,[V("div",null,[l(te,{title:"Filtres",class:"mb-6"},{default:i(()=>[l(Z,null,{default:i(()=>[l(h,null,{default:i(()=>[l(ee,{cols:"12",sm:"4"},{default:i(()=>[l(g,{modelValue:t(d),"onUpdate:modelValue":e[0]||(e[0]=o=>r(d)?d.value=o:null),placeholder:"Recherche role",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A),V("div",le,[l(oe),V("div",se,[l(E,{modelValue:t(a),"onUpdate:modelValue":e[1]||(e[1]=o=>r(a)?a.value=o:null),items:[5,10,20,25,50]},null,8,["modelValue"]),t(F)("create","role")?(v(),U(L,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[2]||(e[2]=o=>u.value=!0)},{default:i(()=>e[10]||(e[10]=[K(" Ajouter Role ")])),_:1})):w("",!0)])]),l(A,{class:"mt-4"}),l(j,{"items-per-page":t(a),"onUpdate:itemsPerPage":e[4]||(e[4]=o=>r(a)?a.value=o:null),"model-value":m.selectedRows,"onUpdate:modelValue":e[5]||(e[5]=o=>m.selectedRows=o),page:t(n),"onUpdate:page":e[6]||(e[6]=o=>r(n)?n.value=o:null),loading:t(N),headers:D,items:t(T),"items-length":t(x),class:"text-no-wrap","onUpdate:options":$},{"item.actions":i(({item:o})=>[t(F)("update","role")?(v(),U(I,{key:0,onClick:ne=>P(o)},{default:i(()=>[l(M,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):w("",!0)]),bottom:i(()=>[l(S,{page:t(n),"onUpdate:page":e[3]||(e[3]=o=>r(n)?n.value=o:null),"items-per-page":t(a),"total-items":t(x)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","loading","items","items-length"])]),_:1})]),l(B,{"is-dialog-visible":t(u),"onUpdate:isDialogVisible":e[7]||(e[7]=o=>r(u)?u.value=o:null),onFetchRoles:t(k)},null,8,["is-dialog-visible","onFetchRoles"]),l(B,{"is-dialog-visible":t(c),"onUpdate:isDialogVisible":e[8]||(e[8]=o=>r(c)?c.value=o:null),"role-permissions":t(f),"onUpdate:rolePermissions":e[9]||(e[9]=o=>r(f)?f.value=o:null),onFetchRoles:t(k)},null,8,["is-dialog-visible","role-permissions","onFetchRoles"])],64)}}};export{Ie as default};
