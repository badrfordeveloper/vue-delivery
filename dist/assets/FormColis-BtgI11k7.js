import{r as f,P as M,V as z}from"./VForm-ByDnFICH.js";import{_ as H}from"./AppAutocomplete-Bp-oPoMZ.js";import{_ as L}from"./AppTextField-B71EgLUu.js";import{a1 as N,a2 as j,a9 as G,b as e,s as R,am as Y,Y as J,al as K,ar as Q,F as D,ag as A,an as W,j as X,r as q,aq as Z,as as O,w as $,c as ee,o as le,d as C,x as ae,e as o,n as a,ai as te,v as oe}from"./index-CDDwny-K.js";import{$ as x}from"./api-CmUFIEMg.js";import{t as k}from"./toast-Dv8jPkVd.js";import{V as _,a as u}from"./VRow-BSePUP6J.js";import{V as U}from"./VCard-DKep4z2G.js";import{V as w}from"./VCardText-C4f9vuwE.js";import{V as F,a as P,m as re}from"./VTextField-Cq9gHUQ4.js";import{V as T,m as se,a as de,b as ie}from"./VSelect-Bat98VMv.js";const ue=j({...se({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),b=N()({name:"VRadio",props:ue(),setup(i,p){let{slots:c}=p;return G(()=>{const n=T.filterProps(i);return e(T,R(n,{class:["v-radio",i.class],style:i.style,type:"radio"}),c)}),{}}}),ne=j({height:{type:[Number,String],default:"auto"},...re(),...W(ie(),["multiple"]),trueIcon:{type:A,default:"$radioOn"},falseIcon:{type:A,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),S=N()({name:"VRadioGroup",inheritAttrs:!1,props:ne(),emits:{"update:modelValue":i=>!0},setup(i,p){let{attrs:c,slots:n}=p;const I=Y(),v=J(()=>i.id||`radio-group-${I}`),V=K(i,"modelValue");return G(()=>{const[y,g]=Q(c),r=F.filterProps(i),h=T.filterProps(i),t=n.label?n.label({label:i.label,props:{for:v.value}}):i.label;return e(F,R({class:["v-radio-group",i.class],style:i.style},y,r,{modelValue:V.value,"onUpdate:modelValue":l=>V.value=l,id:v.value}),{...n,default:l=>{let{id:d,messagesId:m,isDisabled:s,isReadonly:B}=l;return e(D,null,[t&&e(P,{id:d.value},{default:()=>[t]}),e(de,R(h,{id:d.value,"aria-describedby":m.value,defaultsTarget:"VRadio",trueIcon:i.trueIcon,falseIcon:i.falseIcon,type:i.type,disabled:s.value,readonly:B.value,"aria-labelledby":t?d.value:void 0,multiple:!1},g,{modelValue:V.value,"onUpdate:modelValue":E=>V.value=E}),n)])}})}),{}}}),me={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},fe={class:"d-flex flex-column justify-center"},pe={class:"text-h4 font-weight-medium"},Ce={__name:"FormColis",props:{method:{type:String,required:!0},item:{type:Object,required:!1},identity:{type:String,required:!1}},async setup(i){let p,c;const n=i,I=X(),v=q(),V=q([]),y=q(!1);V.value=([p,c]=Z(()=>x("/api/tarifs").then(t=>t.data.items)),p=await p,c(),p);let g={nom_client:"",tel_client:"",tarif_id:"",frais_livraison:"",adresse:"",produit:"",montant:"",commentaire_vendeur:"",essayage:0,ouvrir:0,echange:0};const r=q(structuredClone(O(g)));$(()=>n.item,t=>{n.method=="PUT"&&(r.value={...t})},{immediate:!0}),$(()=>r.value.tarif_id,t=>{const l=V.value.find(d=>d.id===t);r.value.frais_livraison=l?l.tarif+"DH Ã  "+l.delai_livraison:""},{immediate:!0});const h=async()=>{const{valid:t}=await v.value.validate();if(t){let l="/api/colis";n.method=="PUT"&&(l="/api/colis/"+n.identity),y.value=!0,x({method:n.method,url:l,data:r.value}).then(async d=>{var m;d.status===200&&(k.success(d.data),n.method=="POST"?((m=v.value)==null||m.reset(),r.value=structuredClone(O(g))):I.push({name:"colis-list"})),y.value=!1}).catch(d=>{if(y.value=!1,d.response&&d.response.status===422){const m=d.response.data.errors;for(let s in m)k.error(`${s}: ${m[s].join(", ")}`)}})}};return(t,l)=>{const d=L,m=H;return le(),ee(D,null,[C("div",me,[C("div",fe,[C("h4",pe,ae(n.method=="POST"?"Ajouter Colis":"Modifier Colis"),1)])]),e(z,{ref_key:"refForm",ref:v,class:"mt-3"},{default:o(()=>[e(_,null,{default:o(()=>[e(u,{cols:"12",md:"6"},{default:o(()=>[e(u,{cols:"12",class:"pa-0"},{default:o(()=>[e(U,{title:"Informations du client"},{default:o(()=>[e(w,null,{default:o(()=>[e(_,null,{default:o(()=>[e(u,{md:"6",cols:"12"},{default:o(()=>[e(d,{modelValue:a(r).nom_client,"onUpdate:modelValue":l[0]||(l[0]=s=>a(r).nom_client=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],placeholder:"Nom",label:"Nom"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:a(r).tel_client,"onUpdate:modelValue":l[1]||(l[1]=s=>a(r).tel_client=s),rules:["requiredValidator"in t?t.requiredValidator:a(f),"PhoneValidator"in t?t.PhoneValidator:a(M)],label:"Telephone",size:"10",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"px-0"},{default:o(()=>[e(U,{title:"Informations d'adresse"},{default:o(()=>[e(w,null,{default:o(()=>[e(_,null,{default:o(()=>[e(u,{md:"6",cols:"12"},{default:o(()=>[e(m,{modelValue:a(r).tarif_id,"onUpdate:modelValue":l[2]||(l[2]=s=>a(r).tarif_id=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],label:"Destination",items:a(V),"item-title":"destination","item-value":"id",placeholder:"Select State"},null,8,["modelValue","rules","items"])]),_:1}),e(u,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:a(r).frais_livraison,"onUpdate:modelValue":l[3]||(l[3]=s=>a(r).frais_livraison=s),disabled:"",label:"Frais de livraison",placeholder:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:o(()=>[e(d,{modelValue:a(r).adresse,"onUpdate:modelValue":l[4]||(l[4]=s=>a(r).adresse=s),"prepend-inner-icon":"tabler-map-pin",rules:["requiredValidator"in t?t.requiredValidator:a(f)],label:"Adresse",placeholder:"Adresse"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:o(()=>[e(U,{title:"Informations des produits"},{default:o(()=>[e(w,null,{default:o(()=>[e(_,null,{default:o(()=>[e(u,{cols:"12"},{default:o(()=>[e(d,{modelValue:a(r).produit,"onUpdate:modelValue":l[5]||(l[5]=s=>a(r).produit=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],label:"Produits",placeholder:"Produits"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:a(r).montant,"onUpdate:modelValue":l[6]||(l[6]=s=>a(r).montant=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],type:"number",label:"Montant Total",placeholder:"Montant Total"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6",class:"app-text-field"},{default:o(()=>[e(P,{text:"Essayage",class:"mb-1 text-body-2 text-wrap"}),e(S,{modelValue:a(r).essayage,"onUpdate:modelValue":l[7]||(l[7]=s=>a(r).essayage=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],inline:""},{default:o(()=>[e(b,{label:"Non",value:0,density:"compact"}),e(b,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6",class:"app-text-field"},{default:o(()=>[e(P,{text:"Ouvrir",class:"mb-1 text-body-2 text-wrap"}),e(S,{modelValue:a(r).ouvrir,"onUpdate:modelValue":l[8]||(l[8]=s=>a(r).ouvrir=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],inline:""},{default:o(()=>[e(b,{label:"Non",value:0,density:"compact"}),e(b,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6",class:"app-text-field"},{default:o(()=>[e(P,{text:"Echange",class:"mb-1 text-body-2 text-wrap"}),e(S,{modelValue:a(r).echange,"onUpdate:modelValue":l[9]||(l[9]=s=>a(r).echange=s),rules:["requiredValidator"in t?t.requiredValidator:a(f)],inline:""},{default:o(()=>[e(b,{label:"Non",value:0,density:"compact"}),e(b,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:o(()=>[e(d,{modelValue:a(r).commentaire_vendeur,"onUpdate:modelValue":l[10]||(l[10]=s=>a(r).commentaire_vendeur=s),label:"commentaire",placeholder:"commentaire"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(_,null,{default:o(()=>[e(u,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:o(()=>[e(te,{loading:a(y),onClick:h},{default:o(()=>l[11]||(l[11]=[oe(" Enregistrer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)],64)}}};export{Ce as _};
