import{r as f,V as x}from"./VForm-CMCpW6Fd.js";import{_ as g}from"./AppTextField-oLCXZWk_.js";import{$ as q}from"./api-DoENDU7p.js";import{t as V}from"./toast-CUbcpQy7.js";import{V as m,a as n}from"./VRow-DLetuWDj.js";import{V as v}from"./VCard-BRUBZ8oR.js";import{V as T}from"./VCardText-BL_NRqOR.js";import{r as _,w,o as b,c as j,d as p,v as F,b as e,e as t,m as s,ai as C,t as S,F as P}from"./index-DD7JbDxk.js";const U={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},$={class:"d-flex flex-column justify-center"},k={class:"text-h4 font-weight-medium"},Z={__name:"FormTarif",props:{method:{type:String,required:!0},item:{type:Object,required:!1},identity:{type:String,required:!1}},setup(y){const d=y,u=_(),i=_({destination:"",tarif:"",prefix:""});w(()=>d.item,l=>{d.method=="PUT"&&(i.value={...l})},{immediate:!0});const h=async()=>{console.log(i.value);const{valid:l}=await u.value.validate();if(l){let a="/api/tarifs";d.method=="PUT"&&(a="/api/tarifs/"+d.identity),q({method:d.method,url:a,data:i.value}).then(async o=>{var r;o.status===200&&(V.success(o.data),d.method=="POST"&&((r=u.value)==null||r.reset()))}).catch(o=>{if(o.response&&o.response.status===422){const r=o.response.data.errors;for(let c in r)V.error(`${c}: ${r[c].join(", ")}`)}})}};return(l,a)=>{const o=g;return b(),j(P,null,[p("div",U,[p("div",$,[p("h4",k,F(d.method=="POST"?"Ajouter Tarif":"Modifier Tarif"),1)])]),e(x,{ref_key:"refForm",ref:u,class:"mt-3"},{default:t(()=>[e(m,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(v,null,{default:t(()=>[e(T,{class:"pt-2"},{default:t(()=>[e(m,null,{default:t(()=>[e(n,{md:"6",cols:"12"},{default:t(()=>[e(o,{modelValue:s(i).destination,"onUpdate:modelValue":a[0]||(a[0]=r=>s(i).destination=r),rules:["requiredValidator"in l?l.requiredValidator:s(f)],placeholder:"Destination",label:"Destination"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:t(()=>[e(o,{modelValue:s(i).tarif,"onUpdate:modelValue":a[1]||(a[1]=r=>s(i).tarif=r),rules:["requiredValidator"in l?l.requiredValidator:s(f)],placeholder:"tarif",label:"tarif"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:t(()=>[e(o,{modelValue:s(i).prefix,"onUpdate:modelValue":a[2]||(a[2]=r=>s(i).prefix=r),rules:["requiredValidator"in l?l.requiredValidator:s(f)],placeholder:"ex : CAZN",label:"Prefix"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(C,{onClick:h},{default:t(()=>a[3]||(a[3]=[S(" Enregistrer ")])),_:1})]),_:1})]),_:1})]),_:1},512)],64)}}};export{Z as _};
