import{r as V,e as X,P as Z,p as ee,V as le}from"./VForm-B2WdQWxv.js";import{_ as ae}from"./AppSelect-zFLYJ9eC.js";import{_ as oe}from"./AppTextField-DlXfUlTR.js";import{a1 as te,a2 as re,al as T,bG as se,r as P,aM as de,Y as R,am as ie,a9 as ue,aD as ne,b as e,s as $,F as x,aP as me,cp as ce,$ as fe,bK as Ve,ce as pe,j as ve,w as be,aq as we,c as he,o as ye,d as F,x as ke,e as s,n as l,ai as ge,v as Ce}from"./index-Dy7Usk4l.js";import{$ as j}from"./api-I3jvlWdA.js";import{t as D}from"./toast-DuLiNZ_C.js";import{V as C,a as n}from"./VRow-TJvxsZ_y.js";import{V as O}from"./VCard-CeZuMw9F.js";import{V as E}from"./VCardText-BJYEBQo3.js";import{u as Pe,a as z,b as Se}from"./VInput-DYCyGubC.js";import{V as L,m as qe}from"./VSelectionControl-D23KI5kr.js";const Ue=re({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Se(),...qe()},"VSwitch"),Ne=te()({name:"VSwitch",inheritAttrs:!1,props:Ue(),emits:{"update:focused":d=>!0,"update:modelValue":d=>!0,"update:indeterminate":d=>!0},setup(d,v){let{attrs:h,slots:u}=v;const b=T(d,"indeterminate"),m=T(d,"modelValue"),{loaderClasses:t}=se(d),{isFocused:S,focus:q,blur:U}=Pe(d),p=P(),a=de&&window.matchMedia("(forced-colors: active)").matches,o=R(()=>typeof d.loading=="string"&&d.loading!==""?d.loading:d.color),i=ie(),c=R(()=>d.id||`switch-${i}`);function r(){b.value&&(b.value=!1)}function M(y){var k,g;y.stopPropagation(),y.preventDefault(),(g=(k=p.value)==null?void 0:k.input)==null||g.click()}return ue(()=>{const[y,k]=ne(h),g=z.filterProps(d),G=L.filterProps(d);return e(z,$({class:["v-switch",{"v-switch--flat":d.flat},{"v-switch--inset":d.inset},{"v-switch--indeterminate":b.value},t.value,d.class]},y,g,{modelValue:m.value,"onUpdate:modelValue":N=>m.value=N,id:c.value,focused:S.value,style:d.style}),{...u,default:N=>{let{id:H,messagesId:K,isDisabled:W,isReadonly:Y,isValid:B}=N;const _={model:m,isValid:B};return e(L,$({ref:p},G,{modelValue:m.value,"onUpdate:modelValue":[w=>m.value=w,r],id:H.value,"aria-describedby":K.value,type:"checkbox","aria-checked":b.value?"mixed":void 0,disabled:W.value,readonly:Y.value,onFocus:q,onBlur:U},k),{...u,default:w=>{let{backgroundColorClasses:I,backgroundColorStyles:f}=w;return e("div",{class:["v-switch__track",a?void 0:I.value],style:f.value,onClick:M},[u["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[u["track-true"](_)]),u["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[u["track-false"](_)])])},input:w=>{let{inputNode:I,icon:f,backgroundColorClasses:J,backgroundColorStyles:Q}=w;return e(x,null,[I,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":f||d.loading},d.inset||a?void 0:J.value],style:d.inset?void 0:Q.value},[u.thumb?e(me,{defaults:{VIcon:{icon:f,size:"x-small"}}},{default:()=>[u.thumb({..._,icon:f})]}):e(ce,null,{default:()=>[d.loading?e(Ve,{name:"v-switch",active:!0,color:B.value===!1?void 0:o.value},{default:A=>u.loader?u.loader(A):e(pe,{active:A.isActive,color:A.color,indeterminate:!0,size:"16",width:"2"},null)}):f&&e(fe,{key:String(f),icon:f,size:"x-small"},null)]})])])}})}})}),{}}}),_e={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},Ie={class:"d-flex flex-column justify-center"},Ae={class:"text-h4 font-weight-medium"},xe={__name:"FormUser",props:{method:{type:String,required:!0},user:{type:Object,required:!1},identity:{type:String,required:!1}},async setup(d){let v,h;const u=d,b=ve(),m=P(),t=P({lastName:"",firstName:"",cin:"",email:"",password:"",active:0,phone:"",store:"",role:null,ville:"",address:"",bank_name:"",rib:""});be(()=>u.user,a=>{u.method=="PUT"&&(t.value={...a},t.value.active=t.value.active==1)},{immediate:!0});const S=([v,h]=we(()=>j("/api/rolesList").then(a=>a.data)),v=await v,h(),v),q=async()=>{console.log(t.value);const{valid:a}=await m.value.validate();if(a){let o="/api/users";u.method=="PUT"&&(o="/api/users/"+u.identity),j({method:u.method,url:o,data:t.value}).then(async i=>{var c;i.status===200&&(D.success(i.data),u.method=="POST"?(c=m.value)==null||c.reset():b.push({name:"user-list"}))}).catch(i=>{if(i.response&&i.response.status===422){const c=i.response.data.errors;for(let r in c)D.error(`${r}: ${c[r].join(", ")}`)}})}},U=a=>{if(a===1||a===!0)return"Active";if(a===0||a===!1)return"Inactive"},p=P(!1);return(a,o)=>{const i=oe,c=ae;return ye(),he(x,null,[F("div",_e,[F("div",Ie,[F("h4",Ae,ke(u.method=="POST"?"Ajouter Utilisateur":"Modifier Utilisateur"),1)])]),e(le,{ref_key:"refForm",ref:m,class:"mt-3"},{default:s(()=>[e(C,null,{default:s(()=>[e(n,{cols:"12"},{default:s(()=>[e(O,null,{default:s(()=>[e(E,{class:"pt-2"},{default:s(()=>[e(C,null,{default:s(()=>[e(n,{md:"6",cols:"12"},{default:s(()=>[e(i,{modelValue:l(t).lastName,"onUpdate:modelValue":o[0]||(o[0]=r=>l(t).lastName=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"Nom",label:"Nom"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:s(()=>[e(i,{modelValue:l(t).firstName,"onUpdate:modelValue":o[1]||(o[1]=r=>l(t).firstName=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"Prenom",label:"Prenom"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:s(()=>[e(i,{modelValue:l(t).cin,"onUpdate:modelValue":o[2]||(o[2]=r=>l(t).cin=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"N° CIN",label:"N° CIN"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:s(()=>[e(c,{modelValue:l(t).role,"onUpdate:modelValue":o[3]||(o[3]=r=>l(t).role=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"Role",label:"Role",items:l(S),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","rules","items"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).email,"onUpdate:modelValue":o[4]||(o[4]=r=>l(t).email=r),rules:["requiredValidator"in a?a.requiredValidator:l(V),"emailValidator"in a?a.emailValidator:l(X)],label:"E-mail",placeholder:"example@gmail.com",type:"email"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).phone,"onUpdate:modelValue":o[5]||(o[5]=r=>l(t).phone=r),rules:["requiredValidator"in a?a.requiredValidator:l(V),"PhoneValidator"in a?a.PhoneValidator:l(Z)],label:"Telephone",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).store,"onUpdate:modelValue":o[6]||(o[6]=r=>l(t).store=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],label:"Nom de store",placeholder:"Nom de store"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).ville,"onUpdate:modelValue":o[7]||(o[7]=r=>l(t).ville=r),label:"Ville",placeholder:"Ville"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).address,"onUpdate:modelValue":o[8]||(o[8]=r=>l(t).address=r),label:"Address",placeholder:"Address"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).password,"onUpdate:modelValue":o[9]||(o[9]=r=>l(t).password=r),rules:u.method=="POST"?["requiredValidator"in a?a.requiredValidator:l(V),"passwordValidator"in a?a.passwordValidator:l(ee)]:[],type:l(p)?"text":"password","append-inner-icon":l(p)?"tabler-eye-off":"tabler-eye",label:"Current Password",autocomplete:"on",placeholder:"············","onClick:appendInner":o[10]||(o[10]=r=>p.value=!l(p))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(n,{cols:"12",md:"12"},{default:s(()=>[e(Ne,{modelValue:l(t).active,"onUpdate:modelValue":o[11]||(o[11]=r=>l(t).active=r),color:"success","base-color":"error",label:U(l(t).active)},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(n,{cols:"12"},{default:s(()=>[e(O,{title:"Informations de paiement"},{default:s(()=>[e(E,null,{default:s(()=>[e(C,null,{default:s(()=>[e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).bank_name,"onUpdate:modelValue":o[12]||(o[12]=r=>l(t).bank_name=r),label:"Nom de bank",placeholder:"CIH"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(i,{modelValue:l(t).rib,"onUpdate:modelValue":o[13]||(o[13]=r=>l(t).rib=r),label:"RIB",placeholder:"FR3333785451"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:s(()=>[e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[e(ge,{onClick:q},{default:s(()=>o[14]||(o[14]=[Ce(" Enregistrer ")])),_:1})]),_:1})]),_:1})]),_:1},512)],64)}}};export{xe as _};
