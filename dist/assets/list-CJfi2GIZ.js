import{_ as h}from"./AddEditRoleDialog-C9R9TbAS.js";import{a as M,c as ee,_ as te}from"./VDataTableServer-CgMP1-EQ.js";import{_ as le}from"./AppSelect-D_zyk_Di.js";import{_ as oe}from"./AppTextField-BaoZ6xiQ.js";import{r as s,aq as T,Y as I,o as p,c as R,d as U,b as o,e as a,m as l,ak as i,f as q,t as E,ai as j,y as L,v as z,F as O,h as ae,q as se,$ as ie,A as C,j as re,a as ne}from"./index-B8o6XWUs.js";import{$ as me}from"./api-CJxevPF4.js";import{u as ue}from"./index-DOoUuGNn.js";import{V as pe}from"./VCardText-BKSNcZG6.js";import{V as de,a as N}from"./VRow-p0TnjJjy.js";import{V as Y}from"./VDivider-Bj74Fv69.js";import{V as ce}from"./VSpacer-CwWQt-TZ.js";import{V as fe}from"./VChip-Fri2bxdA.js";import{V as ve}from"./VCard-CjZ-CFls.js";import"./VForm-BiIm56jG.js";import"./VTextField-DmD_WYFy.js";import"./VImg-DdNh8-7M.js";import"./forwardRefs-DWGaNmQL.js";import"./DialogCloseBtn-D7TP1cV5.js";import"./toast-DqE3X-CW.js";import"./VSelect-Cf7bZ_tZ.js";import"./VList-Cwnv6z4G.js";import"./VAvatar-CL2L54QD.js";import"./VOverlay-BkZ_veo4.js";import"./VMenu-xqu6wRhm.js";import"./VDialog-Dtir6RYY.js";import"./filter-BkQyCWJs.js";/* empty css              */const Ve={class:"d-flex flex-wrap gap-4 ma-6"},ge={class:"d-flex gap-4 flex-wrap align-center"},Qe={__name:"list",async setup(be){let n,d;const G=[{title:"Nom",key:"lastName",sortable:!1},{title:"Prenom",key:"firstName",sortable:!1},{title:"role",key:"role",sortable:!1,align:C("show","role")?" start":" d-none"},{title:"statut",key:"active",sortable:!1},{title:"actions",key:"actions",sortable:!1}],c=s(),f=s(),v=s(),g=s([]),b=s(!1),_=s(!1);s(!1);const y=s({name:"",permissions:[]}),H=s([{title:"Active",value:"1"},{title:"Inactive",value:"0"}]),w=([n,d]=T(()=>me("/api/rolesList").then(r=>r.data)),n=await n,d(),n);console.log(w);const m=s(5),u=s(1),B=s(),P=s(),J=r=>{var t,V;B.value=(t=r.sortBy[0])==null?void 0:t.key,P.value=(V=r.sortBy[0])==null?void 0:V.order},{data:A,error:_e,statusCode:ye,isFetching:K,execute:D}=([n,d]=T(()=>ue(ee("/api/users",{query:{active:f,role:c,fullName:v,page:u,itemsPerPage:m,sortBy:B,orderBy:P}}))),n=await n,d(),n),F=re(),Q=I(()=>A.value.items),$=I(()=>A.value.total),W=r=>{if(console.log(r),r===1)return{text:"active",color:"success"};if(r===0)return{text:"inactive",color:"warning"}};return(r,t)=>{const V=oe,x=le,X=ne("IconBtn"),Z=te,S=h;return p(),R(O,null,[U("div",null,[o(ve,{title:"Filtres",class:"mb-6"},{default:a(()=>[o(pe,null,{default:a(()=>[o(de,null,{default:a(()=>[o(N,{cols:"12",sm:"2"},{default:a(()=>[o(V,{modelValue:l(v),"onUpdate:modelValue":t[0]||(t[0]=e=>i(v)?v.value=e:null),placeholder:"Nom ou prenom"},null,8,["modelValue"])]),_:1}),o(N,{cols:"12",sm:"2"},{default:a(()=>[o(x,{modelValue:l(c),"onUpdate:modelValue":t[1]||(t[1]=e=>i(c)?c.value=e:null),placeholder:"Roles",items:l(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),o(N,{cols:"12",sm:"2"},{default:a(()=>[o(x,{modelValue:l(f),"onUpdate:modelValue":t[2]||(t[2]=e=>i(f)?f.value=e:null),placeholder:"Status",items:l(H),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),o(Y),U("div",Ve,[o(ce),U("div",ge,[o(x,{modelValue:l(m),"onUpdate:modelValue":t[3]||(t[3]=e=>i(m)?m.value=e:null),items:[5,10,20,25,50]},null,8,["modelValue"]),l(C)("create","user")?(p(),q(j,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:t[4]||(t[4]=e=>l(F).push({name:"user-add"}))},{default:a(()=>t[12]||(t[12]=[E(" Ajouter Utilisateur ")])),_:1})):L("",!0)])]),o(Y,{class:"mt-4"}),o(M,{"items-per-page":l(m),"onUpdate:itemsPerPage":t[6]||(t[6]=e=>i(m)?m.value=e:null),"model-value":l(g),"onUpdate:modelValue":t[7]||(t[7]=e=>i(g)?g.value=e:null),page:l(u),"onUpdate:page":t[8]||(t[8]=e=>i(u)?u.value=e:null),loading:l(K),headers:G,items:l(Q),"items-length":l($),class:"text-no-wrap","onUpdate:options":J},{"item.lastName":a(({item:e})=>[o(j,{variant:"text"},{default:a(()=>[E(z(e.lastName),1)]),_:2},1024)]),"item.role":a(({item:e})=>[(p(!0),R(O,null,ae(e.roles,k=>(p(),R("span",{key:k.id},z(k.name+" "),1))),128))]),"item.active":a(({item:e})=>[o(fe,se(W(e.active),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":a(({item:e})=>[l(C)("update","user")?(p(),q(X,{key:0,onClick:k=>l(F).push("/user/"+e.id)},{default:a(()=>[o(ie,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):L("",!0)]),bottom:a(()=>[o(Z,{page:l(u),"onUpdate:page":t[5]||(t[5]=e=>i(u)?u.value=e:null),"items-per-page":l(m),"total-items":l($)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","loading","items","items-length"])]),_:1})]),o(S,{"is-dialog-visible":l(b),"onUpdate:isDialogVisible":t[9]||(t[9]=e=>i(b)?b.value=e:null),onFetchRoles:l(D)},null,8,["is-dialog-visible","onFetchRoles"]),o(S,{"is-dialog-visible":l(_),"onUpdate:isDialogVisible":t[10]||(t[10]=e=>i(_)?_.value=e:null),"role-permissions":l(y),"onUpdate:rolePermissions":t[11]||(t[11]=e=>i(y)?y.value=e:null),onFetchRoles:l(D)},null,8,["is-dialog-visible","role-permissions","onFetchRoles"])],64)}}};export{Qe as default};
