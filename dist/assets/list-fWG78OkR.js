import{_ as h}from"./AddEditRoleDialog-DEOodD1A.js";import{V as M,_ as ee,c as te}from"./VDataTableServer-BrGyXY0f.js";import{_ as le}from"./AppSelect-Dsd4dWo0.js";import{_ as oe}from"./AppTextField-B71EgLUu.js";import{A as R,r as s,aq as T,j as ae,Y as I,a as se,c as U,o as p,d as C,b as o,e as a,ak as i,n as l,f as E,m as j,ai as q,v as L,$ as ie,s as re,F as z,h as ne,x as O}from"./index-CDDwny-K.js";import{$ as me}from"./api-CmUFIEMg.js";import{u as ue}from"./index-B-aSBDP4.js";import{V as pe}from"./VCardText-C4f9vuwE.js";import{V as de,a as N}from"./VRow-BSePUP6J.js";import{V as Y}from"./VDivider-CkbwQFHj.js";import{V as ce}from"./VSpacer-DwRt49LY.js";import{V as fe}from"./VChip-DCOqYpAb.js";import{V as ve}from"./VCard-DKep4z2G.js";import"./VForm-ByDnFICH.js";import"./VTextField-Cq9gHUQ4.js";import"./VImg-ClcHaf1h.js";import"./forwardRefs-DWGaNmQL.js";import"./DialogCloseBtn-BjnZptwZ.js";import"./toast-Dv8jPkVd.js";import"./VSelect-Bat98VMv.js";import"./VList-C2aQHrPu.js";import"./VAvatar-oKMy1cq5.js";import"./VOverlay-BujVAH3e.js";import"./VMenu-BJLWNyyG.js";import"./VDialog-CD7W6UOQ.js";import"./filter-CkL7EDzh.js";/* empty css              */const Ve={class:"d-flex flex-wrap gap-4 ma-6"},ge={class:"d-flex gap-4 flex-wrap align-center"},Qe={__name:"list",async setup(be){let r,d;const G=[{title:"Nom",key:"lastName",sortable:!1},{title:"Prenom",key:"firstName",sortable:!1},{title:"role",key:"role",sortable:!1,align:R("show","role")?" start":" d-none"},{title:"statut",key:"active",sortable:!1},{title:"actions",key:"actions",sortable:!1}],c=s(),f=s(),v=s(),g=s([]),b=s(!1),_=s(!1);s(!1);const x=s({name:"",permissions:[]}),H=s([{title:"Active",value:"1"},{title:"Inactive",value:"0"}]),w=([r,d]=T(()=>me("/api/rolesList").then(m=>m.data)),r=await r,d(),r);console.log(w);const n=s(5),u=s(1),B=s(),P=s(),J=m=>{var t,V;B.value=(t=m.sortBy[0])==null?void 0:t.key,P.value=(V=m.sortBy[0])==null?void 0:V.order},{data:A,error:_e,statusCode:xe,isFetching:K,execute:D}=([r,d]=T(()=>ue(te("/api/users",{query:{active:f,role:c,fullName:v,page:u,itemsPerPage:n,sortBy:B,orderBy:P}}))),r=await r,d(),r),F=ae(),Q=I(()=>A.value.items),$=I(()=>A.value.total),W=m=>{if(m===1)return{text:"active",color:"success"};if(m===0)return{text:"inactive",color:"warning"}};return(m,t)=>{const V=oe,y=le,X=se("IconBtn"),Z=ee,S=h;return p(),U(z,null,[C("div",null,[o(ve,{title:"Filtres",class:"mb-6"},{default:a(()=>[o(pe,null,{default:a(()=>[o(de,null,{default:a(()=>[o(N,{cols:"12",sm:"2"},{default:a(()=>[o(V,{modelValue:l(v),"onUpdate:modelValue":t[0]||(t[0]=e=>i(v)?v.value=e:null),placeholder:"Nom ou prenom"},null,8,["modelValue"])]),_:1}),o(N,{cols:"12",sm:"2"},{default:a(()=>[o(y,{modelValue:l(c),"onUpdate:modelValue":t[1]||(t[1]=e=>i(c)?c.value=e:null),placeholder:"Roles",items:l(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),o(N,{cols:"12",sm:"2"},{default:a(()=>[o(y,{modelValue:l(f),"onUpdate:modelValue":t[2]||(t[2]=e=>i(f)?f.value=e:null),placeholder:"Status",items:l(H),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),o(Y),C("div",Ve,[o(ce),C("div",ge,[o(y,{modelValue:l(n),"onUpdate:modelValue":t[3]||(t[3]=e=>i(n)?n.value=e:null),items:[5,10,20,25,50]},null,8,["modelValue"]),l(R)("create","user")?(p(),E(q,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:t[4]||(t[4]=e=>l(F).push({name:"user-add"}))},{default:a(()=>t[12]||(t[12]=[L(" Ajouter Utilisateur ")])),_:1})):j("",!0)])]),o(Y,{class:"mt-4"}),o(M,{"items-per-page":l(n),"onUpdate:itemsPerPage":t[6]||(t[6]=e=>i(n)?n.value=e:null),"model-value":l(g),"onUpdate:modelValue":t[7]||(t[7]=e=>i(g)?g.value=e:null),page:l(u),"onUpdate:page":t[8]||(t[8]=e=>i(u)?u.value=e:null),loading:l(K),headers:G,items:l(Q),"items-length":l($),class:"text-no-wrap","onUpdate:options":J},{"item.lastName":a(({item:e})=>[o(q,{variant:"text"},{default:a(()=>[L(O(e.lastName),1)]),_:2},1024)]),"item.role":a(({item:e})=>[(p(!0),U(z,null,ne(e.roles,k=>(p(),U("span",{key:k.id},O(k.name+" "),1))),128))]),"item.active":a(({item:e})=>[o(fe,re(W(e.active),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":a(({item:e})=>[l(R)("update","user")?(p(),E(X,{key:0,onClick:k=>l(F).push("/user/"+e.id)},{default:a(()=>[o(ie,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):j("",!0)]),bottom:a(()=>[o(Z,{page:l(u),"onUpdate:page":t[5]||(t[5]=e=>i(u)?u.value=e:null),"items-per-page":l(n),"total-items":l($)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","loading","items","items-length"])]),_:1})]),o(S,{"is-dialog-visible":l(b),"onUpdate:isDialogVisible":t[9]||(t[9]=e=>i(b)?b.value=e:null),onFetchRoles:l(D)},null,8,["is-dialog-visible","onFetchRoles"]),o(S,{"is-dialog-visible":l(_),"onUpdate:isDialogVisible":t[10]||(t[10]=e=>i(_)?_.value=e:null),"role-permissions":l(x),"onUpdate:rolePermissions":t[11]||(t[11]=e=>i(x)?x.value=e:null),onFetchRoles:l(D)},null,8,["is-dialog-visible","role-permissions","onFetchRoles"])],64)}}};export{Qe as default};
