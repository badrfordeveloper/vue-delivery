import{$ as T,r as V,e as X,P as Z,p as ee,V as le}from"./VForm-BLjPjbmE.js";import{_ as ae}from"./AppSelect-Be6KQpw4.js";import{_ as te}from"./AppTextField-KYzKeVMD.js";import{a1 as oe,a2 as re,al as R,bA as se,r as P,aF as de,Y as $,am as ie,a9 as ue,ar as ne,b as e,s as j,F as x,aI as me,cm as ce,$ as fe,bE as Ve,cb as pe,j as ve,w as be,aq as he,c as we,o as ye,d as F,x as ke,e as s,n as l,ai as ge,v as Ce}from"./index-DC-Wnp_v.js";import{t as D}from"./toast-rl0bCb86.js";import{V as C,a as n}from"./VRow-C-Blmbrh.js";import{V as E}from"./VCard-ba4N2OJb.js";import{V as O}from"./VCardText-rLzALaeu.js";import{u as Pe,V as z,m as Se}from"./VInput-O8_TmnmY.js";import{V as L,m as qe}from"./VSelect-DcS93PjE.js";const Ne=re({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Se(),...qe()},"VSwitch"),Ue=oe()({name:"VSwitch",inheritAttrs:!1,props:Ne(),emits:{"update:focused":d=>!0,"update:modelValue":d=>!0,"update:indeterminate":d=>!0},setup(d,v){let{attrs:w,slots:i}=v;const b=R(d,"indeterminate"),m=R(d,"modelValue"),{loaderClasses:o}=se(d),{isFocused:S,focus:q,blur:N}=Pe(d),p=P(),a=de&&window.matchMedia("(forced-colors: active)").matches,t=$(()=>typeof d.loading=="string"&&d.loading!==""?d.loading:d.color),u=ie(),c=$(()=>d.id||`switch-${u}`);function r(){b.value&&(b.value=!1)}function H(y){var k,g;y.stopPropagation(),y.preventDefault(),(g=(k=p.value)==null?void 0:k.input)==null||g.click()}return ue(()=>{const[y,k]=ne(w),g=z.filterProps(d),M=L.filterProps(d);return e(z,j({class:["v-switch",{"v-switch--flat":d.flat},{"v-switch--inset":d.inset},{"v-switch--indeterminate":b.value},o.value,d.class]},y,g,{modelValue:m.value,"onUpdate:modelValue":U=>m.value=U,id:c.value,focused:S.value,style:d.style}),{...i,default:U=>{let{id:W,messagesId:Y,isDisabled:G,isReadonly:J,isValid:B}=U;const _={model:m,isValid:B};return e(L,j({ref:p},M,{modelValue:m.value,"onUpdate:modelValue":[h=>m.value=h,r],id:W.value,"aria-describedby":Y.value,type:"checkbox","aria-checked":b.value?"mixed":void 0,disabled:G.value,readonly:J.value,onFocus:q,onBlur:N},k),{...i,default:h=>{let{backgroundColorClasses:I,backgroundColorStyles:f}=h;return e("div",{class:["v-switch__track",a?void 0:I.value],style:f.value,onClick:H},[i["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](_)]),i["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](_)])])},input:h=>{let{inputNode:I,icon:f,backgroundColorClasses:K,backgroundColorStyles:Q}=h;return e(x,null,[I,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":f||d.loading},d.inset||a?void 0:K.value],style:d.inset?void 0:Q.value},[i.thumb?e(me,{defaults:{VIcon:{icon:f,size:"x-small"}}},{default:()=>[i.thumb({..._,icon:f})]}):e(ce,null,{default:()=>[d.loading?e(Ve,{name:"v-switch",active:!0,color:B.value===!1?void 0:t.value},{default:A=>i.loader?i.loader(A):e(pe,{active:A.isActive,color:A.color,indeterminate:!0,size:"16",width:"2"},null)}):f&&e(fe,{key:String(f),icon:f,size:"x-small"},null)]})])])}})}})}),{}}}),_e={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},Ie={class:"d-flex flex-column justify-center"},Ae={class:"text-h4 font-weight-medium"},Le={__name:"FormUser",props:{method:{type:String,required:!0},user:{type:Object,required:!1},identity:{type:String,required:!1}},async setup(d){let v,w;const i=d,b=ve(),m=P(),o=P({lastName:"",firstName:"",cin:"",email:"",password:"Badr123@",active:0,phone:"",store:"",role:null,ville:"",address:"",bank_name:"",rib:""});be(()=>i.user,a=>{i.method=="PUT"&&(o.value={...a},o.value.active=o.value.active==1)},{immediate:!0});const S=([v,w]=he(()=>T("/api/rolesList").then(a=>a.data)),v=await v,w(),v),q=async()=>{console.log(o.value);const{valid:a}=await m.value.validate();if(a){let t="/api/users";i.method=="PUT"&&(t="/api/users/"+i.identity),T({method:i.method,url:t,data:o.value}).then(async u=>{var c;u.status===200&&(D.success(u.data),i.method=="POST"?(c=m.value)==null||c.reset():b.push({name:"user-list"}))}).catch(u=>{if(u.response&&u.response.status===422){const c=u.response.data.errors;for(let r in c)D.error(`${r}: ${c[r].join(", ")}`)}})}},N=a=>{if(a===1||a===!0)return"Active";if(a===0||a===!1)return"Inactive"},p=P(!1);return(a,t)=>{const u=te,c=ae;return ye(),we(x,null,[F("div",_e,[F("div",Ie,[F("h4",Ae,ke(i.method=="POST"?"Ajouter Utilisateur":"Modifier Utilisateur"),1)])]),e(le,{ref_key:"refForm",ref:m,class:"mt-3"},{default:s(()=>[e(C,null,{default:s(()=>[e(n,{cols:"12"},{default:s(()=>[e(E,null,{default:s(()=>[e(O,{class:"pt-2"},{default:s(()=>[e(C,null,{default:s(()=>[e(n,{md:"6",cols:"12"},{default:s(()=>[e(u,{modelValue:l(o).lastName,"onUpdate:modelValue":t[0]||(t[0]=r=>l(o).lastName=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"Nom",label:"Nom"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:s(()=>[e(u,{modelValue:l(o).firstName,"onUpdate:modelValue":t[1]||(t[1]=r=>l(o).firstName=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"Prenom",label:"Prenom"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:s(()=>[e(u,{modelValue:l(o).cin,"onUpdate:modelValue":t[2]||(t[2]=r=>l(o).cin=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"N° CIN",label:"N° CIN"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:s(()=>[e(c,{modelValue:l(o).role,"onUpdate:modelValue":t[3]||(t[3]=r=>l(o).role=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],placeholder:"Role",label:"Role",items:l(S),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","rules","items"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).email,"onUpdate:modelValue":t[4]||(t[4]=r=>l(o).email=r),rules:["requiredValidator"in a?a.requiredValidator:l(V),"emailValidator"in a?a.emailValidator:l(X)],label:"E-mail",placeholder:"example@gmail.com",type:"email"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).phone,"onUpdate:modelValue":t[5]||(t[5]=r=>l(o).phone=r),rules:["requiredValidator"in a?a.requiredValidator:l(V),"PhoneValidator"in a?a.PhoneValidator:l(Z)],label:"Telephone",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).store,"onUpdate:modelValue":t[6]||(t[6]=r=>l(o).store=r),rules:["requiredValidator"in a?a.requiredValidator:l(V)],label:"Nom de store",placeholder:"Nom de store"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).address,"onUpdate:modelValue":t[7]||(t[7]=r=>l(o).address=r),label:"Address",placeholder:"Address"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).password,"onUpdate:modelValue":t[8]||(t[8]=r=>l(o).password=r),rules:i.method=="POST"?["requiredValidator"in a?a.requiredValidator:l(V),"passwordValidator"in a?a.passwordValidator:l(ee)]:[],type:l(p)?"text":"password","append-inner-icon":l(p)?"tabler-eye-off":"tabler-eye",label:"Current Password",autocomplete:"on",placeholder:"············","onClick:appendInner":t[9]||(t[9]=r=>p.value=!l(p))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(n,{cols:"12",md:"12"},{default:s(()=>[e(Ue,{modelValue:l(o).active,"onUpdate:modelValue":t[10]||(t[10]=r=>l(o).active=r),color:"success","base-color":"error",label:N(l(o).active)},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(n,{cols:"12"},{default:s(()=>[e(E,{title:"Informations de paiement"},{default:s(()=>[e(O,null,{default:s(()=>[e(C,null,{default:s(()=>[e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).bank_name,"onUpdate:modelValue":t[11]||(t[11]=r=>l(o).bank_name=r),label:"Nom de bank",placeholder:"CIH"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:s(()=>[e(u,{modelValue:l(o).rib,"onUpdate:modelValue":t[12]||(t[12]=r=>l(o).rib=r),label:"RIB",placeholder:"FR3333785451"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:s(()=>[e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[e(ge,{onClick:q},{default:s(()=>t[13]||(t[13]=[Ce(" Enregistrer ")])),_:1})]),_:1})]),_:1})]),_:1},512)],64)}}};export{Le as _};
