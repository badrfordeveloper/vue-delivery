import{r as v,e as K,P as Q,p as ee,V as le}from"./VForm-CMCpW6Fd.js";import{_ as ae}from"./AppSelect-DS9Vy6q1.js";import{_ as te}from"./AppTextField-oLCXZWk_.js";import{$ as I}from"./api-DoENDU7p.js";import{t as T}from"./toast-CUbcpQy7.js";import{V as g,a as u}from"./VRow-DLetuWDj.js";import{V as R}from"./VCard-BRUBZ8oR.js";import{V as $}from"./VCardText-BL_NRqOR.js";import{a1 as oe,a8 as re,am as j,aW as se,r as C,au as de,Y as x,an as ie,af as ne,aF as ue,b as e,q as D,F as z,aw as me,aX as ce,$ as fe,aY as Ve,aZ as pe,w as ve,aq as be,o as we,c as he,d as A,v as ye,e as d,m as l,ai as ke,t as ge}from"./index-DD7JbDxk.js";import{b as Ce,d as _e,c as O}from"./VTextField-D4UJrYDN.js";import{b as Pe,c as E}from"./VSelect-nxaznvC5.js";const Se=oe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ce(),...Pe()},"VSwitch"),Ue=re()({name:"VSwitch",inheritAttrs:!1,props:Se(),emits:{"update:focused":s=>!0,"update:modelValue":s=>!0,"update:indeterminate":s=>!0},setup(s,V){let{attrs:w,slots:i}=V;const c=j(s,"indeterminate"),a=j(s,"modelValue"),{loaderClasses:_}=se(s),{isFocused:P,focus:S,blur:p}=_e(s),t=C(),o=de&&window.matchMedia("(forced-colors: active)").matches,n=x(()=>typeof s.loading=="string"&&s.loading!==""?s.loading:s.color),m=ie(),r=x(()=>s.id||`switch-${m}`);function L(){c.value&&(c.value=!1)}function W(h){var y,k;h.stopPropagation(),h.preventDefault(),(k=(y=t.value)==null?void 0:y.input)==null||k.click()}return ne(()=>{const[h,y]=ue(w),k=O.filterProps(s),Y=E.filterProps(s);return e(O,D({class:["v-switch",{"v-switch--flat":s.flat},{"v-switch--inset":s.inset},{"v-switch--indeterminate":c.value},_.value,s.class]},h,k,{modelValue:a.value,"onUpdate:modelValue":U=>a.value=U,id:r.value,focused:P.value,style:s.style}),{...i,default:U=>{let{id:H,messagesId:M,isDisabled:X,isReadonly:Z,isValid:B}=U;const q={model:a,isValid:B};return e(E,D({ref:t},Y,{modelValue:a.value,"onUpdate:modelValue":[b=>a.value=b,L],id:H.value,"aria-describedby":M.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:X.value,readonly:Z.value,onFocus:S,onBlur:p},y),{...i,default:b=>{let{backgroundColorClasses:N,backgroundColorStyles:f}=b;return e("div",{class:["v-switch__track",o?void 0:N.value],style:f.value,onClick:W},[i["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](q)]),i["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](q)])])},input:b=>{let{inputNode:N,icon:f,backgroundColorClasses:G,backgroundColorStyles:J}=b;return e(z,null,[N,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":f||s.loading},s.inset||o?void 0:G.value],style:s.inset?void 0:J.value},[i.thumb?e(me,{defaults:{VIcon:{icon:f,size:"x-small"}}},{default:()=>[i.thumb({...q,icon:f})]}):e(ce,null,{default:()=>[s.loading?e(Ve,{name:"v-switch",active:!0,color:B.value===!1?void 0:n.value},{default:F=>i.loader?i.loader(F):e(pe,{active:F.isActive,color:F.color,indeterminate:!0,size:"16",width:"2"},null)}):f&&e(fe,{key:String(f),icon:f,size:"x-small"},null)]})])])}})}})}),{}}}),qe={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},Ne={class:"d-flex flex-column justify-center"},Fe={class:"text-h4 font-weight-medium"},ze={__name:"FormUser",props:{method:{type:String,required:!0},user:{type:Object,required:!1},identity:{type:String,required:!1}},async setup(s){let V,w;const i=s,c=C(),a=C({lastName:"",firstName:"",email:"",password:"Badr123@",active:0,phone:"",store_name:"",role:null,ville:"",address:"",bank_name:"",rib:""});ve(()=>i.user,t=>{i.method=="PUT"&&(a.value={...t},a.value.active=a.value.active==1)},{immediate:!0});const _=([V,w]=be(()=>I("/api/rolesList").then(t=>t.data)),V=await V,w(),V),P=async()=>{console.log(a.value);const{valid:t}=await c.value.validate();if(t){let o="/api/users";i.method=="PUT"&&(o="/api/users/"+i.identity),I({method:i.method,url:o,data:a.value}).then(async n=>{var m;n.status===200&&(T.success(n.data),i.method=="POST"&&((m=c.value)==null||m.reset()))}).catch(n=>{if(n.response&&n.response.status===422){const m=n.response.data.errors;for(let r in m)T.error(`${r}: ${m[r].join(", ")}`)}})}},S=t=>{if(t===1||t===!0)return"Active";if(t===0||t===!1)return"Inactive"},p=C(!1);return(t,o)=>{const n=te,m=ae;return we(),he(z,null,[A("div",qe,[A("div",Ne,[A("h4",Fe,ye(i.method=="POST"?"Ajouter Utilisateur":"Modifier Utilisateur"),1)])]),e(le,{ref_key:"refForm",ref:c,class:"mt-3"},{default:d(()=>[e(g,null,{default:d(()=>[e(u,{cols:"12"},{default:d(()=>[e(R,null,{default:d(()=>[e($,{class:"pt-2"},{default:d(()=>[e(g,null,{default:d(()=>[e(u,{md:"6",cols:"12"},{default:d(()=>[e(n,{modelValue:l(a).lastName,"onUpdate:modelValue":o[0]||(o[0]=r=>l(a).lastName=r),rules:["requiredValidator"in t?t.requiredValidator:l(v)],placeholder:"Nom",label:"Nom"},null,8,["modelValue","rules"])]),_:1}),e(u,{md:"6",cols:"12"},{default:d(()=>[e(n,{modelValue:l(a).firstName,"onUpdate:modelValue":o[1]||(o[1]=r=>l(a).firstName=r),rules:["requiredValidator"in t?t.requiredValidator:l(v)],placeholder:"Prenom",label:"Prenom"},null,8,["modelValue","rules"])]),_:1}),e(u,{md:"6",cols:"12"},{default:d(()=>[e(m,{modelValue:l(a).role,"onUpdate:modelValue":o[2]||(o[2]=r=>l(a).role=r),rules:["requiredValidator"in t?t.requiredValidator:l(v)],placeholder:"Role",label:"Role",items:l(_),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","rules","items"])]),_:1}),e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).email,"onUpdate:modelValue":o[3]||(o[3]=r=>l(a).email=r),rules:["requiredValidator"in t?t.requiredValidator:l(v),"emailValidator"in t?t.emailValidator:l(K)],label:"E-mail",placeholder:"example@gmail.com",type:"email"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).phone,"onUpdate:modelValue":o[4]||(o[4]=r=>l(a).phone=r),rules:["requiredValidator"in t?t.requiredValidator:l(v),"PhoneValidator"in t?t.PhoneValidator:l(Q)],label:"Telephone",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).store_name,"onUpdate:modelValue":o[5]||(o[5]=r=>l(a).store_name=r),label:"Nom de store",placeholder:"Nom de store"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).address,"onUpdate:modelValue":o[6]||(o[6]=r=>l(a).address=r),label:"Address",placeholder:"Address"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).password,"onUpdate:modelValue":o[7]||(o[7]=r=>l(a).password=r),rules:i.method=="POST"?["requiredValidator"in t?t.requiredValidator:l(v),"passwordValidator"in t?t.passwordValidator:l(ee)]:[],type:l(p)?"text":"password","append-inner-icon":l(p)?"tabler-eye-off":"tabler-eye",label:"Current Password",autocomplete:"on",placeholder:"············","onClick:appendInner":o[8]||(o[8]=r=>p.value=!l(p))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(u,{cols:"12",md:"12"},{default:d(()=>[e(Ue,{modelValue:l(a).active,"onUpdate:modelValue":o[9]||(o[9]=r=>l(a).active=r),color:"success","base-color":"error",label:S(l(a).active)},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:d(()=>[e(R,{title:"Informations de paiement"},{default:d(()=>[e($,null,{default:d(()=>[e(g,null,{default:d(()=>[e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).bank_name,"onUpdate:modelValue":o[10]||(o[10]=r=>l(a).bank_name=r),label:"Nom de bank",placeholder:"CIH"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:d(()=>[e(n,{modelValue:l(a).rib,"onUpdate:modelValue":o[11]||(o[11]=r=>l(a).rib=r),label:"RIB",placeholder:"FR3333785451"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{default:d(()=>[e(u,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:d(()=>[e(ke,{onClick:P},{default:d(()=>o[12]||(o[12]=[ge(" Enregistrer ")])),_:1})]),_:1})]),_:1})]),_:1},512)],64)}}};export{ze as _};
