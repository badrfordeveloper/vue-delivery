import{_ as q}from"./AddEditRoleDialog-B_uTQskz.js";import{V as j,_ as z,c as O}from"./VDataTableServer-BI-ePvWH.js";import{_ as Y}from"./AppSelect-Cx4sYSc0.js";import{_ as G}from"./AppTextField-CjMF6sBU.js";import{r as s,aq as H,Y as C,a as J,c as K,o as v,d as V,b as l,e as i,ak as r,n as t,f as U,m as w,A as F,ai as L,v as M,$ as Q,F as W}from"./index-Cn4GOq09.js";import{u as X}from"./index-DbX47XIY.js";import{V as Z}from"./VCardText-oDAfMypB.js";import{V as h,a as ee}from"./VRow-_eMtTXOa.js";import{V as A}from"./VDivider-CSx1XzIQ.js";import{V as oe}from"./VSpacer-BVxtiIgt.js";import{V as te}from"./VCard-C8xyqS8Y.js";import"./VForm-B-RrgLOX.js";import"./toast-Cs2lwIGd.js";import"./VInput-DnGVuAhw.js";import"./VImg-BcxKOzCh.js";import"./forwardRefs-DWGaNmQL.js";import"./DialogCloseBtn-jFeUjWIh.js";import"./VDataTable-BcoK-fRS.js";import"./VSelect-DOHcxXJU.js";import"./VTextField-Cf1CINQn.js";import"./VList-COcPg8cx.js";import"./VAvatar-CUGtIZAw.js";import"./VOverlay-BZZDccpP.js";import"./VMenu-ClR026Z9.js";import"./VSelectionControl-CxcP7L5m.js";import"./VChip-DvpeVEqC.js";import"./filter-FvdvvAwW.js";import"./VDialog-C1fNNfVN.js";/* empty css              */const le={class:"d-flex flex-wrap gap-4 ma-6"},se={class:"d-flex gap-4 flex-wrap align-center"},qe={__name:"list",async setup(ae){let p,_;const D=[{title:"Role",key:"name",sortable:!1},{title:"actions",key:"actions",sortable:!1}],d=s(),u=s(!1),c=s(!1);s(!1);const f=s({name:"",permissions:[]}),P=m=>{f.value={...m},c.value=!0},a=s(5),n=s(1),b=s(),R=s(),$=m=>{var e,g;b.value=(e=m.sortBy[0])==null?void 0:e.key,R.value=(g=m.sortBy[0])==null?void 0:g.order},{data:y,error:ie,statusCode:re,isFetching:N,execute:k}=([p,_]=H(()=>X(O("/api/roles",{query:{name:d,page:n,itemsPerPage:a,sortBy:b,orderBy:R}}))),p=await p,_(),p),T=C(()=>y.value.items),x=C(()=>y.value.total);return(m,e)=>{const g=G,E=Y,I=J("IconBtn"),S=z,B=q;return v(),K(W,null,[V("div",null,[l(te,{title:"Filtres",class:"mb-6"},{default:i(()=>[l(Z,null,{default:i(()=>[l(h,null,{default:i(()=>[l(ee,{cols:"12",sm:"4"},{default:i(()=>[l(g,{modelValue:t(d),"onUpdate:modelValue":e[0]||(e[0]=o=>r(d)?d.value=o:null),placeholder:"Recherche role",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A),V("div",le,[l(oe),V("div",se,[l(E,{modelValue:t(a),"onUpdate:modelValue":e[1]||(e[1]=o=>r(a)?a.value=o:null),items:[5,10,20,25,50]},null,8,["modelValue"]),t(F)("create","role")?(v(),U(L,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[2]||(e[2]=o=>u.value=!0)},{default:i(()=>e[10]||(e[10]=[M(" Ajouter Role ")])),_:1})):w("",!0)])]),l(A,{class:"mt-4"}),l(j,{"items-per-page":t(a),"onUpdate:itemsPerPage":e[4]||(e[4]=o=>r(a)?a.value=o:null),"model-value":m.selectedRows,"onUpdate:modelValue":e[5]||(e[5]=o=>m.selectedRows=o),page:t(n),"onUpdate:page":e[6]||(e[6]=o=>r(n)?n.value=o:null),loading:t(N),headers:D,items:t(T),"items-length":t(x),class:"text-no-wrap","onUpdate:options":$},{"item.actions":i(({item:o})=>[t(F)("update","role")?(v(),U(I,{key:0,onClick:ne=>P(o)},{default:i(()=>[l(Q,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):w("",!0)]),bottom:i(()=>[l(S,{page:t(n),"onUpdate:page":e[3]||(e[3]=o=>r(n)?n.value=o:null),"items-per-page":t(a),"total-items":t(x)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","loading","items","items-length"])]),_:1})]),l(B,{"is-dialog-visible":t(u),"onUpdate:isDialogVisible":e[7]||(e[7]=o=>r(u)?u.value=o:null),onFetchRoles:t(k)},null,8,["is-dialog-visible","onFetchRoles"]),l(B,{"is-dialog-visible":t(c),"onUpdate:isDialogVisible":e[8]||(e[8]=o=>r(c)?c.value=o:null),"role-permissions":t(f),"onUpdate:rolePermissions":e[9]||(e[9]=o=>r(f)?f.value=o:null),onFetchRoles:t(k)},null,8,["is-dialog-visible","role-permissions","onFetchRoles"])],64)}}};export{qe as default};
