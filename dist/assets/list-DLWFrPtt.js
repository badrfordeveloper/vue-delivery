import{s as W}from"./statutInfos-CQo4TYHA.js";import{r as te,V as Oe,$ as Q}from"./VForm-BLjIjdGP.js";import{r as d,w as re,Y as G,c as $,o as m,b as t,F as le,h as ne,f as V,e as l,v as T,x as O,n as e,ak as k,d as o,m as R,ai as q,A as z,aq as oe,as as Se,J as Re,$ as ue,s as pe,K as Ce,j as ze,a as He}from"./index-BzYb6ZoD.js";import{_ as Ke,V as Ye,a as Je,b as Qe,c as he,d as Xe,s as Ze}from"./VTabs-CQUVYkPt.js";import{_ as ve}from"./AppTextField-CYZ3Rx27.js";import{_ as Ue}from"./AppSelect-BVIOMXQR.js";import{_ as De}from"./AppTextarea-DRNDIqPK.js";import{_ as $e,h as et,a as se,b as me,e as xe,c as tt}from"./constants-CSajaIPA.js";import{t as M}from"./toast-D70_l16b.js";import{V as Te}from"./VAlert-DtVA7brF.js";import{V as P,a as g}from"./VRow-DsbanFfo.js";import{V as ee,a as Ie}from"./VList-CRQHkd0E.js";import{_ as Pe}from"./DialogCloseBtn-DVHO0sRD.js";import{V as ce}from"./VCard-BFmSMYzL.js";import{V as ie}from"./VCardText-BXEBMitH.js";import{V as Ae,a as lt}from"./VDataTable-DbMptXrw.js";import{V as Ne}from"./VChip-BWDkMsrJ.js";import{V as fe}from"./VDivider-BMPN5T29.js";import{V as qe}from"./VDialog-G5cni5JA.js";import{V as at,_ as st,c as ot}from"./VDataTableServer-CKMds1xJ.js";import{_ as rt}from"./AppAutocomplete-C0T09cdS.js";import{u as nt}from"./index-CEU2nq8s.js";import{V as ut}from"./VSpacer-CEO0eUAf.js";import{V as it}from"./VMenu-BY9QwYHY.js";import"./VInput-DYDNzfTI.js";import"./VImg-D7Y9dL6k.js";import"./forwardRefs-DWGaNmQL.js";import"./VOverlay-XR8PqSnK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTextField-CdQl9fbf.js";import"./VSelect-CesdDUFt.js";import"./VAvatar-BeI6oEr0.js";/* empty css              */import"./filter-CU_3bWay.js";const dt={__name:"Preparer",props:{item:{type:Object,required:!0},isShowEntrepot:{type:Boolean,required:!0}},emits:["hideEntrepot","getItemData"],setup(X,{emit:E}){const C=X,N=E,F=d({}),S=d("");re(()=>C.item,f=>{F.value=f},{immediate:!0});const b=d(),w=d(!1),s=d([]),U=d([]),I=d([]),y=d(!1),h=d(!1),j=async()=>{const{valid:f}=await b.value.validate();f&&await H()},L=()=>{N("hideEntrepot")},H=f=>{w.value=!0,y.value=!1,y.value=!1,Q({method:"POST",url:"/api/scannerPreparer",data:{retour_id:F.value.id,scannedColis:A.value,commonColis:a.value,duplicatedColis:n.value,externeColis:p.value,missingColis:_.value}}).then(async i=>{if(i.status===200){let c=i.data;console.log(c),s.value=c.success,U.value=c.errors,I.value=c.colisError,y.value=!0,h.value=U.value.length==0,U.value.length==0&&N("getItemData")}w.value=!1}).catch(i=>{w.value=!1,i.response&&i.response.status===422?M.error(i.response.data.message):M.error("something wrong")})},x=G(()=>F.value.colis.map(f=>f.code)),A=G(()=>S.value?S.value.split(`
`).map(f=>f.trim()).filter(f=>f.length>0):[]),n=G(()=>A.value.filter((f,i,c)=>c.indexOf(f)!==i)),p=G(()=>{const f=new Set(x.value);let i=A.value.filter(c=>!f.has(c));return i=new Set(i),[...i]}),_=G(()=>{const f=new Set(A.value);return x.value.filter(i=>!f.has(i))}),a=G(()=>{const f=new Set(x.value),i=new Set(A.value);return[...f].filter(c=>i.has(c))});return(f,i)=>{const c=De;return m(),$(le,null,[(m(!0),$(le,null,ne(e(s),(B,K)=>(m(),V(Te,{key:K,modelValue:e(h),"onUpdate:modelValue":i[0]||(i[0]=Y=>k(h)?h.value=Y:null),color:"success",class:"ma-1"},{default:l(()=>[T(O(B),1)]),_:2},1032,["modelValue"]))),128)),(m(!0),$(le,null,ne(e(U),(B,K)=>(m(),V(Te,{key:K,modelValue:e(y),"onUpdate:modelValue":i[1]||(i[1]=Y=>k(y)?y.value=Y:null),color:"error",class:"ma-1"},{default:l(()=>[T(O(B),1)]),_:2},1032,["modelValue"]))),128)),t(Oe,{ref_key:"refForm",ref:b,class:"mt-3"},{default:l(()=>[o("div",null,[t(P,{class:"d-flex align-center justify-center"},{default:l(()=>[t(g,{cols:"12"},{default:l(()=>[t(c,{modelValue:e(S),"onUpdate:modelValue":i[2]||(i[2]=B=>k(S)?S.value=B:null),rows:"5","row-height":"20",label:"Scanner",rules:["requiredValidator"in f?f.requiredValidator:e(te)],placeholder:"Select pour scanner"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),t(P,null,{default:l(()=>[e(I).length>0?(m(),V(g,{key:0,cols:"12",md:"3"},{default:l(()=>[i[3]||(i[3]=o("p",{class:"text-error"}," Colis erroné ",-1)),t(ee,{items:e(I),class:"border border-error border-opacity-75"},null,8,["items"])]),_:1})):R("",!0),e(n).length>0?(m(),V(g,{key:1,cols:"12",md:"3"},{default:l(()=>[i[4]||(i[4]=o("p",{class:"text-error"}," Colis dupliqués ",-1)),t(ee,{items:e(n),class:"border border-error border-opacity-75"},null,8,["items"])]),_:1})):R("",!0),t(g,{cols:"12",md:"3"},{default:l(()=>[i[5]||(i[5]=T(" Colis manquant ")),t(ee,{items:e(_)},null,8,["items"])]),_:1}),e(p).length>0?(m(),V(g,{key:2,cols:"12",md:"3"},{default:l(()=>[i[6]||(i[6]=o("p",{class:"text-error"}," Colis externe ",-1)),t(ee,{items:e(p),class:"border border-error border-opacity-75"},null,8,["items"])]),_:1})):R("",!0)]),_:1}),t(P,null,{default:l(()=>[t(g,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[t(q,{color:"secondary",onClick:L},{default:l(()=>i[7]||(i[7]=[T(" retour ")])),_:1}),t(q,{loading:e(w),onClick:j},{default:l(()=>i[8]||(i[8]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)],64)}}},mt={key:0},pt={key:1},ct={class:"text-center"},ft={key:0},vt={key:1},_t={__name:"actionsRetour",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},emits:["getItemData"],setup(X,{emit:E}){const C=X,N=E,F=d({}),S=d(""),b=d(!1),w=d(),s=d({id:null,statut:"",nombre_colis_ramasseur:"",commentaire:"",date:"",file:""}),U=()=>{b.value=!1,y.value=!1};re(()=>C.currentStatut,n=>{S.value=n},{immediate:!0}),re(()=>C.item,n=>{F.value=n},{immediate:!0});const I=d(""),y=d(!1),h=n=>{b.value=!0,s.value.statut=n,n=="PREPARER"&&(y.value=!0)},j=async()=>{const{valid:n}=await w.value.validate();n&&await L(s.value.statut)},L=async n=>{s.value.statut=n,s.value.id=C.id,I.value=n,Q({method:"POST",url:"/api/updateStatutRetour",data:s.value}).then(async p=>{p.status===200&&(M.success(p.data),n!="COMMENTAIRE"&&(S.value=n),b.value=!1,N("getItemData")),I.value=""}).catch(p=>{I.value="",p.response&&p.response.status===422?M.error(p.response.data.message):M.error("something wrong")})},H=z("livreur","action"),x=z("gestionnaire","action"),A=G(()=>{let n=[];return n.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),x&&n.push({...W("ANNULE"),statut:"ANNULE"}),S.value=="EN_ATTENTE"?x&&n.push({...W("PREPARER"),statut:"PREPARER"}):(S.value=="PREPARER"||S.value=="REPORTE")&&(H||x)?n.push({statut:"EN_COURS_RETOUR",...W("EN_COURS_RETOUR")}):S.value=="EN_COURS_RETOUR"&&H&&(n.push({statut:"REPORTE",...W("REPORTE")}),n.push({...W("RETOURNER"),statut:"RETOURNER"})),n});return(n,p)=>{const _=dt,a=ve,f=$e,i=De;return e(b)?(m(),$("div",pt,[e(s).statut=="PREPARER"&&e(y)?(m(),V(_,{key:0,"is-show-entrepot":e(y),"onUpdate:isShowEntrepot":p[0]||(p[0]=c=>k(y)?y.value=c:null),"hide-entrepot":"",item:e(F),onHideEntrepot:U,onGetItemData:p[1]||(p[1]=c=>N("getItemData"))},null,8,["is-show-entrepot","item"])):(m(),V(Oe,{key:1,ref_key:"refForm",ref:w,class:"mt-3"},{default:l(()=>[o("p",ct," Statut à envoyer : "+O(("statutInfos"in n?n.statutInfos:e(W))(e(s).statut).text),1),e(s).statut=="RETOURNER"?(m(),$("div",ft,[t(P,{class:"d-flex align-center justify-center"},{default:l(()=>[t(g,{md:"6",cols:"12"},{default:l(()=>[t(a,{modelValue:e(s).nombre_colis_ramasseur,"onUpdate:modelValue":p[2]||(p[2]=c=>e(s).nombre_colis_ramasseur=c),rules:["requiredValidator"in n?n.requiredValidator:e(te)],placeholder:"Nombre de colis",label:"Nombre de colis",type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):R("",!0),e(s).statut=="REPORTE"?(m(),$("div",vt,[t(P,{class:"d-flex align-center justify-center"},{default:l(()=>[t(g,{md:"6",cols:"12"},{default:l(()=>[t(f,{modelValue:e(s).date,"onUpdate:modelValue":p[3]||(p[3]=c=>e(s).date=c),rules:["requiredValidator"in n?n.requiredValidator:e(te)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):R("",!0),o("div",null,[t(P,{class:"d-flex align-center justify-center"},{default:l(()=>[t(g,{md:"6",cols:"12"},{default:l(()=>[t(i,{modelValue:e(s).commentaire,"onUpdate:modelValue":p[4]||(p[4]=c=>e(s).commentaire=c),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE","REPORTE","ANNULE"].includes(e(s).statut)?["requiredValidator"in n?n.requiredValidator:e(te)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),t(P,null,{default:l(()=>[t(g,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[t(q,{color:"secondary",onClick:p[5]||(p[5]=c=>b.value=!1)},{default:l(()=>p[6]||(p[6]=[T(" retour ")])),_:1}),t(q,{loading:e(I)==e(s).statut,onClick:j},{default:l(()=>p[7]||(p[7]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512))])):(m(),V(P,{key:0,class:"text-center v-row m-0"},{default:l(()=>[(m(!0),$(le,null,ne(e(A),(c,B)=>(m(),V(g,{key:B,cols:"6"},{default:l(()=>[t(q,{color:c.color,loading:e(I)==c.statut,style:{width:"inherit"},onClick:K=>h(c.statut)},{default:l(()=>[T(O(c.text),1)]),_:2},1032,["color","loading","onClick"])]),_:2},1024))),128)),e(A).length==0?(m(),$("div",mt," Aucune action requise ")):R("",!0)]),_:1}))}}},gt={key:0,class:"text-end position-absolute right-0"},bt={class:"text-body-1 mb-2"},yt={class:"text-body-1 mb-2"},Vt={class:"text-body-1 mb-2"},wt={key:0},kt={class:"text-body-1 mb-2"},Et={class:"text-body-1 mb-2"},St={class:"text-body-1 mb-2"},Rt={class:"text-body-1 mb-2"},Ct={class:"text-body-1 mb-2"},ht={class:"text-body-1 mb-2"},xt={__name:"ShowRetour",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(X,{emit:E}){let C,N;const F=X,S=E;let b={id:"",nom_vendeur:"",tel_vendeur:"",frais_ramasseur:"",tel_ramasseur:"",tarif_id:"",adresse:"",ramasseur:"",ramasseur_id:"",statut:"",vendeur:"",nombre_colis:"",colis:[],histories:[]};const w=([C,N]=oe(()=>Q("/api/ramasseurs").then(_=>_.data)),C=await C,N(),C),s=d(structuredClone(Se(b))),U=d(!1),I=async _=>{U.value=!0,await Q("/api/retour/"+_).then(async a=>{a.status===200&&(s.value=a.data),U.value=!1}).catch(a=>{U.value=!1,a.response&&a.response.status===422?M.error(a.response.data.message):M.error("something wrong")})};re(()=>F.id,_=>{I(_)},{immediate:!0});const y=()=>{S("update:isShowItem",!1),S("fetchItems"),s.value=structuredClone(Se(b))},h=d(!1),j=z("gestionnaire","action"),L=z("livreur","action"),H=_=>{h.value=!0,Q({method:"POST",url:"/api/parametrerRetour",data:{id:s.value.id,ramasseur_id:s.value.ramasseur_id,frais_ramasseur:s.value.frais_ramasseur}}).then(async a=>{h.value=!1,a.status===200&&M.success(a.data),I(s.value.id),n.value=!1}).catch(a=>{h.value=!1,a.response&&a.response.status===422?M.error(a.response.data.message):M.error("something wrong")})},x=d("Actions"),A=["tabler-adjustments-share","tabler-logs"],n=d(!1),p=[{title:"code",key:"code"},{title:"destination",key:"destination"}];return(_,a)=>{const f=Pe,i=_t,c=Xe,B=Ue,K=ve,Y=Ke;return m(),V(qe,{width:_.$vuetify.display.smAndDown?"auto":900,"model-value":F.isShowItem,scrollable:"","onUpdate:modelValue":y},{default:l(()=>[t(f,{onClick:y}),t(Y,{title:"Details Retour",loading:e(U),style:{overflow:"scroll","max-height":"90vh"},"no-actions":""},{default:l(()=>[t(ce,null,{default:l(()=>[Re(t(ie,null,{default:l(()=>[e(j)?(m(),$("div",gt,[t(q,{icon:"",class:"rounded-0",onClick:a[0]||(a[0]=D=>n.value=!0)},{default:l(()=>[t(ue,{size:"22",icon:"tabler-settings"})]),_:1})])):R("",!0),t(P,null,{default:l(()=>[t(g,{cols:"12",lg:"6"},{default:l(()=>[t(Ae,{class:"billing-address-table"},{default:l(()=>[o("tr",null,[a[7]||(a[7]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),o("td",null,[o("p",bt,O(e(s).code),1)])]),o("tr",null,[a[8]||(a[8]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramasseur : ")],-1)),o("td",null,[o("p",yt,O(e(s).ramasseur),1)])]),o("tr",null,[a[9]||(a[9]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Ramasseur: ")],-1)),o("td",null,[o("p",Vt,O(e(s).tel_ramasseur),1)])]),e(L)?(m(),$("tr",wt,[a[10]||(a[10]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Frais de retour: ")],-1)),o("td",null,[o("p",kt,O(e(s).frais_ramasseur),1)])])):R("",!0),o("tr",null,[a[11]||(a[11]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Destination : ")],-1)),o("td",null,[o("p",Et,O(e(s).destination),1)])]),o("tr",null,[a[12]||(a[12]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),o("td",null,[o("p",St,[t(Ne,pe(("statutInfos"in _?_.statutInfos:e(W))(e(s).statut),{density:"default",label:"",size:"small"}),null,16)])])])]),_:1})]),_:1}),t(g,{cols:"12",lg:"6"},{default:l(()=>[t(Ae,{class:"billing-address-table"},{default:l(()=>[o("tr",null,[a[13]||(a[13]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Vendeur: ")],-1)),o("td",null,[o("p",Rt,O(e(s).vendeur),1)])]),o("tr",null,[a[14]||(a[14]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Vendeur: ")],-1)),o("td",null,[o("p",Ct,O(e(s).tel_vendeur),1)])]),o("tr",null,[a[15]||(a[15]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Colis: ")],-1)),o("td",null,[o("p",ht,O(e(s).nombre_colis),1)])])]),_:1})]),_:1})]),_:1}),t(Ye,{modelValue:e(x),"onUpdate:modelValue":a[1]||(a[1]=D=>k(x)?x.value=D:null),grow:"",class:"disable-tab-transition",stacked:""},{default:l(()=>[(m(),$(le,null,ne(A,(D,_e)=>t(Je,{key:_e},{default:l(()=>[t(ue,{size:"40",icon:D},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),t(Qe,{modelValue:e(x),"onUpdate:modelValue":a[3]||(a[3]=D=>k(x)?x.value=D:null),class:"mt-3"},{default:l(()=>[t(he,null,{default:l(()=>[t(i,{id:e(s).id,"current-statut":e(s).statut,item:e(s),onGetItemData:a[2]||(a[2]=D=>I(e(s).id))},null,8,["id","current-statut","item"])]),_:1}),t(he,null,{default:l(()=>[t(c,{histories:e(s).histories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"]),t(fe,{color:"white",thickness:"1",opacity:"0.2",class:"my-6"}),t(lt,{headers:p,items:e(s).colis,"items-per-page":5},null,8,["items"])]),_:1},512),[[Ce,!e(n)]]),e(j)?Re((m(),V(ie,{key:0},{default:l(()=>[t(P,null,{default:l(()=>[t(g,{md:"6",cols:"12"},{default:l(()=>[t(B,{modelValue:e(s).ramasseur_id,"onUpdate:modelValue":a[4]||(a[4]=D=>e(s).ramasseur_id=D),placeholder:"Ramasseurs",label:"Ramasseurs",items:e(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(g,{cols:"12",md:"6"},{default:l(()=>[t(K,{modelValue:e(s).frais_ramasseur,"onUpdate:modelValue":a[5]||(a[5]=D=>e(s).frais_ramasseur=D),rules:["requiredValidator"in _?_.requiredValidator:e(te)],label:"Frais de retour",type:"number",placeholder:"Frais de retour"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(P,null,{default:l(()=>[t(g,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[t(q,{color:"secondary",onClick:a[6]||(a[6]=D=>n.value=!1)},{default:l(()=>a[16]||(a[16]=[T(" retour ")])),_:1}),t(q,{loading:e(h),onClick:H},{default:l(()=>a[17]||(a[17]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[Ce,e(n)]]):R("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},Tt={class:"d-flex flex-wrap gap-4 ma-6"},It={class:"d-flex gap-4 flex-wrap align-center"},At={key:1},pl={__name:"list",async setup(X){let E,C;const N=d(!1),F=d([{title:"Aujourd'hui",value:"today"},{title:"Hier",value:"yesterday"},{title:"La semaine dernière",value:"lastWeek"},{title:"Ce mois",value:"thisMonth"},{title:"Le mois précédent",value:"lastMonth"},{title:"Personnalisé",value:"custom"}]),S=z("gestionnaire","action"),b=d(),w=d(),s=d("today"),U=()=>{const v=new Date;switch(N.value=s.value==="custom",s.value){case"today":b.value=v.toISOString().split("T")[0],w.value=v.toISOString().split("T")[0];break;case"yesterday":const r=se(v,-1);b.value=r.toISOString().split("T")[0],w.value=r.toISOString().split("T")[0];break;case"lastWeek":b.value=Ze(se(v,-7)).toISOString().split("T")[0],w.value=tt(se(v,-7)).toISOString().split("T")[0];break;case"thisMonth":b.value=me(v).toISOString().split("T")[0],w.value=xe(v).toISOString().split("T")[0];break;case"lastMonth":const J=se(me(v),-1);b.value=me(J).toISOString().split("T")[0],w.value=xe(J).toISOString().split("T")[0];break}};U();const I=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Nombre de colis",key:"nombre_colis",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],y=d(),h=d(),j=d(),L=d(),H=([E,C]=oe(()=>Q("/api/ramasseurs").then(v=>v.data)),E=await E,C(),E),x=([E,C]=oe(()=>Q("/api/vendeurs").then(v=>v.data)),E=await E,C(),E),A=d(!1),n=d(!1),p=d(),_=d(5),a=d(1),f=d(),i=d(),c=v=>{n.value=!0,p.value=v},B=async()=>{let v="/api/retour/"+p.value.id;A.value=!0,Q({method:"DELETE",url:v}).then(async r=>{r.status===200&&(n.value=!1,M.success(r.data),ge()),A.value=!1}).catch(r=>{A.value=!1})},K=v=>{var r,J;f.value=(r=v.sortBy[0])==null?void 0:r.key,i.value=(J=v.sortBy[0])==null?void 0:J.order},{data:Y,error:D,statusCode:_e,isFetching:Fe,execute:ge}=([E,C]=oe(()=>nt(ot("/api/retour",{query:{livreur_id:j,vendeur_id:L,begin_date:b,end_date:w,code:y,statut:h,page:a,itemsPerPage:_,sortBy:f,orderBy:i}}))),E=await E,C(),E),be=ze(),je=G(()=>Y.value.items),ye=G(()=>Y.value.total),Z=d(!1),Ve=d(0),we=d(0),Be=v=>{we.value=v.id,Ve.value++,Z.value=!0};return(v,r)=>{const J=rt,de=Ue,Me=ve,ke=$e,Ee=He("IconBtn"),Le=st,We=Pe,Ge=xt;return m(),$("div",null,[t(ce,{title:"Filtres",class:"mb-6 d-print-none"},{default:l(()=>[t(ie,null,{default:l(()=>[t(P,null,{default:l(()=>[e(S)?(m(),V(g,{key:0,cols:"12",sm:"3"},{default:l(()=>[t(J,{modelValue:e(L),"onUpdate:modelValue":r[0]||(r[0]=u=>k(L)?L.value=u:null),placeholder:"Vendeurs",items:e(x),clearable:"","clear-icon":"tabler-x",autocomplete:"no-autocompeletse"},null,8,["modelValue","items"])]),_:1})):R("",!0),e(S)?(m(),V(g,{key:1,cols:"12",sm:"3"},{default:l(()=>[t(J,{modelValue:e(j),"onUpdate:modelValue":r[1]||(r[1]=u=>k(j)?j.value=u:null),placeholder:"Livreurs",items:e(H),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):R("",!0),t(g,{cols:"12",sm:"3"},{default:l(()=>[t(de,{modelValue:e(h),"onUpdate:modelValue":r[2]||(r[2]=u=>k(h)?h.value=u:null),placeholder:"Statut",items:e(et),clearable:"","clear-icon":"tabler-x"},{item:l(({item:u,props:ae})=>[t(Ie,pe(ae,{title:("statutInfos"in v?v.statutInfos:e(W))(u.value).text}),null,16,["title"])]),selection:l(({item:u})=>[T(O(("statutInfos"in v?v.statutInfos:e(W))(u.value).text),1)]),_:1},8,["modelValue","items"])]),_:1}),t(g,{cols:"12",sm:"2"},{default:l(()=>[t(Me,{modelValue:e(y),"onUpdate:modelValue":r[3]||(r[3]=u=>k(y)?y.value=u:null),placeholder:"Code"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:l(()=>[t(g,{cols:"12",sm:"3"},{default:l(()=>[t(de,{modelValue:e(s),"onUpdate:modelValue":[r[4]||(r[4]=u=>k(s)?s.value=u:null),U],placeholder:"Plage de dates",items:e(F),label:e(b)+" - "+e(w)},null,8,["modelValue","items","label"])]),_:1}),e(N)?(m(),V(g,{key:0,cols:"12",sm:"3"},{default:l(()=>[t(ke,{modelValue:e(b),"onUpdate:modelValue":r[5]||(r[5]=u=>k(b)?b.value=u:null),label:"Début",placeholder:"date"},null,8,["modelValue"])]),_:1})):R("",!0),e(N)?(m(),V(g,{key:1,cols:"12",sm:"3"},{default:l(()=>[t(ke,{modelValue:e(w),"onUpdate:modelValue":r[6]||(r[6]=u=>k(w)?w.value=u:null),label:"Fin",placeholder:"date"},null,8,["modelValue"])]),_:1})):R("",!0)]),_:1})]),_:1}),t(fe),o("div",Tt,[t(ut),o("div",It,[t(de,{modelValue:e(_),"onUpdate:modelValue":r[7]||(r[7]=u=>k(_)?_.value=u:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e(z)("create","retour")?(m(),V(q,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:r[8]||(r[8]=u=>e(be).push({name:"retour-add"}))},{default:l(()=>r[16]||(r[16]=[T(" Ajouter Retour ")])),_:1})):R("",!0)])]),t(fe,{class:"mt-4"}),t(at,{"items-per-page":e(_),"onUpdate:itemsPerPage":r[10]||(r[10]=u=>k(_)?_.value=u:null),page:e(a),"onUpdate:page":r[11]||(r[11]=u=>k(a)?a.value=u:null),loading:e(Fe),headers:I,items:e(je),"items-length":e(ye),class:"text-no-wrap",locale:"fr","onUpdate:options":K},{"item.code":l(({item:u})=>[e(z)("show","retour")?(m(),V(q,{key:0,variant:"text",onClick:ae=>Be(u)},{default:l(()=>[T(O(u.code),1)]),_:2},1032,["onClick"])):(m(),$("span",At,O(u.code),1))]),"item.statut":l(({item:u})=>[t(Ne,pe(("statutInfos"in v?v.statutInfos:e(W))(u.statut),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":l(({item:u})=>[u.statut=="EN_ATTENTE"&&e(z)("update","retour")?(m(),V(Ee,{key:0,onClick:ae=>e(be).push("/retour/"+u.id)},{default:l(()=>[t(ue,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):R("",!0),u.statut=="EN_ATTENTE"?(m(),V(Ee,{key:1},{default:l(()=>[t(ue,{icon:"tabler-dots-vertical"}),t(it,{activator:"parent"},{default:l(()=>[t(ee,null,{default:l(()=>[e(z)("delete","retour")?(m(),V(Ie,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:ae=>c(u)},{default:l(()=>r[17]||(r[17]=[T(" Delete ")])),_:2},1032,["onClick"])):R("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):R("",!0)]),bottom:l(()=>[t(Le,{page:e(a),"onUpdate:page":r[9]||(r[9]=u=>k(a)?a.value=u:null),"items-per-page":e(_),"total-items":e(ye)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),t(qe,{modelValue:e(n),"onUpdate:modelValue":r[14]||(r[14]=u=>k(n)?n.value=u:null),persistent:"",class:"v-dialog-sm"},{default:l(()=>[t(We,{onClick:r[12]||(r[12]=u=>n.value=!e(n))}),t(ce,{title:"Êtes-vous sûr de vouloir supprimer le retour "+e(p).code+" ?"},{default:l(()=>[t(ie,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[t(q,{color:"secondary",variant:"tonal",onClick:r[13]||(r[13]=u=>n.value=!1)},{default:l(()=>r[18]||(r[18]=[T(" Non ")])),_:1}),t(q,{loading:e(A),onClick:B},{default:l(()=>r[19]||(r[19]=[T(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),e(Z)?(m(),V(Ge,{id:e(we),key:e(Ve),"is-show-item":e(Z),"onUpdate:isShowItem":r[15]||(r[15]=u=>k(Z)?Z.value=u:null),onFetchItems:e(ge)},null,8,["id","is-show-item","onFetchItems"])):R("",!0)])}}};export{pl as default};
