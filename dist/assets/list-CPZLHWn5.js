import{_ as Oe}from"./DialogCloseBtn-DVHO0sRD.js";import{V as He,_ as Ge,c as Ke}from"./VDataTableServer-CKMds1xJ.js";import{_ as Ne,s as Qe,a as le,b as de,e as he,c as Ye}from"./constants-CSajaIPA.js";import{_ as Ae}from"./AppTextField-CYZ3Rx27.js";import{_ as $e}from"./AppSelect-BVIOMXQR.js";import{_ as Je}from"./AppAutocomplete-C0T09cdS.js";import{V as Xe}from"./VNodeRenderer-DxF3FeEK.js";import{c as I,m as y,o as p,d as t,b as l,e as s,n as e,H as Ee,x as d,r as u,w as pe,A as $,Y as ce,f as C,F as Re,h as Pe,ai as U,v as S,aq as se,as as Ce,J as Ie,$ as ne,s as ae,ak as V,K as ke,j as Ze,a as et}from"./index-BzYb6ZoD.js";import{Q as tt}from"./qrcode.vue.esm-BqCK7TRI.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Q}from"./VDivider-BMPN5T29.js";import{V as O,a as _}from"./VRow-DsbanFfo.js";import{V as J}from"./VCard-BFmSMYzL.js";import{s as E}from"./statutInfos-CQo4TYHA.js";import{r as oe,V as lt,$ as G}from"./VForm-BLjIjdGP.js";import{_ as st,V as at,a as ot,b as nt,c as Te,d as it,s as rt}from"./VTabs-CQUVYkPt.js";import{_ as ut}from"./AppTextarea-DRNDIqPK.js";import{t as M}from"./toast-D70_l16b.js";import{V as dt}from"./VFileInput-xeMZhnf1.js";import{V as Y}from"./VCardText-BXEBMitH.js";import{V as Se}from"./VDataTable-DbMptXrw.js";import{V as fe}from"./VChip-BWDkMsrJ.js";import{V as De}from"./VDialog-G5cni5JA.js";import{u as mt}from"./index-CEU2nq8s.js";import{a as me,V as pt}from"./VList-CRQHkd0E.js";import{V as ct}from"./VSpacer-CEO0eUAf.js";import{V as ft}from"./VMenu-BY9QwYHY.js";import"./VInput-DYDNzfTI.js";import"./VImg-D7Y9dL6k.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-CdQl9fbf.js";import"./VSelect-CesdDUFt.js";import"./VOverlay-XR8PqSnK.js";import"./VAvatar-BeI6oEr0.js";import"./filter-CU_3bWay.js";/* empty css              */const vt={key:0},_t={id:"print-area"},bt={class:"print-content"},gt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Vt={class:"d-flex align-center app-logo"},yt={class:"app-logo-title"},xt={class:"d-flex align-center destination"},wt={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},ht={class:"mb-0"},Et={class:"mb-0"},Ct={class:"mb-0"},It={class:"mb-0"},kt={class:"mb-0"},Tt={class:"mb-0"},St={class:"mb-0"},Ot={class:"mb-0"},Nt={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(K,{emit:b}){const m=K,R=b;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){R("update:isPrintColis",!1)},(z,x)=>m.isPrintColis?(p(),I("div",vt,[t("div",_t,[t("div",bt,[l(J,{class:"props.item-preview-wrapper"},{default:s(()=>[x[0]||(x[0]=t("div",null,null,-1)),t("div",gt,[t("div",null,[t("div",Vt,[l(e(Xe),{nodes:e(Ee).app.logo},null,8,["nodes"]),t("h6",yt,d(e(Ee).app.title),1)])]),t("div",xt,d(m.item.destination),1)]),l(Q,{class:"border-solid"}),l(O,{class:"print-row little-margin"},{default:s(()=>[l(_,{class:"text"},{default:s(()=>[t("div",wt,[t("div",null,[t("p",ht," Code : "+d(m.item.code),1),t("p",Et," Nom : "+d(m.item.nom_client),1),t("p",Ct," tel : "+d(m.item.tel_client),1)]),t("div",null,[t("p",It,[l(tt,{size:"70",value:m.item.code},null,8,["value"])])])]),t("p",kt," Adresse : "+d(m.item.adresse),1)]),_:1})]),_:1}),l(Q,{class:"border-solid"}),l(O,{class:"align-right little-margin"},{default:s(()=>[l(_,{cols:"12"},{default:s(()=>[t("p",Tt," Produits : "+d(m.item.produit),1),t("p",St," Montant : "+d(m.item.montant),1)]),_:1})]),_:1}),l(Q,{class:"border-solid"}),l(O,{class:"align-right little-margin"},{default:s(()=>[l(_,{cols:"12"},{default:s(()=>[t("p",Ot," Essayage : "+d(m.item.essayage?"OUI":"NON")+" | Ouvrir : "+d(m.item.ouvrir?"OUI":"NON")+" | Echange : "+d(m.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),l(Q,{class:"border-solid"}),x[1]||(x[1]=t("p",{class:"mb-0"},[t("span",null," Remarque: "),t("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):y("",!0)}},At=Ue(Nt,[["__scopeId","data-v-ad22cfed"]]),$t={key:0},Rt={key:1},Pt={class:"text-center"},Ut={key:0},Dt={key:1},Lt={__name:"actionsColis",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},emits:["getItemData"],setup(K,{emit:b}){const m=K,R=b,z=u({}),x=u(""),g=u(!1),w=u(),n=u({id:null,statut:"",commentaire:"",date:"",file:""});pe(()=>m.currentStatut,r=>{x.value=r},{immediate:!0}),pe(()=>m.item,r=>{z.value=r},{immediate:!0});const k=u(""),W=r=>{g.value=!0,n.value.statut=r},D=async()=>{const{valid:r}=await w.value.validate();r&&await A(n.value.statut)},A=async r=>{n.value.statut=r,n.value.id=m.id,k.value=r;const c=new FormData;c.append("file",n.value.file),c.append("id",n.value.id),c.append("statut",n.value.statut),c.append("commentaire",n.value.commentaire),c.append("date",n.value.date),G({method:"POST",url:"/api/updateStatutColis",data:c,headers:{"Content-Type":"multipart/form-data"}}).then(async N=>{N.status===200&&(M.success(N.data),r!="COMMENTAIRE"&&(x.value=r),g.value=!1,R("getItemData")),k.value=""}).catch(N=>{k.value="",N.response&&N.response.status===422?M.error(N.response.data.message):M.error("something wrong")})},L=$("livreur","action"),T=$("admin","action");$("gestionnaire","action");const F=ce(()=>{let r=[];return T&&(r.push({...E("EN_ATTENTE"),statut:"EN_ATTENTE"}),r.push({...E("ENTREPOT"),statut:"ENTREPOT"})),r.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),["ENTREPOT","REPORTE","PAS_REPONSE"].includes(x.value)&&L&&r.push({...E("EN_COURS_LIVRAISON"),statut:"EN_COURS_LIVRAISON"}),["EN_COURS_LIVRAISON"].includes(x.value)&&L&&(r.push({...E("LIVRE"),statut:"LIVRE"}),r.push({...E("LIVRE_PARTIELLEMENT"),statut:"LIVRE_PARTIELLEMENT"}),r.push({...E("PAS_REPONSE"),statut:"PAS_REPONSE"}),r.push({...E("REPORTE"),statut:"REPORTE"}),r.push({...E("ANNULE"),statut:"ANNULE"}),r.push({...E("REFUSE"),statut:"REFUSE"})),r});return(r,c)=>{const N=Ne,f=ut;return e(g)?(p(),I("div",Rt,[l(lt,{ref_key:"refForm",ref:w,class:"mt-3"},{default:s(()=>[t("p",Pt," Statut à envoyer : "+d(("statutInfos"in r?r.statutInfos:e(E))(e(n).statut).text),1),["LIVRE_PARTIELLEMENT","PAS_REPONSE","REPORTE","REFUSE","ANNULE"].includes(e(n).statut)?(p(),I("div",Ut,[l(O,{class:"d-flex align-center justify-center"},{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(dt,{modelValue:e(n).file,"onUpdate:modelValue":c[0]||(c[0]=a=>e(n).file=a),rules:["requiredValidator"in r?r.requiredValidator:e(oe)],accept:"image/*",label:"File input"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):y("",!0),e(n).statut=="REPORTE"?(p(),I("div",Dt,[l(O,{class:"d-flex align-center justify-center"},{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(N,{modelValue:e(n).date,"onUpdate:modelValue":c[1]||(c[1]=a=>e(n).date=a),rules:["requiredValidator"in r?r.requiredValidator:e(oe)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):y("",!0),t("div",null,[l(O,{class:"d-flex align-center justify-center"},{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(f,{modelValue:e(n).commentaire,"onUpdate:modelValue":c[2]||(c[2]=a=>e(n).commentaire=a),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE"].includes(e(n).statut)?["requiredValidator"in r?r.requiredValidator:e(oe)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),l(O,null,{default:s(()=>[l(_,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[l(U,{color:"secondary",onClick:c[3]||(c[3]=a=>g.value=!1)},{default:s(()=>c[4]||(c[4]=[S(" retour ")])),_:1}),l(U,{loading:e(k)==e(n).statut,onClick:D},{default:s(()=>c[5]||(c[5]=[S(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):(p(),C(O,{key:0,class:"text-center v-row m-0"},{default:s(()=>[(p(!0),I(Re,null,Pe(e(F),(a,H)=>(p(),C(_,{key:H,cols:"6"},{default:s(()=>[l(U,{color:a.color,loading:e(k)==a.statut,style:{width:"inherit"},onClick:j=>W(a.statut)},{default:s(()=>[S(d(a.text),1)]),_:2},1032,["color","loading","onClick"])]),_:2},1024))),128)),e(F).length==0?(p(),I("div",$t," Aucune action requise ")):y("",!0)]),_:1}))}}},Ft={key:0,class:"text-end position-absolute right-0 parms-btn"},qt={class:"text-body-1 mb-2"},Mt={key:0,class:"text-body-1 mb-2"},jt={key:1,class:"text-body-1 mb-2"},Bt={key:0},zt={class:"text-body-1 mb-2"},Wt={class:"text-body-1 mb-2"},Ht={class:"text-body-1 mb-2"},Gt={class:"text-body-1 mb-2"},Kt={class:"text-body-1 mb-2"},Qt={class:"text-body-1 mb-2"},Yt={class:"text-body-1 mb-2"},Jt={class:"text-body-1 mb-2"},Xt={class:"text-body-1 mb-2"},Zt={class:"text-body-1 mb-2"},el={class:"text-body-1 mb-2"},tl={class:"text-body-1 mb-2"},ll={class:"text-body-1 mb-2"},sl={__name:"showColis",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(K,{emit:b}){let m,R;const z=K,x=b;let g={id:"",nom_vendeur:"",tel_vendeur:"",tarif_id:"",commentaire_vendeur:"",code_ramassage:"",frais_livreur:"",adresse:"",livreur:"",livreur_id:"",tel_livreur:"",statut:"",vendeur:"",colisHistories:[]};const w=([m,R]=se(()=>G("/api/ramasseurs").then(f=>f.data)),m=await m,R(),m),n=u(structuredClone(Ce(g))),k=u(!1),W=async f=>{k.value=!0,await G("/api/colis/"+f).then(async a=>{a.status===200&&(n.value=a.data),k.value=!1}).catch(a=>{k.value=!1,a.response&&a.response.status===422?M.error(a.response.data.message):M.error("something wrong")})};pe(()=>z.id,f=>{W(f)},{immediate:!0});const D=()=>{x("update:isShowItem",!1),x("fetchItems"),n.value=structuredClone(Ce(g))},A=$("gestionnaire","action");$("livreur","action");const L=$("vendeur","action"),T=u("Actions"),F=["tabler-adjustments-share","tabler-logs"],r=u(!1),c=u(!1),N=async()=>{c.value=!0,await G({method:"POST",url:"/api/parametrerColis",data:{id:n.value.id,livreur_id:n.value.livreur_id,frais_livreur:n.value.frais_livreur}}).then(async f=>{f.status===200&&(M.success(f.data),W(n.value.id)),c.value=!1}).catch(f=>{c.value=!1,f.response&&f.response.status===422?M.error(f.response.data.message):M.error("something wrong")})};return(f,a)=>{const H=Oe,j=Lt,ee=it,P=$e,q=Ae,te=st;return p(),C(De,{width:f.$vuetify.display.smAndDown?"auto":900,"model-value":z.isShowItem,"onUpdate:modelValue":D},{default:s(()=>[l(H,{onClick:D}),l(te,{title:"Details Colis",style:{overflow:"scroll","max-height":"90vh"},loading:e(k),"no-actions":""},{default:s(()=>[l(J,null,{default:s(()=>[Ie(l(Y,null,{default:s(()=>[e(A)?(p(),I("div",Ft,[l(U,{icon:"",class:"rounded-0",onClick:a[0]||(a[0]=h=>r.value=!0)},{default:s(()=>[l(ne,{size:"22",icon:"tabler-settings"})]),_:1})])):y("",!0),l(O,null,{default:s(()=>[l(_,{cols:"12",lg:"6"},{default:s(()=>[l(J,{title:"Informations colis"},{default:s(()=>[l(Y,null,{default:s(()=>[l(Se,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[7]||(a[7]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),t("td",null,[t("p",qt,d(e(n).code),1)])]),t("tr",null,[a[8]||(a[8]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Livreur : ")],-1)),t("td",null,[e(L)&&!e(A)?(p(),I("p",Mt," Livreur Drop ")):(p(),I("p",jt,d(e(n).livreur),1))])]),e(A)?(p(),I("tr",Bt,[a[9]||(a[9]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Livreur : ")],-1)),t("td",null,[t("p",zt,d(e(n).tel_livreur),1)])])):y("",!0),t("tr",null,[a[10]||(a[10]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramassage : ")],-1)),t("td",null,[t("p",Wt,d(e(n).code_ramassage),1)])]),t("tr",null,[a[11]||(a[11]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),t("td",null,[t("p",Ht,[l(fe,ae(("statutInfos"in f?f.statutInfos:e(E))(e(n).statut),{density:"default",label:"",size:"small"}),null,16)])])]),t("tr",null,[a[12]||(a[12]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Prix : ")],-1)),t("td",null,[t("p",Gt,d(e(n).montant),1)])]),t("tr",null,[a[13]||(a[13]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Produit : ")],-1)),t("td",null,[t("p",Kt,d(e(n).produit),1)])]),t("tr",null,[a[14]||(a[14]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Essayage : ")],-1)),t("td",null,[t("p",Qt,d(e(n).essayage?"OUI":"NON"),1)])]),t("tr",null,[a[15]||(a[15]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ouvrir : ")],-1)),t("td",null,[t("p",Yt,d(e(n).ouvrir?"OUI":"NON"),1)])]),t("tr",null,[a[16]||(a[16]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Echange : ")],-1)),t("td",null,[t("p",Jt,d(e(n).echange?"OUI":"NON"),1)])]),t("tr",null,[a[17]||(a[17]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Commentaire : ")],-1)),t("td",null,[t("p",Xt,d(e(n).commentaire_vendeur),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"6"},{default:s(()=>[l(J,{title:"Informations client"},{default:s(()=>[l(Y,null,{default:s(()=>[l(Se,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[18]||(a[18]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Nom de client : ")],-1)),t("td",null,[t("p",Zt,d(e(n).nom_client),1)])]),t("tr",null,[a[19]||(a[19]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel de client : ")],-1)),t("td",null,[t("p",el,d(e(n).tel_client),1)])]),t("tr",null,[a[20]||(a[20]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Distination : ")],-1)),t("td",null,[t("p",tl,d(e(n).destination),1)])]),t("tr",null,[a[21]||(a[21]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Adresse : ")],-1)),t("td",null,[t("p",ll,d(e(n).adresse),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(at,{modelValue:e(T),"onUpdate:modelValue":a[1]||(a[1]=h=>V(T)?T.value=h:null),grow:"",class:"disable-tab-transition",stacked:""},{default:s(()=>[(p(),I(Re,null,Pe(F,(h,ie)=>l(ot,{key:ie},{default:s(()=>[l(ne,{size:"40",icon:h},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),l(nt,{modelValue:e(T),"onUpdate:modelValue":a[3]||(a[3]=h=>V(T)?T.value=h:null),class:"mt-3"},{default:s(()=>[l(Te,null,{default:s(()=>[l(j,{id:e(n).id,"current-statut":e(n).statut,onGetItemData:a[2]||(a[2]=h=>W(e(n).id))},null,8,["id","current-statut"])]),_:1}),l(Te,null,{default:s(()=>[l(ee,{histories:e(n).colisHistories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[ke,!e(r)]]),e(A)?Ie((p(),C(Y,{key:0},{default:s(()=>[l(O,null,{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(P,{modelValue:e(n).livreur_id,"onUpdate:modelValue":a[4]||(a[4]=h=>e(n).livreur_id=h),placeholder:"Livreurs",label:"Livreurs",items:e(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),l(_,{cols:"12",md:"6"},{default:s(()=>[l(q,{modelValue:e(n).frais_livreur,"onUpdate:modelValue":a[5]||(a[5]=h=>e(n).frais_livreur=h),rules:["requiredValidator"in f?f.requiredValidator:e(oe)],label:"Frais de livreur",type:"number",placeholder:"Frais de livreur"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(O,null,{default:s(()=>[l(_,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[l(U,{color:"secondary",onClick:a[6]||(a[6]=h=>r.value=!1)},{default:s(()=>a[22]||(a[22]=[S(" retour ")])),_:1}),l(U,{loading:e(c),onClick:N},{default:s(()=>a[23]||(a[23]=[S(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[ke,e(r)]]):y("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},al=Ue(sl,[["__scopeId","data-v-beb5ad0d"]]),ol={class:"d-flex flex-wrap gap-4 ma-6"},nl={class:"d-flex gap-4 flex-wrap align-center"},il={key:1},rl={key:0},Gl={__name:"list",async setup(K){let b,m;const R=u(!1),z=u([{title:"Aujourd'hui",value:"today"},{title:"Hier",value:"yesterday"},{title:"La semaine dernière",value:"lastWeek"},{title:"Ce mois",value:"thisMonth"},{title:"Le mois précédent",value:"lastMonth"},{title:"Personnalisé",value:"custom"}]),x=$("gestionnaire","action"),g=u(),w=u(),n=u("today"),k=()=>{const v=new Date;switch(R.value=n.value==="custom",n.value){case"today":g.value=v.toISOString().split("T")[0],w.value=v.toISOString().split("T")[0];break;case"yesterday":const o=le(v,-1);g.value=o.toISOString().split("T")[0],w.value=o.toISOString().split("T")[0];break;case"lastWeek":g.value=rt(le(v,-7)).toISOString().split("T")[0],w.value=Ye(le(v,-7)).toISOString().split("T")[0];break;case"thisMonth":g.value=de(v).toISOString().split("T")[0],w.value=he(v).toISOString().split("T")[0];break;case"lastMonth":const B=le(de(v),-1);g.value=de(B).toISOString().split("T")[0],w.value=he(B).toISOString().split("T")[0];break}};k();const W=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],D=u(),A=u(),L=u(),T=u(),F=u(),r=u(),c=([b,m]=se(()=>G("/api/ramasseurs").then(v=>v.data)),b=await b,m(),b),N=([b,m]=se(()=>G("/api/vendeurs").then(v=>v.data)),b=await b,m(),b),f=u(!1),a=u(!1),H=u(),j=u(!1),ee=u(),P=u(5),q=u(1),te=u(),h=u(),ie=v=>{var o,B;te.value=(o=v.sortBy[0])==null?void 0:o.key,h.value=(B=v.sortBy[0])==null?void 0:B.order},Le=v=>{j.value=!0,ee.value=v},Fe=v=>{a.value=!0,H.value=v},qe=async()=>{let v="/api/colis/"+H.value.id;f.value=!0,G({method:"DELETE",url:v}).then(async o=>{o.status===200&&(a.value=!1,M.success(o.data),_e()),f.value=!1}).catch(o=>{f.value=!1})},{data:ve,error:ul,statusCode:dl,isFetching:Me,execute:_e}=([b,m]=se(()=>mt(Ke("/api/colis",{query:{livreur_id:F,vendeur_id:r,begin_date:g,end_date:w,code:D,statut:A,nom_client:L,tel_client:T,page:q,itemsPerPage:P,sortBy:te,orderBy:h}}))),b=await b,m(),b),be=Ze(),je=ce(()=>ve.value.items),ge=ce(()=>ve.value.total),X=u(!1),Ve=u(0),ye=u(0),Be=v=>{ye.value=v.id,Ve.value++,X.value=!0};return(v,o)=>{const B=Je,re=$e,ue=Ae,xe=Ne,we=et("IconBtn"),ze=Ge,We=Oe;return p(),I("div",null,[l(J,{title:"Filtres",class:"mb-6 d-print-none"},{default:s(()=>[l(Y,null,{default:s(()=>[l(O,null,{default:s(()=>[e(x)?(p(),C(_,{key:0,cols:"12",sm:"3"},{default:s(()=>[l(B,{modelValue:e(r),"onUpdate:modelValue":o[0]||(o[0]=i=>V(r)?r.value=i:null),placeholder:"Vendeurs",items:e(N),clearable:"","clear-icon":"tabler-x",autocomplete:"no-autocompeletse"},null,8,["modelValue","items"])]),_:1})):y("",!0),e(x)?(p(),C(_,{key:1,cols:"12",sm:"3"},{default:s(()=>[l(B,{modelValue:e(F),"onUpdate:modelValue":o[1]||(o[1]=i=>V(F)?F.value=i:null),placeholder:"Livreurs",items:e(c),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):y("",!0),l(_,{cols:"12",sm:"3"},{default:s(()=>[l(re,{modelValue:e(A),"onUpdate:modelValue":o[2]||(o[2]=i=>V(A)?A.value=i:null),placeholder:"Statut",items:e(Qe),clearable:"","clear-icon":"tabler-x"},{item:s(({item:i,props:Z})=>[l(me,ae(Z,{title:e(E)(i.value).text}),null,16,["title"])]),selection:s(({item:i})=>[S(d(e(E)(i.value).text),1)]),_:1},8,["modelValue","items"])]),_:1}),l(_,{cols:"12",sm:"2"},{default:s(()=>[l(ue,{modelValue:e(D),"onUpdate:modelValue":o[3]||(o[3]=i=>V(D)?D.value=i:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",sm:"2"},{default:s(()=>[l(ue,{modelValue:e(L),"onUpdate:modelValue":o[4]||(o[4]=i=>V(L)?L.value=i:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",sm:"2"},{default:s(()=>[l(ue,{modelValue:e(T),"onUpdate:modelValue":o[5]||(o[5]=i=>V(T)?T.value=i:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1}),l(O,null,{default:s(()=>[l(_,{cols:"12",sm:"3"},{default:s(()=>[l(re,{modelValue:e(n),"onUpdate:modelValue":[o[6]||(o[6]=i=>V(n)?n.value=i:null),k],placeholder:"Plage de dates",items:e(z),label:e(g)+" - "+e(w)},null,8,["modelValue","items","label"])]),_:1}),e(R)?(p(),C(_,{key:0,cols:"12",sm:"3"},{default:s(()=>[l(xe,{modelValue:e(g),"onUpdate:modelValue":o[7]||(o[7]=i=>V(g)?g.value=i:null),label:"Début",placeholder:"date"},null,8,["modelValue"])]),_:1})):y("",!0),e(R)?(p(),C(_,{key:1,cols:"12",sm:"3"},{default:s(()=>[l(xe,{modelValue:e(w),"onUpdate:modelValue":o[8]||(o[8]=i=>V(w)?w.value=i:null),label:"Fin",placeholder:"date"},null,8,["modelValue"])]),_:1})):y("",!0)]),_:1})]),_:1}),l(Q),t("div",ol,[l(ct),t("div",nl,[l(re,{modelValue:e(P),"onUpdate:modelValue":o[9]||(o[9]=i=>V(P)?P.value=i:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e($)("create","colis")?(p(),C(U,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:o[10]||(o[10]=i=>e(be).push({name:"colis-add"}))},{default:s(()=>o[19]||(o[19]=[S(" Ajouter Colis ")])),_:1})):y("",!0)])]),l(Q,{class:"mt-4"}),l(He,{"items-per-page":e(P),"onUpdate:itemsPerPage":o[12]||(o[12]=i=>V(P)?P.value=i:null),page:e(q),"onUpdate:page":o[13]||(o[13]=i=>V(q)?q.value=i:null),loading:e(Me),headers:W,items:e(je),"items-length":e(ge),class:"text-no-wrap",locale:"fr","onUpdate:options":ie},{"item.code":s(({item:i})=>[e($)("show","colis")?(p(),C(U,{key:0,variant:"text",onClick:Z=>Be(i)},{default:s(()=>[S(d(i.code),1)]),_:2},1032,["onClick"])):(p(),I("span",il,d(i.code),1))]),"item.statut":s(({item:i})=>[l(fe,ae(e(E)(i.statut),{density:"default",label:"",size:"small"}),null,16),i.statut_retour?(p(),I("span",rl,[o[20]||(o[20]=S(" - ")),l(fe,ae(e(E)(i.statut_retour),{density:"default",label:"",size:"small"}),null,16)])):y("",!0)]),"item.actions":s(({item:i})=>[t("div",null,[e($)("update","colis")&&(i.statut=="EN_ATTENTE"||i.statut=="EN_COURS_LIVRAISON"&&e(x))?(p(),C(we,{key:0,onClick:Z=>e(be).push("/colis/"+i.id)},{default:s(()=>[l(ne,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):y("",!0),l(we,null,{default:s(()=>[l(ne,{icon:"tabler-dots-vertical"}),l(ft,{activator:"parent"},{default:s(()=>[l(pt,null,{default:s(()=>[l(me,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:Z=>Le(i)},{default:s(()=>o[21]||(o[21]=[S(" Print ")])),_:2},1032,["onClick"]),e($)("delete","colis")&&i.statut=="EN_ATTENTE"?(p(),C(me,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:Z=>Fe(i)},{default:s(()=>o[22]||(o[22]=[S(" Delete ")])),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:s(()=>[l(ze,{page:e(q),"onUpdate:page":o[11]||(o[11]=i=>V(q)?q.value=i:null),"items-per-page":e(P),"total-items":e(ge)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),l(De,{modelValue:e(a),"onUpdate:modelValue":o[16]||(o[16]=i=>V(a)?a.value=i:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[l(We,{onClick:o[14]||(o[14]=i=>a.value=!e(a))}),l(J,{title:"Êtes-vous sûr de vouloir supprimer le colis "+e(H).code+" ?"},{default:s(()=>[l(Y,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[l(U,{color:"secondary",variant:"tonal",onClick:o[15]||(o[15]=i=>a.value=!1)},{default:s(()=>o[23]||(o[23]=[S(" Non ")])),_:1}),l(U,{loading:e(f),onClick:qe},{default:s(()=>o[24]||(o[24]=[S(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),e(j)?(p(),C(At,{key:0,"is-print-colis":e(j),"onUpdate:isPrintColis":o[17]||(o[17]=i=>V(j)?j.value=i:null),item:e(ee)},null,8,["is-print-colis","item"])):y("",!0),e(X)?(p(),C(al,{id:e(ye),key:e(Ve),"is-show-item":e(X),"onUpdate:isShowItem":o[18]||(o[18]=i=>V(X)?X.value=i:null),onFetchItems:e(_e)},null,8,["id","is-show-item","onFetchItems"])):y("",!0)])}}};export{Gl as default};
