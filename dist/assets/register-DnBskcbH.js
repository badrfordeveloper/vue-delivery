import{V as I,r as n,e as P,p as M,P as S}from"./VForm-Dg9jF2bh.js";import{i as B,j as T,r as m,a as _,c as j,o as f,d,b as a,n as l,H as k,x as D,e as o,f as v,$ as E,v as b,ai as q,ah as L,m as z,F as A}from"./index-ozxdH-7b.js";import{_ as G}from"./AppTextField-C8pU9PIj.js";import{u as H,_ as J}from"./useAbility-BclQqvNF.js";import{u as K,a as O,b as Q}from"./misc-mask-light-C-H9wdA-.js";import{V as W}from"./VNodeRenderer-Db-S4xzF.js";import{$ as X}from"./api-Dx5SAhyB.js";import{t as Y}from"./toast-UA7yOy59.js";import{a as i,V as w}from"./VRow-pYCdNr-Y.js";import{V as N}from"./VCard-CNbNQKcS.js";import{V as h}from"./VCardText-DsXbz0Qj.js";import{V as Z}from"./VInput-Dxr6NkQk.js";import{V as ee,a as C}from"./VRadioGroup-B9OC95VS.js";import{V as x}from"./VDivider-CL3jlbdq.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-DxrlKLh1.js";import"./VImg-DVerLASX.js";/* empty css              */import"./VAvatar-CqlEylcw.js";import"./VSelectionControl-Bxphu3hx.js";const ae={href:"javascript:void(0)"},le={class:"auth-logo d-flex align-center gap-x-3"},re={class:"auth-title"},oe={class:"position-relative bg-background w-100 me-0"},te=["src"],se={class:"text-center mb-3"},ie={class:"text-center mb-2"},de={class:"mt-2 text-center"},$e={__name:"register",setup(ne){const F=K(Q,O);H(),B(),T();const t=m({lastName:"",firstName:"",email:"",password:"",phone:"",store:"",role:null,ville:""}),g=m(),y=m(!1),R=m(!1),c=m(!1),p=m(!1),U=async()=>{try{R.value=!1,c.value=!0,X.post("/api/auth/register",t.value).then(async r=>{r.status===200&&(y.value=!0)}).catch(r=>{if(r.response&&r.response.status===422){const e=r.response.data.errors;for(let V in e)Y.error(`${V}: ${e[V].join(", ")}`)}console.log("error register")}).then(()=>{c.value=!1})}catch(r){console.error(r)}},$=()=>{var r;(r=g.value)==null||r.validate().then(({valid:e})=>{e&&U()})};return(r,e)=>{const V=_("FeatherIcon"),u=G;return f(),j(A,null,[d("a",ae,[d("div",le,[a(l(W),{nodes:l(k).app.logo},null,8,["nodes"]),d("h1",re,D(l(k).app.title),1)])]),a(w,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:o(()=>[a(i,{md:"8",class:"d-none d-md-flex"},{default:o(()=>[d("div",oe,[d("img",{class:"auth-footer-mask flip-in-rtl",src:l(F),alt:"auth-footer-mask",height:"280",width:"100"},null,8,te)])]),_:1}),a(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:o(()=>[l(y)?(f(),v(N,{key:0,flat:"","max-width":600,class:"mt-12 mt-sm-0 pa-6"},{default:o(()=>[d("div",se,[a(V,{icon:"CheckCircleIcon",size:"64",class:"text-success"})]),d("div",ie,[a(E,{style:{"font-size":"60px"},icon:"tabler-circle-dashed-check",color:"success"})]),e[11]||(e[11]=d("h4",{class:"text-center mb-2"}," Inscription confirmée avec succès ! ",-1)),a(h,{class:"text-center mb-2"},{default:o(()=>e[9]||(e[9]=[b(" Merci pour votre inscription. Notre équipe vous contactera très prochainement pour la suite du processus. ")])),_:1}),d("div",de,[a(q,{color:"success",tag:"a",href:"https://site.dropit.ma/"},{default:o(()=>e[10]||(e[10]=[b(" Retour à l'accueil ")])),_:1})])]),_:1})):(f(),v(N,{key:1,flat:"","max-width":600,class:"mt-12 mt-sm-0 pa-6"},{default:o(()=>[a(h,null,{default:o(()=>e[12]||(e[12]=[d("h4",{class:"text-h4 mb-1"}," S'inscrire ",-1)])),_:1}),a(h,null,{default:o(()=>[a(I,{ref_key:"refVForm",ref:g,onSubmit:L($,["prevent"])},{default:o(()=>[a(w,null,{default:o(()=>[a(i,{cols:"12",class:"app-text-field"},{default:o(()=>[a(Z,{text:"Nature de service",class:"mb-1 text-body-2 text-wrap"}),a(ee,{modelValue:l(t).role,"onUpdate:modelValue":e[0]||(e[0]=s=>l(t).role=s),rules:["requiredValidator"in r?r.requiredValidator:l(n)],inline:""},{default:o(()=>[a(C,{label:"Vendeur",value:"vendeur",density:"compact"}),a(C,{label:"Livreur",value:"livreur",density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),l(t).role=="vendeur"?(f(),v(i,{key:0,cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).store,"onUpdate:modelValue":e[1]||(e[1]=s=>l(t).store=s),rules:["requiredValidator"in r?r.requiredValidator:l(n)],label:"Nom de store",placeholder:"Nom de store"},null,8,["modelValue","rules"])]),_:1})):z("",!0),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).lastName,"onUpdate:modelValue":e[2]||(e[2]=s=>l(t).lastName=s),rules:["requiredValidator"in r?r.requiredValidator:l(n)],placeholder:"Nom",label:"Votre Nom"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).firstName,"onUpdate:modelValue":e[3]||(e[3]=s=>l(t).firstName=s),rules:["requiredValidator"in r?r.requiredValidator:l(n)],placeholder:"Prenom",label:"Votre Prenom"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).email,"onUpdate:modelValue":e[4]||(e[4]=s=>l(t).email=s),rules:["requiredValidator"in r?r.requiredValidator:l(n),"emailValidator"in r?r.emailValidator:l(P)],label:"E-mail",placeholder:"example@gmail.com",type:"email"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).password,"onUpdate:modelValue":e[5]||(e[5]=s=>l(t).password=s),rules:["requiredValidator"in r?r.requiredValidator:l(n),"passwordValidator"in r?r.passwordValidator:l(M)],type:l(p)?"text":"password","append-inner-icon":l(p)?"tabler-eye-off":"tabler-eye",label:"Mot de passe",autocomplete:"on",placeholder:"············","onClick:appendInner":e[6]||(e[6]=s=>p.value=!l(p))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).phone,"onUpdate:modelValue":e[7]||(e[7]=s=>l(t).phone=s),rules:["requiredValidator"in r?r.requiredValidator:l(n),"PhoneValidator"in r?r.PhoneValidator:l(S)],label:"Telephone",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(t).ville,"onUpdate:modelValue":e[8]||(e[8]=s=>l(t).ville=s),rules:["requiredValidator"in r?r.requiredValidator:l(n)],label:"Ville",placeholder:"Ville"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[e[14]||(e[14]=d("div",{class:"my-5"},null,-1)),a(q,{loading:l(c),block:"",type:"submit"},{default:o(()=>e[13]||(e[13]=[b(" S'inscrire ")])),_:1},8,["loading"])]),_:1}),a(i,{cols:"12",class:"d-flex align-center"},{default:o(()=>[a(x),e[15]||(e[15]=d("span",{class:"mx-4"},"or",-1)),a(x)]),_:1}),a(i,{cols:"12",class:"text-center"},{default:o(()=>[a(J)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}))]),_:1})]),_:1})],64)}}};export{$e as default};
