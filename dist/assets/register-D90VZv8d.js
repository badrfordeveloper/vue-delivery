import{V as I,r as n,e as P,p as M,P as S,$ as B}from"./VForm-B-RrgLOX.js";import{i as T,j as _,r as m,a as j,c as D,o as f,d,b as a,n as l,H as k,x as E,e as o,f as v,$ as L,v as b,ai as q,ah as z,m as A,F as G}from"./index-Cn4GOq09.js";import{_ as H}from"./AppTextField-CjMF6sBU.js";import{u as J,_ as K}from"./useAbility-BlDXNW5w.js";import{u as O,a as Q,b as W}from"./misc-mask-light-DP5G4dvq.js";import{V as X}from"./VNodeRenderer-BvAAXyPw.js";import{t as Y}from"./toast-Cs2lwIGd.js";import{a as i,V as w}from"./VRow-_eMtTXOa.js";import{V as N}from"./VCard-C8xyqS8Y.js";import{V as h}from"./VCardText-oDAfMypB.js";import{V as Z}from"./VInput-DnGVuAhw.js";import{V as ee,a as C}from"./VRadioGroup-DNi-Dp71.js";import{V as x}from"./VDivider-CSx1XzIQ.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-Cf1CINQn.js";import"./VImg-BcxKOzCh.js";/* empty css              */import"./VAvatar-CUGtIZAw.js";import"./VSelectionControl-CxcP7L5m.js";const ae={href:"javascript:void(0)"},le={class:"auth-logo d-flex align-center gap-x-3"},re={class:"auth-title"},oe={class:"position-relative bg-background w-100 me-0"},se=["src"],te={class:"text-center mb-3"},ie={class:"text-center mb-2"},de={class:"mt-2 text-center"},Ue={__name:"register",setup(ne){const F=O(W,Q);J(),T(),_();const s=m({lastName:"",firstName:"",email:"",password:"",phone:"",store:"",role:null,ville:""}),g=m(),y=m(!1),R=m(!1),c=m(!1),p=m(!1),U=async()=>{try{R.value=!1,c.value=!0,B.post("/api/auth/register",s.value).then(async r=>{r.status===200&&(y.value=!0)}).catch(r=>{if(r.response&&r.response.status===422){const e=r.response.data.errors;for(let V in e)Y.error(`${V}: ${e[V].join(", ")}`)}console.log("error register")}).then(()=>{c.value=!1})}catch(r){console.error(r)}},$=()=>{var r;(r=g.value)==null||r.validate().then(({valid:e})=>{e&&U()})};return(r,e)=>{const V=j("FeatherIcon"),u=H;return f(),D(G,null,[d("a",ae,[d("div",le,[a(l(X),{nodes:l(k).app.logo},null,8,["nodes"]),d("h1",re,E(l(k).app.title),1)])]),a(w,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:o(()=>[a(i,{md:"8",class:"d-none d-md-flex"},{default:o(()=>[d("div",oe,[d("img",{class:"auth-footer-mask flip-in-rtl",src:l(F),alt:"auth-footer-mask",height:"280",width:"100"},null,8,se)])]),_:1}),a(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:o(()=>[l(y)?(f(),v(N,{key:0,flat:"","max-width":600,class:"mt-12 mt-sm-0 pa-6"},{default:o(()=>[d("div",te,[a(V,{icon:"CheckCircleIcon",size:"64",class:"text-success"})]),d("div",ie,[a(L,{style:{"font-size":"60px"},icon:"tabler-circle-dashed-check",color:"success"})]),e[11]||(e[11]=d("h4",{class:"text-center mb-2"}," Inscription confirmée avec succès ! ",-1)),a(h,{class:"text-center mb-2"},{default:o(()=>e[9]||(e[9]=[b(" Merci pour votre inscription. Notre équipe vous contactera très prochainement pour la suite du processus. ")])),_:1}),d("div",de,[a(q,{color:"success",tag:"a",href:"https://site.dropit.ma/"},{default:o(()=>e[10]||(e[10]=[b(" Retour à l'accueil ")])),_:1})])]),_:1})):(f(),v(N,{key:1,flat:"","max-width":600,class:"mt-12 mt-sm-0 pa-6"},{default:o(()=>[a(h,null,{default:o(()=>e[12]||(e[12]=[d("h4",{class:"text-h4 mb-1"}," S'inscrire ",-1)])),_:1}),a(h,null,{default:o(()=>[a(I,{ref_key:"refVForm",ref:g,onSubmit:z($,["prevent"])},{default:o(()=>[a(w,null,{default:o(()=>[a(i,{cols:"12",class:"app-text-field"},{default:o(()=>[a(Z,{text:"Nature de service",class:"mb-1 text-body-2 text-wrap"}),a(ee,{modelValue:l(s).role,"onUpdate:modelValue":e[0]||(e[0]=t=>l(s).role=t),rules:["requiredValidator"in r?r.requiredValidator:l(n)],inline:""},{default:o(()=>[a(C,{label:"Vendeur",value:"vendeur",density:"compact"}),a(C,{label:"Livreur",value:"livreur",density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),l(s).role=="vendeur"?(f(),v(i,{key:0,cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).store,"onUpdate:modelValue":e[1]||(e[1]=t=>l(s).store=t),rules:["requiredValidator"in r?r.requiredValidator:l(n)],label:"Nom de store",placeholder:"Nom de store"},null,8,["modelValue","rules"])]),_:1})):A("",!0),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).lastName,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).lastName=t),rules:["requiredValidator"in r?r.requiredValidator:l(n)],placeholder:"Nom",label:"Votre Nom"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).firstName,"onUpdate:modelValue":e[3]||(e[3]=t=>l(s).firstName=t),rules:["requiredValidator"in r?r.requiredValidator:l(n)],placeholder:"Prenom",label:"Votre Prenom"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).email,"onUpdate:modelValue":e[4]||(e[4]=t=>l(s).email=t),rules:["requiredValidator"in r?r.requiredValidator:l(n),"emailValidator"in r?r.emailValidator:l(P)],label:"E-mail",placeholder:"example@gmail.com",type:"email"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).password,"onUpdate:modelValue":e[5]||(e[5]=t=>l(s).password=t),rules:["requiredValidator"in r?r.requiredValidator:l(n),"passwordValidator"in r?r.passwordValidator:l(M)],type:l(p)?"text":"password","append-inner-icon":l(p)?"tabler-eye-off":"tabler-eye",label:"Mot de passe",autocomplete:"on",placeholder:"············","onClick:appendInner":e[6]||(e[6]=t=>p.value=!l(p))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).phone,"onUpdate:modelValue":e[7]||(e[7]=t=>l(s).phone=t),rules:["requiredValidator"in r?r.requiredValidator:l(n),"PhoneValidator"in r?r.PhoneValidator:l(S)],label:"Telephone",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[a(u,{modelValue:l(s).ville,"onUpdate:modelValue":e[8]||(e[8]=t=>l(s).ville=t),rules:["requiredValidator"in r?r.requiredValidator:l(n)],label:"Ville",placeholder:"Ville"},null,8,["modelValue","rules"])]),_:1}),a(i,{cols:"12"},{default:o(()=>[e[14]||(e[14]=d("div",{class:"my-5"},null,-1)),a(q,{loading:l(c),block:"",type:"submit"},{default:o(()=>e[13]||(e[13]=[b(" S'inscrire ")])),_:1},8,["loading"])]),_:1}),a(i,{cols:"12",class:"d-flex align-center"},{default:o(()=>[a(x),e[15]||(e[15]=d("span",{class:"mx-4"},"or",-1)),a(x)]),_:1}),a(i,{cols:"12",class:"text-center"},{default:o(()=>[a(K)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}))]),_:1})]),_:1})],64)}}};export{Ue as default};
