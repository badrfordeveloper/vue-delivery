import{_ as Te}from"./DialogCloseBtn-CyhOHkF9.js";import{V as Ye,_ as Ge,c as Ke}from"./VDataTableServer-DgY7t16v.js";import{_ as Ne,s as Qe}from"./constants-BltA3_Ka.js";import{_ as $e}from"./AppTextField-DcnJNrqY.js";import{_ as Ae}from"./AppSelect-BNJgt2DB.js";import{_ as Je}from"./AppAutocomplete-BnDSWDLs.js";import{V as Xe}from"./VNodeRenderer-BLthce2V.js";import{c as R,m as h,o as v,d as t,b as l,e as s,n as e,H as he,x as p,r as m,w as pe,A as H,Y as ce,f as S,F as Re,h as Pe,ai as U,v as N,aq as le,as as Ce,J as ke,$ as oe,s as se,ak as x,K as Ie,j as Ze,a as et}from"./index-Cpx2oQOu.js";import{Q as tt}from"./qrcode.vue.esm-B2UpXNuA.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Y}from"./VDivider-PtAXYG4Q.js";import{V as A,a as b}from"./VRow-D3F4KUiE.js";import{V as K}from"./VCard-ReRXJKrU.js";import{s as $}from"./statutInfos-CQo4TYHA.js";import{r as ae,V as lt,$ as W}from"./VForm-DE5Dv9Vg.js";import{t as ne,c as st,g as at,_ as ot,V as nt,a as it,b as rt,d as Ee,e as ut,s as dt}from"./VTabs-FSF85mBO.js";import{_ as mt}from"./AppTextarea-kINhzqyt.js";import{t as j}from"./toast-DRzPnEr1.js";import{V as pt}from"./VFileInput-BBsfFeEf.js";import{V as G}from"./VCardText-C2zmEXKG.js";import{V as Se}from"./VDataTable-CwT4qoSb.js";import{V as fe}from"./VChip-DLIMD1Bc.js";import{V as De}from"./VDialog-DZYKZxfn.js";import{u as ct}from"./index-Dt9Tyk0y.js";import{a as de,V as ft}from"./VList-FbrG2muM.js";import{V as vt}from"./VSpacer-kbMM-EH7.js";import{V as _t}from"./VMenu-SP-Qfij5.js";import"./VInput-DGQc-sBd.js";import"./VImg-BaA_dvcq.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-yTp9D8wO.js";import"./VSelect-RP3MareX.js";import"./VOverlay-B2_IMlFx.js";import"./VAvatar-CsMBVwvd.js";import"./filter-CoHf6CYO.js";/* empty css              */const bt={key:0},gt={id:"print-area"},Vt={class:"print-content"},yt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},wt={class:"d-flex align-center app-logo"},xt={class:"app-logo-title"},ht={class:"d-flex align-center destination"},Ct={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},kt={class:"mb-0"},It={class:"mb-0"},Et={class:"mb-0"},St={class:"mb-0"},Ot={class:"mb-0"},Tt={class:"mb-0"},Nt={class:"mb-0"},$t={class:"mb-0"},At={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(C,{emit:d}){const r=C,g=d;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){g("update:isPrintColis",!1)},(O,y)=>r.isPrintColis?(v(),R("div",bt,[t("div",gt,[t("div",Vt,[l(K,{class:"props.item-preview-wrapper"},{default:s(()=>[y[0]||(y[0]=t("div",null,null,-1)),t("div",yt,[t("div",null,[t("div",wt,[l(e(Xe),{nodes:e(he).app.logo},null,8,["nodes"]),t("h6",xt,p(e(he).app.title),1)])]),t("div",ht,p(r.item.destination),1)]),l(Y,{class:"border-solid"}),l(A,{class:"print-row little-margin"},{default:s(()=>[l(b,{class:"text"},{default:s(()=>[t("div",Ct,[t("div",null,[t("p",kt," Code : "+p(r.item.code),1),t("p",It," Nom : "+p(r.item.nom_client),1),t("p",Et," tel : "+p(r.item.tel_client),1)]),t("div",null,[t("p",St,[l(tt,{size:"70",value:r.item.code},null,8,["value"])])])]),t("p",Ot," Adresse : "+p(r.item.adresse),1)]),_:1})]),_:1}),l(Y,{class:"border-solid"}),l(A,{class:"align-right little-margin"},{default:s(()=>[l(b,{cols:"12"},{default:s(()=>[t("p",Tt," Produits : "+p(r.item.produit),1),t("p",Nt," Montant : "+p(r.item.montant),1)]),_:1})]),_:1}),l(Y,{class:"border-solid"}),l(A,{class:"align-right little-margin"},{default:s(()=>[l(b,{cols:"12"},{default:s(()=>[t("p",$t," Essayage : "+p(r.item.essayage?"OUI":"NON")+" | Ouvrir : "+p(r.item.ouvrir?"OUI":"NON")+" | Echange : "+p(r.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),l(Y,{class:"border-solid"}),y[1]||(y[1]=t("p",{class:"mb-0"},[t("span",null," Remarque: "),t("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):h("",!0)}},Rt=Ue(At,[["__scopeId","data-v-ad22cfed"]]);function te(C,d,r){const g=ne(C,r==null?void 0:r.in);return isNaN(d)?st(C,NaN):(d&&g.setDate(g.getDate()+d),g)}function Oe(C,d){const r=ne(C,d==null?void 0:d.in),g=r.getMonth();return r.setFullYear(r.getFullYear(),g+1,0),r.setHours(23,59,59,999),r}function me(C,d){const r=ne(C,d==null?void 0:d.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Pt(C,d){var w,n;const r=at(),g=r.weekStartsOn??((n=(w=r.locale)==null?void 0:w.options)==null?void 0:n.weekStartsOn)??0,O=ne(C,d==null?void 0:d.in),y=O.getDay(),V=(y<g?-7:0)+6-(y-g);return O.setDate(O.getDate()+V),O.setHours(23,59,59,999),O}const Ut={key:0},Dt={key:1},Lt={class:"text-center"},Ft={key:0},qt={key:1},Mt={__name:"actionsColis",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},emits:["getItemData"],setup(C,{emit:d}){const r=C,g=d,O=m({}),y=m(""),V=m(!1),w=m(),n=m({id:null,statut:"",commentaire:"",date:"",file:""});pe(()=>r.currentStatut,u=>{y.value=u},{immediate:!0}),pe(()=>r.item,u=>{O.value=u},{immediate:!0});const T=m(""),z=u=>{V.value=!0,n.value.statut=u},D=async()=>{const{valid:u}=await w.value.validate();u&&await L(n.value.statut)},L=async u=>{n.value.statut=u,n.value.id=r.id,T.value=u;const c=new FormData;c.append("file",n.value.file),c.append("id",n.value.id),c.append("statut",n.value.statut),c.append("commentaire",n.value.commentaire),c.append("date",n.value.date),W({method:"POST",url:"/api/updateStatutColis",data:c,headers:{"Content-Type":"multipart/form-data"}}).then(async k=>{k.status===200&&(j.success(k.data),u!="COMMENTAIRE"&&(y.value=u),V.value=!1,g("getItemData")),T.value=""}).catch(k=>{T.value="",k.response&&k.response.status===422?j.error(k.response.data.message):j.error("something wrong")})},I=H("livreur","action");H("gestionnaire","action");const F=ce(()=>{let u=[];return u.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),["ENTREPOT","REPORTE","PAS_REPONSE"].includes(y.value)&&I&&u.push({...$("EN_COURS_LIVRAISON"),statut:"EN_COURS_LIVRAISON"}),["EN_COURS_LIVRAISON"].includes(y.value)&&I&&(u.push({...$("LIVRE"),statut:"LIVRE"}),u.push({...$("LIVRE_PARTIELLEMENT"),statut:"LIVRE_PARTIELLEMENT"}),u.push({...$("PAS_REPONSE"),statut:"PAS_REPONSE"}),u.push({...$("REPORTE"),statut:"REPORTE"}),u.push({...$("ANNULE"),statut:"ANNULE"}),u.push({...$("REFUSE"),statut:"REFUSE"})),u});return(u,c)=>{const k=Ne,f=mt;return e(V)?(v(),R("div",Dt,[l(lt,{ref_key:"refForm",ref:w,class:"mt-3"},{default:s(()=>[t("p",Lt," Statut à envoyer : "+p(("statutInfos"in u?u.statutInfos:e($))(e(n).statut).text),1),["LIVRE_PARTIELLEMENT","PAS_REPONSE","REPORTE","REFUSE","ANNULE"].includes(e(n).statut)?(v(),R("div",Ft,[l(A,{class:"d-flex align-center justify-center"},{default:s(()=>[l(b,{md:"6",cols:"12"},{default:s(()=>[l(pt,{modelValue:e(n).file,"onUpdate:modelValue":c[0]||(c[0]=a=>e(n).file=a),rules:["requiredValidator"in u?u.requiredValidator:e(ae)],accept:"image/*",label:"File input"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):h("",!0),e(n).statut=="REPORTE"?(v(),R("div",qt,[l(A,{class:"d-flex align-center justify-center"},{default:s(()=>[l(b,{md:"6",cols:"12"},{default:s(()=>[l(k,{modelValue:e(n).date,"onUpdate:modelValue":c[1]||(c[1]=a=>e(n).date=a),rules:["requiredValidator"in u?u.requiredValidator:e(ae)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):h("",!0),t("div",null,[l(A,{class:"d-flex align-center justify-center"},{default:s(()=>[l(b,{md:"6",cols:"12"},{default:s(()=>[l(f,{modelValue:e(n).commentaire,"onUpdate:modelValue":c[2]||(c[2]=a=>e(n).commentaire=a),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE"].includes(e(n).statut)?["requiredValidator"in u?u.requiredValidator:e(ae)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),l(A,null,{default:s(()=>[l(b,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[l(U,{color:"secondary",onClick:c[3]||(c[3]=a=>V.value=!1)},{default:s(()=>c[4]||(c[4]=[N(" retour ")])),_:1}),l(U,{loading:e(T)==e(n).statut,onClick:D},{default:s(()=>c[5]||(c[5]=[N(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):(v(),S(A,{key:0,class:"text-center v-row m-0"},{default:s(()=>[(v(!0),R(Re,null,Pe(e(F),(a,q)=>(v(),S(b,{key:q,cols:"6"},{default:s(()=>[l(U,{color:a.color,loading:e(T)==a.statut,style:{width:"inherit"},onClick:Q=>z(a.statut)},{default:s(()=>[N(p(a.text),1)]),_:2},1032,["color","loading","onClick"])]),_:2},1024))),128)),e(F).length==0?(v(),R("div",Ut," Aucune action requise ")):h("",!0)]),_:1}))}}},jt={key:0,class:"text-end position-absolute right-0 parms-btn"},Bt={class:"text-body-1 mb-2"},Ht={class:"text-body-1 mb-2"},zt={class:"text-body-1 mb-2"},Wt={class:"text-body-1 mb-2"},Yt={class:"text-body-1 mb-2"},Gt={class:"text-body-1 mb-2"},Kt={class:"text-body-1 mb-2"},Qt={class:"text-body-1 mb-2"},Jt={class:"text-body-1 mb-2"},Xt={class:"text-body-1 mb-2"},Zt={class:"text-body-1 mb-2"},el={class:"text-body-1 mb-2"},tl={class:"text-body-1 mb-2"},ll={class:"text-body-1 mb-2"},sl={class:"text-body-1 mb-2"},al={__name:"showColis",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(C,{emit:d}){let r,g;const O=C,y=d;let V={id:"",nom_vendeur:"",tel_vendeur:"",tarif_id:"",commentaire_vendeur:"",code_ramassage:"",frais_livreur:"",adresse:"",livreur:"",livreur_id:"",tel_livreur:"",statut:"",vendeur:"",colisHistories:[]};const w=([r,g]=le(()=>W("/api/ramasseurs").then(f=>f.data)),r=await r,g(),r),n=m(structuredClone(Ce(V))),T=m(!1),z=async f=>{T.value=!0,await W("/api/colis/"+f).then(async a=>{a.status===200&&(n.value=a.data),T.value=!1}).catch(a=>{T.value=!1,a.response&&a.response.status===422?j.error(a.response.data.message):j.error("something wrong")})};pe(()=>O.id,f=>{z(f)},{immediate:!0});const D=()=>{y("update:isShowItem",!1),y("fetchItems"),n.value=structuredClone(Ce(V))},L=H("gestionnaire","action"),I=m("Actions"),F=["tabler-adjustments-share","tabler-logs"],u=m(!1),c=m(!1),k=async()=>{c.value=!0,await W({method:"POST",url:"/api/parametrerColis",data:{id:n.value.id,livreur_id:n.value.livreur_id,frais_livreur:n.value.frais_livreur}}).then(async f=>{f.status===200&&(j.success(f.data),z(n.value.id)),c.value=!1}).catch(f=>{c.value=!1,f.response&&f.response.status===422?j.error(f.response.data.message):j.error("something wrong")})};return(f,a)=>{const q=Te,Q=Mt,P=ut,M=Ae,Z=$e,ee=ot;return v(),S(De,{width:f.$vuetify.display.smAndDown?"auto":900,"model-value":O.isShowItem,"onUpdate:modelValue":D},{default:s(()=>[l(q,{onClick:D}),l(ee,{title:"Details Colis",style:{overflow:"scroll","max-height":"90vh"},loading:e(T),"no-actions":""},{default:s(()=>[l(K,null,{default:s(()=>[ke(l(G,null,{default:s(()=>[e(L)?(v(),R("div",jt,[l(U,{icon:"",class:"rounded-0",onClick:a[0]||(a[0]=E=>u.value=!0)},{default:s(()=>[l(oe,{size:"22",icon:"tabler-settings"})]),_:1})])):h("",!0),l(A,null,{default:s(()=>[l(b,{cols:"12",lg:"6"},{default:s(()=>[l(K,{title:"Informations colis"},{default:s(()=>[l(G,null,{default:s(()=>[l(Se,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[7]||(a[7]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),t("td",null,[t("p",Bt,p(e(n).code),1)])]),t("tr",null,[a[8]||(a[8]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Livreur : ")],-1)),t("td",null,[t("p",Ht,p(e(n).livreur),1)])]),t("tr",null,[a[9]||(a[9]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Livreur : ")],-1)),t("td",null,[t("p",zt,p(e(n).tel_livreur),1)])]),t("tr",null,[a[10]||(a[10]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramassage : ")],-1)),t("td",null,[t("p",Wt,p(e(n).code_ramassage),1)])]),t("tr",null,[a[11]||(a[11]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),t("td",null,[t("p",Yt,[l(fe,se(("statutInfos"in f?f.statutInfos:e($))(e(n).statut),{density:"default",label:"",size:"small"}),null,16)])])]),t("tr",null,[a[12]||(a[12]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Prix : ")],-1)),t("td",null,[t("p",Gt,p(e(n).montant),1)])]),t("tr",null,[a[13]||(a[13]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Produit : ")],-1)),t("td",null,[t("p",Kt,p(e(n).produit),1)])]),t("tr",null,[a[14]||(a[14]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Essayage : ")],-1)),t("td",null,[t("p",Qt,p(e(n).essayage?"OUI":"NON"),1)])]),t("tr",null,[a[15]||(a[15]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ouvrir : ")],-1)),t("td",null,[t("p",Jt,p(e(n).ouvrir?"OUI":"NON"),1)])]),t("tr",null,[a[16]||(a[16]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Echange : ")],-1)),t("td",null,[t("p",Xt,p(e(n).echange?"OUI":"NON"),1)])]),t("tr",null,[a[17]||(a[17]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Commentaire : ")],-1)),t("td",null,[t("p",Zt,p(e(n).commentaire_vendeur),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),l(b,{cols:"12",lg:"6"},{default:s(()=>[l(K,{title:"Informations client"},{default:s(()=>[l(G,null,{default:s(()=>[l(Se,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[18]||(a[18]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Nom de client : ")],-1)),t("td",null,[t("p",el,p(e(n).nom_client),1)])]),t("tr",null,[a[19]||(a[19]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel de client : ")],-1)),t("td",null,[t("p",tl,p(e(n).tel_client),1)])]),t("tr",null,[a[20]||(a[20]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Distination : ")],-1)),t("td",null,[t("p",ll,p(e(n).destination),1)])]),t("tr",null,[a[21]||(a[21]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Adresse : ")],-1)),t("td",null,[t("p",sl,p(e(n).adresse),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(nt,{modelValue:e(I),"onUpdate:modelValue":a[1]||(a[1]=E=>x(I)?I.value=E:null),grow:"",class:"disable-tab-transition",stacked:""},{default:s(()=>[(v(),R(Re,null,Pe(F,(E,ie)=>l(it,{key:ie},{default:s(()=>[l(oe,{size:"40",icon:E},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),l(rt,{modelValue:e(I),"onUpdate:modelValue":a[3]||(a[3]=E=>x(I)?I.value=E:null),class:"mt-3"},{default:s(()=>[l(Ee,null,{default:s(()=>[l(Q,{id:e(n).id,"current-statut":e(n).statut,onGetItemData:a[2]||(a[2]=E=>z(e(n).id))},null,8,["id","current-statut"])]),_:1}),l(Ee,null,{default:s(()=>[l(P,{histories:e(n).colisHistories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[Ie,!e(u)]]),e(L)?ke((v(),S(G,{key:0},{default:s(()=>[l(A,null,{default:s(()=>[l(b,{md:"6",cols:"12"},{default:s(()=>[l(M,{modelValue:e(n).livreur_id,"onUpdate:modelValue":a[4]||(a[4]=E=>e(n).livreur_id=E),placeholder:"Livreurs",label:"Livreurs",items:e(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),l(b,{cols:"12",md:"6"},{default:s(()=>[l(Z,{modelValue:e(n).frais_livreur,"onUpdate:modelValue":a[5]||(a[5]=E=>e(n).frais_livreur=E),rules:["requiredValidator"in f?f.requiredValidator:e(ae)],label:"Frais de livreur",type:"number",placeholder:"Frais de livreur"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(A,null,{default:s(()=>[l(b,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[l(U,{color:"secondary",onClick:a[6]||(a[6]=E=>u.value=!1)},{default:s(()=>a[22]||(a[22]=[N(" retour ")])),_:1}),l(U,{loading:e(c),onClick:k},{default:s(()=>a[23]||(a[23]=[N(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[Ie,e(u)]]):h("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},ol=Ue(al,[["__scopeId","data-v-0da76dda"]]),nl={class:"d-flex flex-wrap gap-4 ma-6"},il={class:"d-flex gap-4 flex-wrap align-center"},rl={key:1},ul={key:0},Gl={__name:"list",async setup(C){let d,r;const g=m(!1),O=m([{title:"Aujourd'hui",value:"today"},{title:"Hier",value:"yesterday"},{title:"La semaine dernière",value:"lastWeek"},{title:"Ce mois",value:"thisMonth"},{title:"Le mois précédent",value:"lastMonth"},{title:"Personnalisé",value:"custom"}]),y=H("gestionnaire","action"),V=m(),w=m(),n=m("today"),T=()=>{const _=new Date;switch(g.value=n.value==="custom",n.value){case"today":V.value=_.toISOString().split("T")[0],w.value=_.toISOString().split("T")[0];break;case"yesterday":const o=te(_,-1);V.value=o.toISOString().split("T")[0],w.value=o.toISOString().split("T")[0];break;case"lastWeek":V.value=dt(te(_,-7)).toISOString().split("T")[0],w.value=Pt(te(_,-7)).toISOString().split("T")[0];break;case"thisMonth":V.value=me(_).toISOString().split("T")[0],w.value=Oe(_).toISOString().split("T")[0];break;case"lastMonth":const B=te(me(_),-1);V.value=me(B).toISOString().split("T")[0],w.value=Oe(B).toISOString().split("T")[0];break}};T();const z=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],D=m(),L=m(),I=m(),F=m(),u=m(),c=m(),k=m(!1),f=m(!1),a=m(),q=m(!1),Q=m(),P=m(5),M=m(1),Z=m(),ee=m(),E=_=>{var o,B;Z.value=(o=_.sortBy[0])==null?void 0:o.key,ee.value=(B=_.sortBy[0])==null?void 0:B.order},ie=_=>{q.value=!0,Q.value=_},Le=_=>{f.value=!0,a.value=_},Fe=([d,r]=le(()=>W("/api/ramasseurs").then(_=>_.data)),d=await d,r(),d),qe=([d,r]=le(()=>W("/api/vendeurs").then(_=>_.data)),d=await d,r(),d),Me=async()=>{let _="/api/colis/"+a.value.id;k.value=!0,W({method:"DELETE",url:_}).then(async o=>{o.status===200&&(f.value=!1,j.success(o.data),_e()),k.value=!1}).catch(o=>{k.value=!1})},{data:ve,error:dl,statusCode:ml,isFetching:je,execute:_e}=([d,r]=le(()=>ct(Ke("/api/colis",{query:{livreur_id:u,vendeur_id:c,begin_date:V,end_date:w,code:D,statut:L,nom_client:I,tel_client:F,page:M,itemsPerPage:P,sortBy:Z,orderBy:ee}}))),d=await d,r(),d),be=Ze(),Be=ce(()=>ve.value.items),ge=ce(()=>ve.value.total),J=m(!1),Ve=m(0),ye=m(0),He=_=>{ye.value=_.id,Ve.value++,J.value=!0};return(_,o)=>{const B=Je,re=Ae,ue=$e,we=Ne,xe=et("IconBtn"),ze=Ge,We=Te;return v(),R("div",null,[l(K,{title:"Filtres",class:"mb-6 d-print-none"},{default:s(()=>[l(G,null,{default:s(()=>[l(A,null,{default:s(()=>[e(y)?(v(),S(b,{key:0,cols:"12",sm:"3"},{default:s(()=>[l(B,{modelValue:e(c),"onUpdate:modelValue":o[0]||(o[0]=i=>x(c)?c.value=i:null),placeholder:"Vendeurs",items:e(qe),clearable:"","clear-icon":"tabler-x",autocomplete:"no-autocompeletse"},null,8,["modelValue","items"])]),_:1})):h("",!0),e(y)?(v(),S(b,{key:1,cols:"12",sm:"3"},{default:s(()=>[l(B,{modelValue:e(u),"onUpdate:modelValue":o[1]||(o[1]=i=>x(u)?u.value=i:null),placeholder:"Livreurs",items:e(Fe),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):h("",!0),l(b,{cols:"12",sm:"3"},{default:s(()=>[l(re,{modelValue:e(L),"onUpdate:modelValue":o[2]||(o[2]=i=>x(L)?L.value=i:null),placeholder:"Statut",items:e(Qe),clearable:"","clear-icon":"tabler-x"},{item:s(({item:i,props:X})=>[l(de,se(X,{title:e($)(i.value).text}),null,16,["title"])]),selection:s(({item:i})=>[N(p(e($)(i.value).text),1)]),_:1},8,["modelValue","items"])]),_:1}),l(b,{cols:"12",sm:"2"},{default:s(()=>[l(ue,{modelValue:e(D),"onUpdate:modelValue":o[3]||(o[3]=i=>x(D)?D.value=i:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),l(b,{cols:"12",sm:"2"},{default:s(()=>[l(ue,{modelValue:e(I),"onUpdate:modelValue":o[4]||(o[4]=i=>x(I)?I.value=i:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),l(b,{cols:"12",sm:"2"},{default:s(()=>[l(ue,{modelValue:e(F),"onUpdate:modelValue":o[5]||(o[5]=i=>x(F)?F.value=i:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1}),l(A,null,{default:s(()=>[l(b,{cols:"12",sm:"3"},{default:s(()=>[l(re,{modelValue:e(n),"onUpdate:modelValue":[o[6]||(o[6]=i=>x(n)?n.value=i:null),T],placeholder:"Plage de dates",items:e(O),label:e(V)+" - "+e(w)},null,8,["modelValue","items","label"])]),_:1}),e(g)?(v(),S(b,{key:0,cols:"12",sm:"3"},{default:s(()=>[l(we,{modelValue:e(V),"onUpdate:modelValue":o[7]||(o[7]=i=>x(V)?V.value=i:null),label:"Début",placeholder:"date"},null,8,["modelValue"])]),_:1})):h("",!0),e(g)?(v(),S(b,{key:1,cols:"12",sm:"3"},{default:s(()=>[l(we,{modelValue:e(w),"onUpdate:modelValue":o[8]||(o[8]=i=>x(w)?w.value=i:null),label:"Fin",placeholder:"date"},null,8,["modelValue"])]),_:1})):h("",!0)]),_:1})]),_:1}),l(Y),t("div",nl,[l(vt),t("div",il,[l(re,{modelValue:e(P),"onUpdate:modelValue":o[9]||(o[9]=i=>x(P)?P.value=i:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e(H)("create","colis")?(v(),S(U,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:o[10]||(o[10]=i=>e(be).push({name:"colis-add"}))},{default:s(()=>o[19]||(o[19]=[N(" Ajouter Colis ")])),_:1})):h("",!0)])]),l(Y,{class:"mt-4"}),l(Ye,{"items-per-page":e(P),"onUpdate:itemsPerPage":o[12]||(o[12]=i=>x(P)?P.value=i:null),page:e(M),"onUpdate:page":o[13]||(o[13]=i=>x(M)?M.value=i:null),loading:e(je),headers:z,items:e(Be),"items-length":e(ge),class:"text-no-wrap",locale:"fr","onUpdate:options":E},{"item.code":s(({item:i})=>[e(H)("show","colis")?(v(),S(U,{key:0,variant:"text",onClick:X=>He(i)},{default:s(()=>[N(p(i.code),1)]),_:2},1032,["onClick"])):(v(),R("span",rl,p(i.code),1))]),"item.statut":s(({item:i})=>[l(fe,se(e($)(i.statut),{density:"default",label:"",size:"small"}),null,16),i.statut_retour?(v(),R("span",ul,[o[20]||(o[20]=N(" - ")),l(fe,se(e($)(i.statut_retour),{density:"default",label:"",size:"small"}),null,16)])):h("",!0)]),"item.actions":s(({item:i})=>[t("div",null,[e(H)("update","colis")&&i.statut=="EN_ATTENTE"?(v(),S(xe,{key:0,onClick:X=>e(be).push("/colis/"+i.id)},{default:s(()=>[l(oe,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):h("",!0),l(xe,null,{default:s(()=>[l(oe,{icon:"tabler-dots-vertical"}),l(_t,{activator:"parent"},{default:s(()=>[l(ft,null,{default:s(()=>[l(de,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:X=>ie(i)},{default:s(()=>o[21]||(o[21]=[N(" Print ")])),_:2},1032,["onClick"]),e(H)("delete","colis")&&i.statut=="EN_ATTENTE"?(v(),S(de,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:X=>Le(i)},{default:s(()=>o[22]||(o[22]=[N(" Delete ")])),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:s(()=>[l(ze,{page:e(M),"onUpdate:page":o[11]||(o[11]=i=>x(M)?M.value=i:null),"items-per-page":e(P),"total-items":e(ge)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),l(De,{modelValue:e(f),"onUpdate:modelValue":o[16]||(o[16]=i=>x(f)?f.value=i:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[l(We,{onClick:o[14]||(o[14]=i=>f.value=!e(f))}),l(K,{title:"Êtes-vous sûr de vouloir supprimer le colis "+e(a).code+" ?"},{default:s(()=>[l(G,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[l(U,{color:"secondary",variant:"tonal",onClick:o[15]||(o[15]=i=>f.value=!1)},{default:s(()=>o[23]||(o[23]=[N(" Non ")])),_:1}),l(U,{loading:e(k),onClick:Me},{default:s(()=>o[24]||(o[24]=[N(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),e(q)?(v(),S(Rt,{key:0,"is-print-colis":e(q),"onUpdate:isPrintColis":o[17]||(o[17]=i=>x(q)?q.value=i:null),item:e(Q)},null,8,["is-print-colis","item"])):h("",!0),e(J)?(v(),S(ol,{id:e(ye),key:e(Ve),"is-show-item":e(J),"onUpdate:isShowItem":o[18]||(o[18]=i=>x(J)?J.value=i:null),onFetchItems:e(_e)},null,8,["id","is-show-item","onFetchItems"])):h("",!0)])}}};export{Gl as default};
