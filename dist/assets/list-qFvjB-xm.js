import{_ as G}from"./DialogCloseBtn-DYkDxoTT.js";import{V as ne,a as ie,c as re,_ as de}from"./VDataTableServer-CfDYCTqh.js";import{_ as ue}from"./AppSelect-y6FoQWxb.js";import{_ as me}from"./AppTextField-CmS8k3i0.js";import{V as pe}from"./VNodeRenderer-BLvBNL9H.js";import{o as k,f as P,e as l,b as e,ai as $,t as x,d as s,m as o,H as M,v as d,r as i,aq as ce,Y as Q,c as fe,ak as u,y as D,$ as z,j as _e,a as ve,A as I}from"./index-DPEARWyz.js";import{Q as ge}from"./qrcode.vue.esm-mZ9N0P1f.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N,a as f}from"./VRow-Dfw-41Up.js";import{V as O}from"./VCard-B2jYeW2D.js";import{V as w}from"./VDivider-hzcI50H3.js";import{V as J}from"./VDialog-7lteG5Ac.js";import{$ as be}from"./api-DhWGbEVG.js";import{t as Ce}from"./toast-qMdeGvQh.js";import{u as ye}from"./index-_IxcGEJc.js";import{V as H}from"./VCardText-f7-Kcvw5.js";import{V as xe}from"./VSpacer-BqhLF761.js";import{V as we}from"./VMenu-CLGsvIgf.js";import{V as ke,a as Y}from"./VList-bbfuGvOt.js";import"./VSelect-CBQXVdf1.js";import"./VTextField-euNnZfEI.js";import"./VImg-B5j7I_AE.js";import"./forwardRefs-DWGaNmQL.js";import"./VOverlay-CFFYPqc7.js";import"./VAvatar-BH_YnDZc.js";import"./VChip-D585xh2w.js";import"./filter-CCjRknBQ.js";/* empty css              */const he={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Pe={class:"d-flex align-center app-logo"},$e={class:"app-logo-title"},Ne={class:"d-flex align-center"},Ue={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},Be={class:"mb-0"},De={class:"mb-0"},Ie={class:"mb-0"},Oe={class:"mb-0"},Te={class:"mb-0"},je={class:"text-base"},Ae={class:"text-no-wrap"},Se={class:"text-no-wrap"},Re={class:"mb-0"},qe={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis","update:rolePermissions","fetchItems"],setup(T,{emit:V}){const n=T,U=V,b=()=>{window.print()},_=()=>{U("update:isPrintColis",!1)};return(C,r)=>{const y=G;return k(),P(J,{width:C.$vuetify.display.smAndDown?"auto":400,"model-value":n.isPrintColis,"onUpdate:modelValue":_},{default:l(()=>[e(y,{class:"d-print-none",onClick:_}),e(N,null,{default:l(()=>[e(f,{class:"d-print-none",cols:"12",md:"12"},{default:l(()=>[e($,{color:"primary",class:"flex-grow-1",onClick:b},{default:l(()=>r[0]||(r[0]=[x(" Print ")])),_:1})]),_:1}),e(f,{cols:"12",md:"12",class:"ticket"},{default:l(()=>[e(O,{class:"props.item-preview-wrapper"},{default:l(()=>[s("div",he,[s("div",null,[s("div",Pe,[e(o(pe),{nodes:o(M).app.logo},null,8,["nodes"]),s("h6",$e,d(o(M).app.title),1)])]),s("div",Ne,d(n.item.destination),1)]),e(w,{class:"border-solid"}),e(N,{class:"print-row mb-1"},{default:l(()=>[e(f,{class:"text-no-wrap"},{default:l(()=>[s("div",Ue,[s("div",null,[s("p",Be," Code : "+d(n.item.code),1),s("p",De," Nom : "+d(n.item.nom_client),1),s("p",Ie," tel : "+d(n.item.tel_client),1)]),s("div",null,[s("p",Oe,[e(ge,{size:"70",value:n.item.code},null,8,["value"])])])]),s("p",Te," Adresse : "+d(n.item.adresse),1)]),_:1})]),_:1}),e(w,{class:"border-solid"}),e(ne,{class:"props.item-preview-table border text-high-emphasis overflow-hidden mb-1"},{default:l(()=>[r[1]||(r[1]=s("thead",null,[s("tr",null,[s("th",{scope:"col"}," Produits "),s("th",{scope:"col"}," Montant ")])],-1)),s("tbody",je,[s("tr",null,[s("td",Ae,d(n.item.produit),1),s("td",Se,d(n.item.montant),1)])])]),_:1}),e(w,{class:"border-solid"}),e(N,{class:"align-right"},{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[s("p",Re," essayage : "+d(n.item.essayage?"OUI":"NON")+" | ouvrir : "+d(n.item.ouvrir?"OUI":"NON")+" | echange : "+d(n.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),e(w,{class:"border-solid"}),r[2]||(r[2]=s("p",{class:"mb-0"},[s("span",{class:"text-high-emphasis font-weight-medium me-1"}," Remarque: "),s("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ee=Ve(qe,[["__scopeId","data-v-24dc26a6"]]),Fe={class:"d-flex flex-wrap gap-4 ma-6"},Le={class:"d-flex gap-4 flex-wrap align-center"},bt={__name:"list",async setup(T){let V,n;const U=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"actions",key:"actions",sortable:!1}],b=i(),_=i(),C=i(),r=i(),y=i(!1),p=i(!1),B=i(),h=i(!1),j=i(),c=i(5),v=i(1),A=i(),S=i(),K=m=>{var t,g;A.value=(t=m.sortBy[0])==null?void 0:t.key,S.value=(g=m.sortBy[0])==null?void 0:g.order},W=m=>{h.value=!0,j.value=m},X=m=>{p.value=!0,B.value=m},Z=async()=>{let m="/api/colis/"+B.value.id;y.value=!0,be({method:"DELETE",url:m}).then(async t=>{t.status===200&&(p.value=!1,Ce.success(t.data),te()),y.value=!1}).catch(t=>{y.value=!1})},{data:R,error:Me,statusCode:Qe,isFetching:ee,execute:te}=([V,n]=ce(()=>ye(re("/api/colis",{query:{code:b,statut:_,nom_client:C,tel_client:r,page:v,itemsPerPage:c,sortBy:A,orderBy:S}}))),V=await V,n(),V),q=_e(),le=Q(()=>R.value.items),E=Q(()=>R.value.total);return(m,t)=>{const g=me,se=ue,F=ve("IconBtn"),oe=de,ae=G;return k(),fe("div",null,[e(O,{title:"Filtres",class:"mb-6"},{default:l(()=>[e(H,null,{default:l(()=>[e(N,null,{default:l(()=>[e(f,{cols:"12",sm:"2"},{default:l(()=>[e(g,{modelValue:o(_),"onUpdate:modelValue":t[0]||(t[0]=a=>u(_)?_.value=a:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:l(()=>[e(g,{modelValue:o(b),"onUpdate:modelValue":t[1]||(t[1]=a=>u(b)?b.value=a:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:l(()=>[e(g,{modelValue:o(C),"onUpdate:modelValue":t[2]||(t[2]=a=>u(C)?C.value=a:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:l(()=>[e(g,{modelValue:o(r),"onUpdate:modelValue":t[3]||(t[3]=a=>u(r)?r.value=a:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w),s("div",Fe,[e(xe),s("div",Le,[e(se,{modelValue:o(c),"onUpdate:modelValue":t[4]||(t[4]=a=>u(c)?c.value=a:null),items:[5,10,20,25,50]},null,8,["modelValue"]),o(I)("create","colis")?(k(),P($,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:t[5]||(t[5]=a=>o(q).push({name:"colis-add"}))},{default:l(()=>t[13]||(t[13]=[x(" Ajouter Colis ")])),_:1})):D("",!0)])]),e(w,{class:"mt-4"}),e(ie,{"items-per-page":o(c),"onUpdate:itemsPerPage":t[7]||(t[7]=a=>u(c)?c.value=a:null),page:o(v),"onUpdate:page":t[8]||(t[8]=a=>u(v)?v.value=a:null),loading:o(ee),headers:U,items:o(le),"items-length":o(E),class:"text-no-wrap",locale:"fr","onUpdate:options":K},{"item.actions":l(({item:a})=>[o(I)("update","colis")?(k(),P(F,{key:0,onClick:L=>o(q).push("/colis/"+a.id)},{default:l(()=>[e(z,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):D("",!0),e(F,null,{default:l(()=>[e(z,{icon:"tabler-dots-vertical"}),e(we,{activator:"parent"},{default:l(()=>[e(ke,null,{default:l(()=>[e(Y,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:L=>W(a)},{default:l(()=>t[14]||(t[14]=[x(" Print ")])),_:2},1032,["onClick"]),o(I)("delete","colis")?(k(),P(Y,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:L=>X(a)},{default:l(()=>t[15]||(t[15]=[x(" Delete ")])),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:l(()=>[e(oe,{page:o(v),"onUpdate:page":t[6]||(t[6]=a=>u(v)?v.value=a:null),"items-per-page":o(c),"total-items":o(E)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),e(J,{modelValue:o(p),"onUpdate:modelValue":t[11]||(t[11]=a=>u(p)?p.value=a:null),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(ae,{onClick:t[9]||(t[9]=a=>p.value=!o(p))}),e(O,{title:"Êtes-vous sûr de vouloir supprimer le colis "+o(B).code+" ?"},{default:l(()=>[e(H,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e($,{color:"secondary",variant:"tonal",onClick:t[10]||(t[10]=a=>p.value=!1)},{default:l(()=>t[16]||(t[16]=[x(" Non ")])),_:1}),e($,{loading:o(y),onClick:Z},{default:l(()=>t[17]||(t[17]=[x(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),e(Ee,{"is-print-colis":o(h),"onUpdate:isPrintColis":t[12]||(t[12]=a=>u(h)?h.value=a:null),item:o(j)},null,8,["is-print-colis","item"])]),_:1})])}}};export{bt as default};
