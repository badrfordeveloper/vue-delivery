import{V as Y,r as B}from"./VForm-CMCpW6Fd.js";import{ad as G,o as _,c as S,F as j,h as J,b as a,e as r,$ as z,m as s,ai as D,aI as Q,a1 as Z,a2 as W,a3 as X,aJ as ee,aK as ae,aL as te,a4 as le,aM as oe,a5 as se,a6 as re,a7 as ne,aN as ie,a8 as ue,am as de,Y as w,aO as ce,aP as me,aQ as fe,aR as ve,aS as pe,ae as ge,aT as ye,aa as be,ac as Ve,Z as ke,ab as he,aU as _e,aw as $,q as xe,r as p,d as c,v as Ce,ah as Pe,f as we,y as Ie,t as Se,i as De,j as Le,H as R,aV as I,at as Te}from"./index-DD7JbDxk.js";import{_ as Ae}from"./AppTextField-oLCXZWk_.js";import{u as q,m as Be,a as $e}from"./misc-mask-light-BnxoZZ3f.js";import{V as Re}from"./VNodeRenderer-Dt9hsGcF.js";import{$ as qe}from"./api-DoENDU7p.js";import{a as g,V as F}from"./VRow-DLetuWDj.js";import{V as Fe}from"./VCard-BRUBZ8oR.js";import{V as E}from"./VCardText-BL_NRqOR.js";import{c as Ee}from"./VAvatar-BfkrWQxM.js";import{V as M}from"./VDivider-C_ZVXRZC.js";import"./VTextField-D4UJrYDN.js";import"./VImg-9WcrJedd.js";import"./forwardRefs-DWGaNmQL.js";import"./toast-CUbcpQy7.js";/* empty css              */const Me={class:"d-flex justify-center flex-wrap gap-1"},je={__name:"AuthProvider",setup(e){const{global:u}=G(),y=[{icon:"tabler-brand-facebook-filled",color:"#4267b2",colorInDark:"#497CE2"},{icon:"tabler-brand-twitter-filled",color:"#1da1f2",colorInDark:"#1da1f2"},{icon:"tabler-brand-github-filled",color:"#272727",colorInDark:"#fff"},{icon:"tabler-brand-google-filled",color:"#dd4b39",colorInDark:"#db4437"}];return(t,f)=>(_(),S("div",Me,[(_(),S(j,null,J(y,n=>a(D,{key:n.icon,icon:"",variant:"text",size:"small",color:s(u).name.value==="dark"?n.colorInDark:n.color},{default:r(()=>[a(z,{size:"20",icon:n.icon},null,8,["icon"])]),_:2},1032,["color"])),64))]))}},ze="/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",Ne="/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",Oe="/assets/auth-v2-login-illustration-dark-ClExSVqL.png",Ue="/assets/auth-v2-login-illustration-light-C4sKfRS1.png",He=()=>Q(),Ke=Ee("v-alert-title"),Ye=["success","info","warning","error"],Ge=Z({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:W,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ye.includes(e)},...X(),...ee(),...ae(),...te(),...le(),...oe(),...se(),...re(),...ne(),...ie({variant:"flat"})},"VAlert"),Je=ue()({name:"VAlert",props:Ge(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,u){let{emit:y,slots:t}=u;const f=de(e,"modelValue"),n=w(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),d=w(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:h}=ce(e),{colorClasses:b,colorStyles:m,variantClasses:V}=me(d),{densityClasses:x}=fe(e),{dimensionStyles:C}=ve(e),{elevationClasses:o}=pe(e),{locationStyles:l}=ge(e),{positionClasses:v}=ye(e),{roundedClasses:i}=be(e),{textColorClasses:N,textColorStyles:O}=Ve(ke(e,"borderColor")),{t:U}=he(),L=w(()=>({"aria-label":U(e.closeLabel),onClick(P){f.value=!1,y("click:close",P)}}));return()=>{const P=!!(t.prepend||n.value),H=!!(t.title||e.title),K=!!(t.close||e.closable);return f.value&&a(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,b.value,x.value,o.value,v.value,i.value,V.value,e.class],style:[m.value,C.value,l.value,e.style],role:"alert"},{default:()=>{var T,A;return[_e(!1,"v-alert"),e.border&&a("div",{key:"border",class:["v-alert__border",N.value],style:O.value},null),P&&a("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?a($,{key:"prepend-defaults",disabled:!n.value,defaults:{VIcon:{density:e.density,icon:n.value,size:e.prominent?44:28}}},t.prepend):a(z,{key:"prepend-icon",density:e.density,icon:n.value,size:e.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[H&&a(Ke,{key:"title"},{default:()=>{var k;return[((k=t.title)==null?void 0:k.call(t))??e.title]}}),((T=t.text)==null?void 0:T.call(t))??e.text,(A=t.default)==null?void 0:A.call(t)]),t.append&&a("div",{key:"append",class:"v-alert__append"},[t.append()]),K&&a("div",{key:"close",class:"v-alert__close"},[t.close?a($,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var k;return[(k=t.close)==null?void 0:k.call(t,{props:L.value})]}}):a(D,xe({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},L.value),null)])]}})}}}),Qe={href:"javascript:void(0)"},Ze={class:"auth-logo d-flex align-center gap-x-3"},We={class:"auth-title"},Xe={class:"position-relative bg-background w-100 me-0"},ea=["src"],ya={__name:"login",setup(e){const u=p(!1);q(Ue,Oe,Ne,ze,!0);const y=q($e,Be),t=He(),f=De(),n=Le(),d=p({email:"admin@gmail.com",password:"",remember:!1}),h=p(),b=p(!1),m=p(!1),V=p(!1),x=async()=>{try{m.value=!1,V.value=!0,qe.post("/api/auth/login",{email:d.value.email,password:d.value.password}).then(async o=>{const{accessToken:l,userData:v,userAbilityRules:i}=o.data;I("userAbilityRules").value=i,t.update(i),I("userData").value=v,I("accessToken").value=l,m.value=!1,await Te(()=>{n.replace(f.query.to?String(f.query.to):"/")})}).catch(o=>{o.status===403?(b.value=o.response.data.message,m.value=!0):o.status===422&&(b.value="Email ou mot de passe est incorrect",m.value=!0),console.log("error login")}).then(()=>{V.value=!1})}catch(o){console.error(o)}},C=()=>{var o;(o=h.value)==null||o.validate().then(({valid:l})=>{l&&x()})};return(o,l)=>{const v=Ae;return _(),S(j,null,[c("a",Qe,[c("div",Ze,[a(s(Re),{nodes:s(R).app.logo},null,8,["nodes"]),c("h1",We,Ce(s(R).app.title),1)])]),a(F,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:r(()=>[a(g,{md:"8",class:"d-none d-md-flex"},{default:r(()=>[c("div",Xe,[c("img",{class:"auth-footer-mask flip-in-rtl",src:s(y),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ea)])]),_:1}),a(g,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:r(()=>[a(Fe,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:r(()=>[a(E,null,{default:r(()=>l[3]||(l[3]=[c("h4",{class:"text-h4 mb-1"}," Login ",-1)])),_:1}),a(E,null,{default:r(()=>[a(Y,{ref_key:"refVForm",ref:h,onSubmit:Pe(C,["prevent"])},{default:r(()=>[a(F,null,{default:r(()=>[s(m)?(_(),we(Je,{key:0,title:s(b),type:"error"},null,8,["title"])):Ie("",!0),a(g,{cols:"12"},{default:r(()=>[a(v,{modelValue:s(d).email,"onUpdate:modelValue":l[0]||(l[0]=i=>s(d).email=i),rules:["requiredValidator"in o?o.requiredValidator:s(B)],autofocus:"",label:"Email",type:"email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),a(g,{cols:"12"},{default:r(()=>[a(v,{modelValue:s(d).password,"onUpdate:modelValue":l[1]||(l[1]=i=>s(d).password=i),rules:["requiredValidator"in o?o.requiredValidator:s(B)],label:"Mot de passe",placeholder:"············",type:s(u)?"text":"password",autocomplete:"password","append-inner-icon":s(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[2]||(l[2]=i=>u.value=!s(u))},null,8,["modelValue","rules","type","append-inner-icon"]),l[5]||(l[5]=c("div",{class:"my-5"},null,-1)),a(D,{loading:s(V),block:"",type:"submit"},{default:r(()=>l[4]||(l[4]=[Se(" Login ")])),_:1},8,["loading"])]),_:1}),a(g,{cols:"12",class:"d-flex align-center"},{default:r(()=>[a(M),l[6]||(l[6]=c("span",{class:"mx-4"},"or",-1)),a(M)]),_:1}),a(g,{cols:"12",class:"text-center"},{default:r(()=>[a(je)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{ya as default};
