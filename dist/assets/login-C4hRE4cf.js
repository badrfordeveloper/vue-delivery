import{V as $,_ as A,$ as R}from"./VForm-DQMljFbV.js";import{ad as B,o as h,c as b,F as I,h as F,b as e,e as t,$ as S,m as o,ai as D,aq as j,r as f,d as l,v as q,ah as M,t as E,i as N,j as P,H as v,ar as g,as as z}from"./index-CYgQ0Z2O.js";import{u as k,m as H,a as U}from"./misc-mask-light-ttoIy-oz.js";import{V as G}from"./VNodeRenderer-CfNKUU8n.js";import{a as u,V as x}from"./VRow-m1DlvMAF.js";import{V as K}from"./VCard-gym5Q0Sa.js";import{V as y}from"./VCardText-Bfr1m3sT.js";import{V as w}from"./VDivider-Bv2ruP78.js";import"./VTextField-CVdfMF41.js";import"./VImg-BkIQRyzS.js";import"./forwardRefs-DWGaNmQL.js";import"./toast-CF5eeRSm.js";/* empty css              */import"./VAvatar-BitIUFO-.js";const Y={class:"d-flex justify-center flex-wrap gap-1"},J={__name:"AuthProvider",setup(C){const{global:n}=B(),m=[{icon:"tabler-brand-facebook-filled",color:"#4267b2",colorInDark:"#497CE2"},{icon:"tabler-brand-twitter-filled",color:"#1da1f2",colorInDark:"#1da1f2"},{icon:"tabler-brand-github-filled",color:"#272727",colorInDark:"#fff"},{icon:"tabler-brand-google-filled",color:"#dd4b39",colorInDark:"#db4437"}];return(V,p)=>(h(),b("div",Y,[(h(),b(I,null,F(m,i=>e(D,{key:i.icon,icon:"",variant:"text",size:"small",color:o(n).name.value==="dark"?i.colorInDark:i.color},{default:t(()=>[e(S,{size:"20",icon:i.icon},null,8,["icon"])]),_:2},1032,["color"])),64))]))}},O="/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",Q="/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",W="/assets/auth-v2-login-illustration-dark-ClExSVqL.png",X="/assets/auth-v2-login-illustration-light-C4sKfRS1.png",Z=()=>j(),ee={href:"javascript:void(0)"},ae={class:"auth-logo d-flex align-center gap-x-3"},te={class:"auth-title"},oe={class:"position-relative bg-background w-100 me-0"},se=["src"],_e={__name:"login",setup(C){const n=f(!1);k(X,W,Q,O,!0);const m=k(U,H),V=Z(),p=N(),i=P(),d=f({email:"admin@gmail.com",password:"admin@gmail.com",remember:!1}),_=f(),L=async()=>{try{R.post("/api/auth/login",{email:d.value.email,password:d.value.password}).then(async s=>{const{accessToken:a,userData:c,userAbilityRules:r}=s.data;g("userAbilityRules").value=r,V.update(r),g("userData").value=c,g("accessToken").value=a,await z(()=>{i.replace(p.query.to?String(p.query.to):"/")})}).catch(s=>{console.log("error login")})}catch(s){console.error(s)}},T=()=>{var s;(s=_.value)==null||s.validate().then(({valid:a})=>{a&&L()})};return(s,a)=>{const c=A;return h(),b(I,null,[l("a",ee,[l("div",ae,[e(o(G),{nodes:o(v).app.logo},null,8,["nodes"]),l("h1",te,q(o(v).app.title),1)])]),e(x,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[e(u,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[l("div",oe,[l("img",{class:"auth-footer-mask flip-in-rtl",src:o(m),alt:"auth-footer-mask",height:"280",width:"100"},null,8,se)])]),_:1}),e(u,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[e(K,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[e(y,null,{default:t(()=>a[3]||(a[3]=[l("h4",{class:"text-h4 mb-1"}," Login ",-1)])),_:1}),e(y,null,{default:t(()=>[e($,{ref_key:"refVForm",ref:_,onSubmit:M(T,["prevent"])},{default:t(()=>[e(x,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(c,{modelValue:o(d).email,"onUpdate:modelValue":a[0]||(a[0]=r=>o(d).email=r),autofocus:"",label:"Email",type:"email",placeholder:"johndoe@email.com"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(c,{modelValue:o(d).password,"onUpdate:modelValue":a[1]||(a[1]=r=>o(d).password=r),label:"Mot de passe",placeholder:"············",type:o(n)?"text":"password",autocomplete:"password","append-inner-icon":o(n)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=r=>n.value=!o(n))},null,8,["modelValue","type","append-inner-icon"]),a[5]||(a[5]=l("div",{class:"my-5"},null,-1)),e(D,{block:"",type:"submit"},{default:t(()=>a[4]||(a[4]=[E(" Login ")])),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex align-center"},{default:t(()=>[e(w),a[6]||(a[6]=l("span",{class:"mx-4"},"or",-1)),e(w)]),_:1}),e(u,{cols:"12",class:"text-center"},{default:t(()=>[e(J)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{_e as default};
