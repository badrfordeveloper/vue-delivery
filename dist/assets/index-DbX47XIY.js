import{a as A,t as b}from"./toast-Cs2lwIGd.js";import{bP as g,ax as a,bQ as C}from"./index-Cn4GOq09.js";const X=g({baseUrl:"https://backend.dropit.ma",fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:e}){const t=a("accessToken").value;return t&&(e.headers={...e.headers,Authorization:`Bearer ${t}`}),{options:e}},afterFetch(e){const{data:t,response:o}=e;console.log("response"),console.log(o);let r=null;try{r=C(t)}catch(c){console.error(c)}return{data:r,response:o}},onFetchError(e){const{data:t,response:o}=e;return o.status===401?(a("userData").value={},a("accessToken").value="",a("userAbilityRules").value=[],A.update([]),window.location.href="/login"):o.status===500&&b.error("Server error"),e}}}),P=/#/g,O=/&/g,L=/\//g,Q=/=/g,u=/\+/g,T=/%5e/gi,w=/%60/gi,v=/%7c/gi,I=/%20/gi;function U(e){return encodeURI(""+e).replace(v,"|")}function h(e){return U(typeof e=="string"?e:JSON.stringify(e)).replace(u,"%2B").replace(I,"+").replace(P,"%23").replace(O,"%26").replace(w,"`").replace(T,"^").replace(L,"%2F")}function i(e){return h(e).replace(Q,"%3D")}function E(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function j(e){return E(e.replace(u," "))}function N(e){return E(e.replace(u," "))}function S(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const o of e.split("&")){const r=o.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const c=j(r[1]);if(c==="__proto__"||c==="constructor")continue;const n=N(r[2]||"");t[c]===void 0?t[c]=n:Array.isArray(t[c])?t[c].push(n):t[c]=[t[c],n]}return t}function F(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(o=>`${i(e)}=${h(o)}`).join("&"):`${i(e)}=${h(t)}`:i(e)}function $(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>F(t,e[t])).filter(Boolean).join("&")}const k=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,B=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,D=/^([/\\]\s*){2,}[^/\\]/;function K(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?k.test(e):B.test(e)||(t.acceptRelative?D.test(e):!1)}function z(e,t){const o=G(e),r={...S(o.search),...t};return o.search=$(r),H(o)}const y=Symbol.for("ufo:protocolRelative");function G(e="",t){const o=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(o){const[,f,p=""]=o;return{protocol:f.toLowerCase(),pathname:p,href:f+p,auth:"",host:"",search:"",hash:""}}if(!K(e,{acceptRelative:!0}))return R(e);const[,r="",c,n=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,l="",s=""]=n.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(s=s.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:_,search:d,hash:m}=R(s);return{protocol:r.toLowerCase(),auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:l,pathname:_,search:d,hash:m,[y]:!r}}function R(e=""){const[t="",o="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:o,hash:r}}function H(e){const t=e.pathname||"",o=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",c=e.auth?e.auth+"@":"",n=e.host||"";return(e.protocol||e[y]?(e.protocol||"")+"//":"")+c+n+t+o+r}export{$ as s,X as u,z as w};
