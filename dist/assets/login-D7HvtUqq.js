import{V as Y,_ as G,$ as K}from"./VForm-CWdYMJf4.js";import{ad as Z,o as _,c as I,F as M,h as J,b as a,e as s,$ as j,m as o,ai as S,aq as Q,a1 as W,a2 as X,a3 as ee,ar as ae,as as te,at as le,a4 as oe,au as se,a5 as ne,a6 as re,a7 as ie,av as ue,a8 as ce,am as de,Y as w,aw as me,ax as fe,ay as ve,az as pe,aA as ge,ae as ye,aB as be,aa as ke,ac as Ve,Z as he,ab as _e,aC as xe,aD as B,q as Ce,r as p,d,v as Pe,ah as we,f as De,y as Ie,t as Se,i as Le,j as Te,H as $,aE as D,aF as Ae}from"./index-DABRHePW.js";import{u as F,m as Be,a as $e}from"./misc-mask-light-BzPTfuK5.js";import{V as Fe}from"./VNodeRenderer-BhzTki0K.js";import{a as g,V as R}from"./VRow-DSTTq9qk.js";import{V as Re}from"./VCard-Cd53vQ86.js";import{V as E}from"./VCardText-Bzu1rhbR.js";import{c as Ee}from"./VAvatar-CykQorsV.js";import{V as z}from"./VDivider-_cLGmj7R.js";import"./VTextField-D74tfuBy.js";import"./VImg-BDgjSfMx.js";import"./forwardRefs-DWGaNmQL.js";import"./toast-BuVeXtw1.js";/* empty css              */const ze={class:"d-flex justify-center flex-wrap gap-1"},Me={__name:"AuthProvider",setup(e){const{global:u}=Z(),y=[{icon:"tabler-brand-facebook-filled",color:"#4267b2",colorInDark:"#497CE2"},{icon:"tabler-brand-twitter-filled",color:"#1da1f2",colorInDark:"#1da1f2"},{icon:"tabler-brand-github-filled",color:"#272727",colorInDark:"#fff"},{icon:"tabler-brand-google-filled",color:"#dd4b39",colorInDark:"#db4437"}];return(t,f)=>(_(),I("div",ze,[(_(),I(M,null,J(y,r=>a(S,{key:r.icon,icon:"",variant:"text",size:"small",color:o(u).name.value==="dark"?r.colorInDark:r.color},{default:s(()=>[a(j,{size:"20",icon:r.icon},null,8,["icon"])]),_:2},1032,["color"])),64))]))}},je="/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",qe="/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",Ne="/assets/auth-v2-login-illustration-dark-ClExSVqL.png",He="/assets/auth-v2-login-illustration-light-C4sKfRS1.png",Oe=()=>Q(),Ue=Ee("v-alert-title"),Ye=["success","info","warning","error"],Ge=W({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:X,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ye.includes(e)},...ee(),...ae(),...te(),...le(),...oe(),...se(),...ne(),...re(),...ie(),...ue({variant:"flat"})},"VAlert"),Ke=ce()({name:"VAlert",props:Ge(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,u){let{emit:y,slots:t}=u;const f=de(e,"modelValue"),r=w(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),c=w(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:h}=me(e),{colorClasses:b,colorStyles:m,variantClasses:k}=fe(c),{densityClasses:x}=ve(e),{dimensionStyles:C}=pe(e),{elevationClasses:n}=ge(e),{locationStyles:l}=ye(e),{positionClasses:v}=be(e),{roundedClasses:i}=ke(e),{textColorClasses:q,textColorStyles:N}=Ve(he(e,"borderColor")),{t:H}=_e(),L=w(()=>({"aria-label":H(e.closeLabel),onClick(P){f.value=!1,y("click:close",P)}}));return()=>{const P=!!(t.prepend||r.value),O=!!(t.title||e.title),U=!!(t.close||e.closable);return f.value&&a(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,b.value,x.value,n.value,v.value,i.value,k.value,e.class],style:[m.value,C.value,l.value,e.style],role:"alert"},{default:()=>{var T,A;return[xe(!1,"v-alert"),e.border&&a("div",{key:"border",class:["v-alert__border",q.value],style:N.value},null),P&&a("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?a(B,{key:"prepend-defaults",disabled:!r.value,defaults:{VIcon:{density:e.density,icon:r.value,size:e.prominent?44:28}}},t.prepend):a(j,{key:"prepend-icon",density:e.density,icon:r.value,size:e.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[O&&a(Ue,{key:"title"},{default:()=>{var V;return[((V=t.title)==null?void 0:V.call(t))??e.title]}}),((T=t.text)==null?void 0:T.call(t))??e.text,(A=t.default)==null?void 0:A.call(t)]),t.append&&a("div",{key:"append",class:"v-alert__append"},[t.append()]),U&&a("div",{key:"close",class:"v-alert__close"},[t.close?a(B,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var V;return[(V=t.close)==null?void 0:V.call(t,{props:L.value})]}}):a(S,Ce({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},L.value),null)])]}})}}}),Ze={href:"javascript:void(0)"},Je={class:"auth-logo d-flex align-center gap-x-3"},Qe={class:"auth-title"},We={class:"position-relative bg-background w-100 me-0"},Xe=["src"],va={__name:"login",setup(e){const u=p(!1);F(He,Ne,qe,je,!0);const y=F($e,Be),t=Oe(),f=Le(),r=Te(),c=p({email:"admin@gmail.com",password:"admin@gmail.com",remember:!1}),h=p(),b=p(!1),m=p(!1),k=p(!1),x=async()=>{try{m.value=!1,k.value=!0,K.post("/api/auth/login",{email:c.value.email,password:c.value.password}).then(async n=>{const{accessToken:l,userData:v,userAbilityRules:i}=n.data;D("userAbilityRules").value=i,t.update(i),D("userData").value=v,D("accessToken").value=l,m.value=!1,await Ae(()=>{r.replace(f.query.to?String(f.query.to):"/")})}).catch(n=>{n.status===403?(b.value=n.response.data.message,m.value=!0):n.status===422&&(b.value="Email ou mot de passe est incorrect",m.value=!0),console.log("error login")}).then(()=>{k.value=!1})}catch(n){console.error(n)}},C=()=>{var n;(n=h.value)==null||n.validate().then(({valid:l})=>{l&&x()})};return(n,l)=>{const v=G;return _(),I(M,null,[d("a",Ze,[d("div",Je,[a(o(Fe),{nodes:o($).app.logo},null,8,["nodes"]),d("h1",Qe,Pe(o($).app.title),1)])]),a(R,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:s(()=>[a(g,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[d("div",We,[d("img",{class:"auth-footer-mask flip-in-rtl",src:o(y),alt:"auth-footer-mask",height:"280",width:"100"},null,8,Xe)])]),_:1}),a(g,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:s(()=>[a(Re,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:s(()=>[a(E,null,{default:s(()=>l[3]||(l[3]=[d("h4",{class:"text-h4 mb-1"}," Login ",-1)])),_:1}),a(E,null,{default:s(()=>[a(Y,{ref_key:"refVForm",ref:h,onSubmit:we(C,["prevent"])},{default:s(()=>[a(R,null,{default:s(()=>[o(m)?(_(),De(Ke,{key:0,title:o(b),type:"error"},null,8,["title"])):Ie("",!0),a(g,{cols:"12"},{default:s(()=>[a(v,{modelValue:o(c).email,"onUpdate:modelValue":l[0]||(l[0]=i=>o(c).email=i),autofocus:"",label:"Email",type:"email",placeholder:"johndoe@email.com"},null,8,["modelValue"])]),_:1}),a(g,{cols:"12"},{default:s(()=>[a(v,{modelValue:o(c).password,"onUpdate:modelValue":l[1]||(l[1]=i=>o(c).password=i),label:"Mot de passe",placeholder:"············",type:o(u)?"text":"password",autocomplete:"password","append-inner-icon":o(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[2]||(l[2]=i=>u.value=!o(u))},null,8,["modelValue","type","append-inner-icon"]),l[5]||(l[5]=d("div",{class:"my-5"},null,-1)),a(S,{loading:o(k),block:"",type:"submit"},{default:s(()=>l[4]||(l[4]=[Se(" Login ")])),_:1},8,["loading"])]),_:1}),a(g,{cols:"12",class:"d-flex align-center"},{default:s(()=>[a(z),l[6]||(l[6]=d("span",{class:"mx-4"},"or",-1)),a(z)]),_:1}),a(g,{cols:"12",class:"text-center"},{default:s(()=>[a(Me)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{va as default};
