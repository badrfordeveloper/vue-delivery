import{r as f,V as U}from"./VForm-B2WdQWxv.js";import{e as F,f as j}from"./constants-YGND1LPw.js";import{_ as z}from"./AppTextField-DlXfUlTR.js";import{j as P,r as y,w as C,c as V,o as p,d as t,b as e,x as g,e as o,v,n as s,F as _,h,f as T,ai as B}from"./index-Dy7Usk4l.js";import{$ as L}from"./api-I3jvlWdA.js";import{t as k}from"./toast-DuLiNZ_C.js";import{V as b,a as n}from"./VRow-TJvxsZ_y.js";import{V as S}from"./VCard-CeZuMw9F.js";import{V as $}from"./VCardText-BJYEBQo3.js";import{V as N}from"./VInput-DYCyGubC.js";import{V as Z}from"./VCheckbox-FGrq_ujY.js";import{V as A}from"./VTable-D2Bc35sF.js";const D={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},E={class:"d-flex flex-column justify-center"},H={class:"text-h4 font-weight-medium"},O={class:"demo-space-x"},ae={__name:"FormZone",props:{method:{type:String,required:!0},item:{type:Object,required:!1},identity:{type:String,required:!1}},setup(q){const m=q,x=P(),c=y(),i=y({ville_id:1,zone:"",prefix:"ca",delai_livraison:"",horaires:[],pricings:[{poids:"1kg_6kg",frais_livraison:"",frais_livreur:""},{poids:"7kg_11kg",frais_livraison:"",frais_livreur:""},{poids:"12kg_20kg",frais_livraison:"",frais_livreur:""}]});C(()=>m.item,r=>{m.method=="PUT"&&(i.value={...r})},{immediate:!0});const w=async()=>{console.log(i.value);const{valid:r}=await c.value.validate();if(r){let l="/api/zones";m.method=="PUT"&&(l="/api/zones/"+m.identity),L({method:m.method,url:l,data:i.value}).then(async d=>{d.status===200&&(k.success(d.data),x.push({name:"zone-list"}))}).catch(d=>{if(d.response&&d.response.status===422){const a=d.response.data.errors;for(let u in a)k.error(`${u}: ${a[u].join(", ")}`)}})}};return(r,l)=>{const d=z;return p(),V(_,null,[t("div",D,[t("div",E,[t("h4",H,g(m.method=="POST"?"Ajouter zone":"Modifier zone"),1)])]),e(U,{ref_key:"refForm",ref:c,class:"mt-3"},{default:o(()=>[e(b,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(S,null,{default:o(()=>[e($,{class:"pt-2"},{default:o(()=>[e(b,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>l[4]||(l[4]=[v(" Ville : casablanca ")])),_:1}),e(n,{md:"6",cols:"12"},{default:o(()=>[e(d,{modelValue:s(i).zone,"onUpdate:modelValue":l[0]||(l[0]=a=>s(i).zone=a),rules:["requiredValidator"in r?r.requiredValidator:s(f)],placeholder:"Zone",label:"Zone"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:o(()=>[e(d,{modelValue:s(i).prefix,"onUpdate:modelValue":l[1]||(l[1]=a=>s(i).prefix=a),rules:["requiredValidator"in r?r.requiredValidator:s(f)],placeholder:"ex : CAZN",label:"Prefix"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:o(()=>[e(d,{modelValue:s(i).delai_livraison,"onUpdate:modelValue":l[2]||(l[2]=a=>s(i).delai_livraison=a),rules:["requiredValidator"in r?r.requiredValidator:s(f)],placeholder:"ex : 24h",label:"dÃ©lai de livraison"},null,8,["modelValue","rules"])]),_:1}),e(n,{md:"6",cols:"12"},{default:o(()=>[e(N,null,{default:o(()=>l[5]||(l[5]=[v("Horaires")])),_:1}),t("div",O,[(p(!0),V(_,null,h(s(F),a=>(p(),T(Z,{key:a.value,modelValue:s(i).horaires,"onUpdate:modelValue":l[3]||(l[3]=u=>s(i).horaires=u),value:a.value,label:a.label},null,8,["modelValue","value","label"]))),128))])]),_:1})]),_:1}),e(A,{class:"text-no-wrap"},{default:o(()=>[l[6]||(l[6]=t("thead",null,[t("tr",null,[t("th",null," Poids "),t("th",null," Frais livraison "),t("th",null," Frais livreur ")])],-1)),t("tbody",null,[(p(!0),V(_,null,h(s(i).pricings,a=>(p(),V("tr",{key:a.poids},[t("td",null,g(("getPoidsLabel"in r?r.getPoidsLabel:s(j))(a.poids)),1),t("td",null,[e(d,{modelValue:a.frais_livraison,"onUpdate:modelValue":u=>a.frais_livraison=u,rules:["requiredValidator"in r?r.requiredValidator:s(f)]},null,8,["modelValue","onUpdate:modelValue","rules"])]),t("td",null,[e(d,{modelValue:a.frais_livreur,"onUpdate:modelValue":u=>a.frais_livreur=u,rules:["requiredValidator"in r?r.requiredValidator:s(f)]},null,8,["modelValue","onUpdate:modelValue","rules"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:o(()=>[e(B,{onClick:w},{default:o(()=>l[7]||(l[7]=[v(" Enregistrer ")])),_:1})]),_:1})]),_:1})]),_:1},512)],64)}}};export{ae as _};
