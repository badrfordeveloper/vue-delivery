import{s as U}from"./statutInfos-DxhNQ7GY.js";import{_ as Ee}from"./DialogCloseBtn-xJDt34SS.js";import{V as ge,a as Ue,_ as Fe,c as De}from"./VDataTableServer-B3amBy8F.js";import{_ as Se}from"./AppSelect-D_S-Wr8X.js";import{_ as $e}from"./AppTextField-DK30dysE.js";import{V as Le}from"./VNodeRenderer-CB0glb9e.js";import{c as P,m as T,o as h,d as e,b as t,e as a,n as l,H as ye,x as f,a1 as Be,a2 as je,a5 as qe,al as ze,at as Ae,Y as B,au as Ve,r as p,w as pe,a9 as Me,ar as He,s as ee,F as se,av as Ge,aw as Ke,A as W,h as Ne,f as M,v as R,ai as j,aq as Re,as as Ce,J as he,$ as fe,ak as A,K as we,j as Qe,a as We}from"./index-fsRyKtKg.js";import{Q as Ye}from"./qrcode.vue.esm-pbmtpKko.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as X}from"./VDivider-pvaLhjLf.js";import{V as F,a as x}from"./VRow-4KV1s1En.js";import{V as te}from"./VCard-DomSwUkk.js";import{r as ce,V as Je,$ as ae}from"./VForm-CJaJdYDY.js";import{_ as Xe,a as Ze,V as et,b as tt,c as lt,d as Ie,e as st}from"./VTabs-B9kq2Fll.js";import{_ as at}from"./AppTextarea-BPzQHCZZ.js";import{t as H}from"./toast-DS4ULJxE.js";import{u as ot,V as xe,f as nt,b as it,m as ut,c as rt,d as dt}from"./VInput-Bk9SxLVM.js";import{f as mt}from"./forwardRefs-DWGaNmQL.js";import{V as ve}from"./VChip-NqVJeC3x.js";import{V as Z}from"./VCardText-DqluLgVN.js";import{V as Te}from"./VDialog-DJUiE49P.js";import{u as ct}from"./index-z8Ds3KiQ.js";import{V as pt}from"./VSpacer-XUrmBUhf.js";import{V as ft}from"./VMenu-Cl8KFenY.js";import{V as vt,a as ke}from"./VList-Bn2doB7Z.js";import"./VSelect-DAmpojO8.js";import"./VTextField-CCTLa4RH.js";import"./VImg-iMHcjiPU.js";import"./VOverlay-Dm4bTj6U.js";import"./VAvatar-BQI6NB6w.js";import"./filter-i6tYmAT2.js";/* empty css              */const _t={key:0},bt={id:"print-area"},gt={class:"print-content"},yt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Vt={class:"d-flex align-center app-logo"},Ct={class:"app-logo-title"},ht={class:"d-flex align-center destination"},wt={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},It={class:"mb-0"},xt={class:"mb-0"},kt={class:"mb-0"},Et={class:"mb-0"},St={class:"mb-0"},$t={class:"mb-0"},At={class:"mb-0"},Nt={class:"mb-0"},Rt={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(i,{emit:k}){const v=i,O=k;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){O("update:isPrintColis",!1)},(y,w)=>v.isPrintColis?(h(),P("div",_t,[e("div",bt,[e("div",gt,[t(te,{class:"props.item-preview-wrapper"},{default:a(()=>[w[0]||(w[0]=e("div",null,null,-1)),e("div",yt,[e("div",null,[e("div",Vt,[t(l(Le),{nodes:l(ye).app.logo},null,8,["nodes"]),e("h6",Ct,f(l(ye).app.title),1)])]),e("div",ht,f(v.item.destination),1)]),t(X,{class:"border-solid"}),t(F,{class:"print-row little-margin"},{default:a(()=>[t(x,{class:"text"},{default:a(()=>[e("div",wt,[e("div",null,[e("p",It," Code : "+f(v.item.code),1),e("p",xt," Nom : "+f(v.item.nom_client),1),e("p",kt," tel : "+f(v.item.tel_client),1)]),e("div",null,[e("p",Et,[t(Ye,{size:"70",value:v.item.code},null,8,["value"])])])]),e("p",St," Adresse : "+f(v.item.adresse),1)]),_:1})]),_:1}),t(X,{class:"border-solid"}),t(F,{class:"align-right little-margin"},{default:a(()=>[t(x,{cols:"12"},{default:a(()=>[e("p",$t," Produits : "+f(v.item.produit),1),e("p",At," Montant : "+f(v.item.montant),1)]),_:1})]),_:1}),t(X,{class:"border-solid"}),t(F,{class:"align-right little-margin"},{default:a(()=>[t(x,{cols:"12"},{default:a(()=>[e("p",Nt," essayage : "+f(v.item.essayage?"OUI":"NON")+" | ouvrir : "+f(v.item.ouvrir?"OUI":"NON")+" | echange : "+f(v.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),t(X,{class:"border-solid"}),w[1]||(w[1]=e("p",{class:"mb-0"},[e("span",null," Remarque: "),e("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):T("",!0)}},Pt=Pe(Rt,[["__scopeId","data-v-4ffea5da"]]),Tt=je({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:i=>typeof i=="boolean"||[1e3,1024].includes(Number(i))},...ut({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:i=>i.multiple?[]:null,validator:i=>Ae(i).every(k=>k!=null&&typeof k=="object")},...it({clearable:!0})},"VFileInput"),Ot=Be()({name:"VFileInput",inheritAttrs:!1,props:Tt(),emits:{"click:control":i=>!0,"mousedown:control":i=>!0,"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,k){let{attrs:v,emit:O,slots:y}=k;const{t:w}=qe(),b=ze(i,"modelValue",i.modelValue,d=>Ae(d),d=>!i.multiple&&Array.isArray(d)?d[0]:d),{isFocused:E,focus:o,blur:V}=ot(i),N=B(()=>typeof i.showSize!="boolean"?i.showSize:void 0),$=B(()=>(b.value??[]).reduce((d,m)=>{let{size:z=0}=m;return d+z},0)),D=B(()=>Ve($.value,N.value)),g=B(()=>(b.value??[]).map(d=>{const{name:m="",size:z=0}=d;return i.showSize?`${m} (${Ve(z,N.value)})`:m})),S=B(()=>{var m;const d=((m=b.value)==null?void 0:m.length)??0;return i.showSize?w(i.counterSizeString,d,D.value):w(i.counterString,d)}),u=p(),c=p(),C=p(),_=B(()=>E.value||i.active),s=B(()=>["plain","underlined"].includes(i.variant));function q(){var d;C.value!==document.activeElement&&((d=C.value)==null||d.focus()),E.value||o()}function K(d){var m;(m=C.value)==null||m.click()}function oe(d){O("mousedown:control",d)}function ne(d){var m;(m=C.value)==null||m.click(),O("click:control",d)}function le(d){d.stopPropagation(),q(),Ge(()=>{b.value=[],Ke(i["onClick:clear"],d)})}return pe(b,d=>{(!Array.isArray(d)||!d.length)&&C.value&&(C.value.value="")}),Me(()=>{const d=!!(y.counter||i.counter),m=!!(d||y.details),[z,ie]=He(v),{modelValue:Y,...ue}=xe.filterProps(i),re=nt(i);return t(xe,ee({ref:u,modelValue:b.value,"onUpdate:modelValue":Q=>b.value=Q,class:["v-file-input",{"v-file-input--chips":!!i.chips,"v-file-input--hide":i.hideInput,"v-input--plain-underlined":s.value},i.class],style:i.style,"onClick:prepend":K},z,ue,{centerAffix:!s.value,focused:E.value}),{...y,default:Q=>{let{id:I,isDisabled:n,isDirty:L,isReadonly:de,isValid:me}=Q;return t(dt,ee({ref:c,"prepend-icon":i.prependIcon,onMousedown:oe,onClick:ne,"onClick:clear":le,"onClick:prependInner":i["onClick:prependInner"],"onClick:appendInner":i["onClick:appendInner"]},re,{id:I.value,active:_.value||L.value,dirty:L.value||i.dirty,disabled:n.value,focused:E.value,error:me.value===!1}),{...y,default:_e=>{var J;let{props:{class:be,...r}}=_e;return t(se,null,[t("input",ee({ref:C,type:"file",readonly:de.value,disabled:n.value,multiple:i.multiple,name:i.name,onClick:G=>{G.stopPropagation(),de.value&&G.preventDefault(),q()},onChange:G=>{if(!G.target)return;const Oe=G.target;b.value=[...Oe.files??[]]},onFocus:q,onBlur:V},r,ie),null),t("div",{class:be},[!!((J=b.value)!=null&&J.length)&&!i.hideInput&&(y.selection?y.selection({fileNames:g.value,totalBytes:$.value,totalBytesReadable:D.value}):i.chips?g.value.map(G=>t(ve,{key:G,size:"small",text:G},null)):g.value.join(", "))])])}})},details:m?Q=>{var I,n;return t(se,null,[(I=y.details)==null?void 0:I.call(y,Q),d&&t(se,null,[t("span",null,null),t(rt,{active:!!((n=b.value)!=null&&n.length),value:S.value,disabled:i.disabled},y.counter)])])}:void 0})}),mt({},u,c,C)}}),Ut={key:0,class:"text-center"},Ft={key:0},Dt={key:1},Lt={class:"text-center"},Bt={key:0},jt={key:1},qt={__name:"actionsColis",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},emits:["getItemData"],setup(i,{emit:k}){const v=i,O=k,y=p({}),w=p(""),b=p(!1),E=p(),o=p({id:null,statut:"",commentaire:"",date:"",file:""});pe(()=>v.currentStatut,u=>{w.value=u},{immediate:!0}),pe(()=>v.item,u=>{y.value=u},{immediate:!0});const V=p(""),N=u=>{b.value=!0,o.value.statut=u},$=async()=>{const{valid:u}=await E.value.validate();u&&await D(o.value.statut)},D=async u=>{o.value.statut=u,o.value.id=v.id,V.value=u;const c=new FormData;c.append("file",o.value.file),c.append("id",o.value.id),c.append("statut",o.value.statut),c.append("commentaire",o.value.commentaire),c.append("date",o.value.date),ae({method:"POST",url:"/api/updateStatutColis",data:c,headers:{"Content-Type":"multipart/form-data"}}).then(async C=>{C.status===200&&(H.success(C.data),u!="COMMENTAIRE"&&(w.value=u),b.value=!1,O("getItemData")),V.value=""}).catch(C=>{V.value="",C.response&&C.response.status===422?H.error(C.response.data.message):H.error("something wrong")})},g=W("livreur","action");W("gestionnaire","action");const S=B(()=>{let u=[];return u.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),["ENTREPOT","REPORTE","PAS_REPONSE"].includes(w.value)&&g&&u.push({...U("EN_COURS_LIVRAISON"),statut:"EN_COURS_LIVRAISON"}),["EN_COURS_LIVRAISON","LIVRE_PARTIELLEMENT"].includes(w.value)&&g&&(u.push({...U("LIVRE"),statut:"LIVRE"}),u.push({...U("LIVRE_PARTIELLEMENT"),statut:"LIVRE_PARTIELLEMENT"}),u.push({...U("PAS_REPONSE"),statut:"PAS_REPONSE"}),u.push({...U("REPORTE"),statut:"REPORTE"}),u.push({...U("ANNULE"),statut:"ANNULE"}),u.push({...U("REFUSE"),statut:"REFUSE"})),u});return(u,c)=>{const C=Xe,_=at;return l(b)?(h(),P("div",Dt,[t(Je,{ref_key:"refForm",ref:E,class:"mt-3"},{default:a(()=>[e("p",Lt," Statut à envoyer : "+f(("statutInfos"in u?u.statutInfos:l(U))(l(o).statut).text),1),["LIVRE_PARTIELLEMENT","PAS_REPONSE","REPORTE","REFUSE","ANNULE"].includes(l(o).statut)?(h(),P("div",Bt,[t(F,{class:"d-flex align-center justify-center"},{default:a(()=>[t(x,{md:"6",cols:"12"},{default:a(()=>[t(Ot,{modelValue:l(o).file,"onUpdate:modelValue":c[0]||(c[0]=s=>l(o).file=s),rules:["requiredValidator"in u?u.requiredValidator:l(ce)],accept:"image/*",label:"File input"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):T("",!0),l(o).statut=="REPORTE"?(h(),P("div",jt,[t(F,{class:"d-flex align-center justify-center"},{default:a(()=>[t(x,{md:"6",cols:"12"},{default:a(()=>[t(C,{modelValue:l(o).date,"onUpdate:modelValue":c[1]||(c[1]=s=>l(o).date=s),rules:["requiredValidator"in u?u.requiredValidator:l(ce)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):T("",!0),e("div",null,[t(F,{class:"d-flex align-center justify-center"},{default:a(()=>[t(x,{md:"6",cols:"12"},{default:a(()=>[t(_,{modelValue:l(o).commentaire,"onUpdate:modelValue":c[2]||(c[2]=s=>l(o).commentaire=s),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE"].includes(l(o).statut)?["requiredValidator"in u?u.requiredValidator:l(ce)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),t(F,null,{default:a(()=>[t(x,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[t(j,{color:"secondary",onClick:c[3]||(c[3]=s=>b.value=!1)},{default:a(()=>c[4]||(c[4]=[R(" retour ")])),_:1}),t(j,{loading:l(V)==l(o).statut,onClick:$},{default:a(()=>c[5]||(c[5]=[R(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):(h(),P("div",Ut,[(h(!0),P(se,null,Ne(l(S),(s,q)=>(h(),M(j,{key:q,color:s.color,class:"ma-1",loading:l(V)==s.statut,onClick:K=>N(s.statut)},{default:a(()=>[R(f(s.text),1)]),_:2},1032,["color","loading","onClick"]))),128)),l(S).length==0?(h(),P("div",Ft," Aucune action requise ")):T("",!0)]))}}},zt={key:0,class:"text-end position-absolute right-0 parms-btn"},Mt={class:"text-body-1 mb-2"},Ht={class:"text-body-1 mb-2"},Gt={class:"text-body-1 mb-2"},Kt={class:"text-body-1 mb-2"},Qt={class:"text-body-1 mb-2"},Wt={class:"text-body-1 mb-2"},Yt={class:"text-body-1 mb-2"},Jt={class:"text-body-1 mb-2"},Xt={class:"text-body-1 mb-2"},Zt={class:"text-body-1 mb-2"},el={class:"text-body-1 mb-2"},tl={class:"text-body-1 mb-2"},ll={class:"text-body-1 mb-2"},sl={class:"text-body-1 mb-2"},al={class:"text-body-1 mb-2"},ol={__name:"showColis",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(i,{emit:k}){let v,O;const y=i,w=k;let b={id:"",nom_vendeur:"",tel_vendeur:"",tarif_id:"",commentaire_vendeur:"",code_ramassage:"",frais_livreur:"",adresse:"",livreur:"",livreur_id:"",tel_livreur:"",statut:"",vendeur:"",colisHistories:[]};const E=([v,O]=Re(()=>ae("/api/ramasseurs").then(_=>_.data)),v=await v,O(),v),o=p(structuredClone(Ce(b))),V=p(!1),N=async _=>{V.value=!0,await ae("/api/colis/"+_).then(async s=>{s.status===200&&(o.value=s.data),V.value=!1}).catch(s=>{V.value=!1,s.response&&s.response.status===422?H.error(s.response.data.message):H.error("something wrong")})};pe(()=>y.id,_=>{N(_)},{immediate:!0});const $=()=>{w("update:isShowItem",!1),w("fetchItems"),o.value=structuredClone(Ce(b))},D=W("gestionnaire","action"),g=p("Actions"),S=["tabler-adjustments-share","tabler-logs"],u=p(!1),c=p(!1),C=async()=>{c.value=!0,await ae({method:"POST",url:"/api/parametrerColis",data:{id:o.value.id,livreur_id:o.value.livreur_id,frais_livreur:o.value.frais_livreur}}).then(async _=>{_.status===200&&(H.success(_.data),N(o.value.id)),c.value=!1}).catch(_=>{c.value=!1,_.response&&_.response.status===422?H.error(_.response.data.message):H.error("something wrong")})};return(_,s)=>{const q=Ee,K=qt,oe=st,ne=Se,le=$e,d=Ze;return h(),M(Te,{width:_.$vuetify.display.smAndDown?"auto":900,"model-value":y.isShowItem,"onUpdate:modelValue":$},{default:a(()=>[t(q,{onClick:$}),t(d,{title:"Details Colis",loading:l(V),"no-actions":""},{default:a(()=>[t(te,null,{default:a(()=>[he(t(Z,null,{default:a(()=>[l(D)?(h(),P("div",zt,[t(j,{icon:"",class:"rounded-0",onClick:s[0]||(s[0]=m=>u.value=!0)},{default:a(()=>[t(fe,{size:"22",icon:"tabler-settings"})]),_:1})])):T("",!0),t(F,null,{default:a(()=>[t(x,{cols:"12",lg:"6"},{default:a(()=>[t(te,{title:"Informations colis"},{default:a(()=>[t(Z,null,{default:a(()=>[t(ge,{class:"billing-address-table"},{default:a(()=>[e("tr",null,[s[7]||(s[7]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),e("td",null,[e("p",Mt,f(l(o).code),1)])]),e("tr",null,[s[8]||(s[8]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Livreur : ")],-1)),e("td",null,[e("p",Ht,f(l(o).livreur),1)])]),e("tr",null,[s[9]||(s[9]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Livreur : ")],-1)),e("td",null,[e("p",Gt,f(l(o).tel_livreur),1)])]),e("tr",null,[s[10]||(s[10]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramassage : ")],-1)),e("td",null,[e("p",Kt,f(l(o).code_ramassage),1)])]),e("tr",null,[s[11]||(s[11]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),e("td",null,[e("p",Qt,[t(ve,ee(("statutInfos"in _?_.statutInfos:l(U))(l(o).statut),{density:"default",label:"",size:"small"}),null,16)])])]),e("tr",null,[s[12]||(s[12]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Prix : ")],-1)),e("td",null,[e("p",Wt,f(l(o).montant),1)])]),e("tr",null,[s[13]||(s[13]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Produit : ")],-1)),e("td",null,[e("p",Yt,f(l(o).produit),1)])]),e("tr",null,[s[14]||(s[14]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," essayage : ")],-1)),e("td",null,[e("p",Jt,f(l(o).essayage?"OUI":"NON"),1)])]),e("tr",null,[s[15]||(s[15]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," ouvrir : ")],-1)),e("td",null,[e("p",Xt,f(l(o).ouvrir?"OUI":"NON"),1)])]),e("tr",null,[s[16]||(s[16]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," echange : ")],-1)),e("td",null,[e("p",Zt,f(l(o).echange?"OUI":"NON"),1)])]),e("tr",null,[s[17]||(s[17]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Commentaire : ")],-1)),e("td",null,[e("p",el,f(l(o).commentaire_vendeur),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),t(x,{cols:"12",lg:"6"},{default:a(()=>[t(te,{title:"Informations client"},{default:a(()=>[t(Z,null,{default:a(()=>[t(ge,{class:"billing-address-table"},{default:a(()=>[e("tr",null,[s[18]||(s[18]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Nom de client : ")],-1)),e("td",null,[e("p",tl,f(l(o).nom_client),1)])]),e("tr",null,[s[19]||(s[19]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel de client : ")],-1)),e("td",null,[e("p",ll,f(l(o).tel_client),1)])]),e("tr",null,[s[20]||(s[20]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Distination : ")],-1)),e("td",null,[e("p",sl,f(l(o).destination),1)])]),e("tr",null,[s[21]||(s[21]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Adresse : ")],-1)),e("td",null,[e("p",al,f(l(o).adresse),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(et,{modelValue:l(g),"onUpdate:modelValue":s[1]||(s[1]=m=>A(g)?g.value=m:null),grow:"",class:"disable-tab-transition",stacked:""},{default:a(()=>[(h(),P(se,null,Ne(S,(m,z)=>t(tt,{key:z},{default:a(()=>[t(fe,{size:"40",icon:m},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),t(lt,{modelValue:l(g),"onUpdate:modelValue":s[3]||(s[3]=m=>A(g)?g.value=m:null),class:"mt-3"},{default:a(()=>[t(Ie,null,{default:a(()=>[t(K,{id:l(o).id,"current-statut":l(o).statut,onGetItemData:s[2]||(s[2]=m=>N(l(o).id))},null,8,["id","current-statut"])]),_:1}),t(Ie,null,{default:a(()=>[t(oe,{histories:l(o).colisHistories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[we,!l(u)]]),l(D)?he((h(),M(Z,{key:0},{default:a(()=>[t(F,null,{default:a(()=>[t(x,{md:"6",cols:"12"},{default:a(()=>[t(ne,{modelValue:l(o).livreur_id,"onUpdate:modelValue":s[4]||(s[4]=m=>l(o).livreur_id=m),placeholder:"Livreurs",label:"Livreurs",items:l(E),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(x,{cols:"12",md:"6"},{default:a(()=>[t(le,{modelValue:l(o).frais_livreur,"onUpdate:modelValue":s[5]||(s[5]=m=>l(o).frais_livreur=m),rules:["requiredValidator"in _?_.requiredValidator:l(ce)],label:"Frais de livreur",type:"number",placeholder:"Frais de livreur"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(x,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[t(j,{color:"secondary",onClick:s[6]||(s[6]=m=>u.value=!1)},{default:a(()=>s[22]||(s[22]=[R(" retour ")])),_:1}),t(j,{loading:l(c),onClick:C},{default:a(()=>s[23]||(s[23]=[R(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[we,l(u)]]):T("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},nl=Pe(ol,[["__scopeId","data-v-41d42f24"]]),il={class:"d-flex flex-wrap gap-4 ma-6"},ul={class:"d-flex gap-4 flex-wrap align-center"},rl={key:1},dl={key:0},zl={__name:"list",async setup(i){let k,v;const O=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],y=p(),w=p(),b=p(),E=p(),o=p(!1),V=p(!1),N=p(),$=p(!1),D=p(),g=p(5),S=p(1),u=p(),c=p(),C=I=>{var n,L;u.value=(n=I.sortBy[0])==null?void 0:n.key,c.value=(L=I.sortBy[0])==null?void 0:L.order},_=I=>{$.value=!0,D.value=I},s=I=>{V.value=!0,N.value=I},q=async()=>{let I="/api/colis/"+N.value.id;o.value=!0,ae({method:"DELETE",url:I}).then(async n=>{n.status===200&&(V.value=!1,H.success(n.data),d()),o.value=!1}).catch(n=>{o.value=!1})},{data:K,error:oe,statusCode:ne,isFetching:le,execute:d}=([k,v]=Re(()=>ct(De("/api/colis",{query:{code:y,statut:w,nom_client:b,tel_client:E,page:S,itemsPerPage:g,sortBy:u,orderBy:c}}))),k=await k,v(),k),m=Qe(),z=B(()=>K.value.items),ie=B(()=>K.value.total),Y=p(!1),ue=p(0),re=p(0),Q=I=>{re.value=I.id,ue.value++,Y.value=!0};return(I,n)=>{const L=$e,de=Se,me=We("IconBtn"),_e=Fe,be=Ee;return h(),P("div",null,[t(te,{title:"Filtres",class:"mb-6 d-print-none"},{default:a(()=>[t(Z,null,{default:a(()=>[t(F,null,{default:a(()=>[t(x,{cols:"12",sm:"2"},{default:a(()=>[t(L,{modelValue:l(w),"onUpdate:modelValue":n[0]||(n[0]=r=>A(w)?w.value=r:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),t(x,{cols:"12",sm:"2"},{default:a(()=>[t(L,{modelValue:l(y),"onUpdate:modelValue":n[1]||(n[1]=r=>A(y)?y.value=r:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),t(x,{cols:"12",sm:"2"},{default:a(()=>[t(L,{modelValue:l(b),"onUpdate:modelValue":n[2]||(n[2]=r=>A(b)?b.value=r:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),t(x,{cols:"12",sm:"2"},{default:a(()=>[t(L,{modelValue:l(E),"onUpdate:modelValue":n[3]||(n[3]=r=>A(E)?E.value=r:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(X),e("div",il,[t(pt),e("div",ul,[t(de,{modelValue:l(g),"onUpdate:modelValue":n[4]||(n[4]=r=>A(g)?g.value=r:null),items:[5,10,20,25,50]},null,8,["modelValue"]),l(W)("create","colis")?(h(),M(j,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:n[5]||(n[5]=r=>l(m).push({name:"colis-add"}))},{default:a(()=>n[14]||(n[14]=[R(" Ajouter Colis ")])),_:1})):T("",!0)])]),t(X,{class:"mt-4"}),t(Ue,{"items-per-page":l(g),"onUpdate:itemsPerPage":n[7]||(n[7]=r=>A(g)?g.value=r:null),page:l(S),"onUpdate:page":n[8]||(n[8]=r=>A(S)?S.value=r:null),loading:l(le),headers:O,items:l(z),"items-length":l(ie),class:"text-no-wrap",locale:"fr","onUpdate:options":C},{"item.code":a(({item:r})=>[l(W)("show","colis")?(h(),M(j,{key:0,variant:"text",onClick:J=>Q(r)},{default:a(()=>[R(f(r.code),1)]),_:2},1032,["onClick"])):(h(),P("span",rl,f(r.code),1))]),"item.statut":a(({item:r})=>[t(ve,ee(("statutInfos"in I?I.statutInfos:l(U))(r.statut),{density:"default",label:"",size:"small"}),null,16),r.statut_retour?(h(),P("span",dl,[n[15]||(n[15]=R(" - ")),t(ve,ee(("statutInfos"in I?I.statutInfos:l(U))(r.statut_retour),{density:"default",label:"",size:"small"}),null,16)])):T("",!0)]),"item.actions":a(({item:r})=>[e("div",null,[l(W)("update","colis")&&r.statut=="EN_ATTENTE"?(h(),M(me,{key:0,onClick:J=>l(m).push("/colis/"+r.id)},{default:a(()=>[t(fe,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):T("",!0),t(me,null,{default:a(()=>[t(fe,{icon:"tabler-dots-vertical"}),t(ft,{activator:"parent"},{default:a(()=>[t(vt,null,{default:a(()=>[t(ke,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:J=>_(r)},{default:a(()=>n[16]||(n[16]=[R(" Print ")])),_:2},1032,["onClick"]),l(W)("delete","colis")&&r.statut=="EN_ATTENTE"?(h(),M(ke,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:J=>s(r)},{default:a(()=>n[17]||(n[17]=[R(" Delete ")])),_:2},1032,["onClick"])):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:a(()=>[t(_e,{page:l(S),"onUpdate:page":n[6]||(n[6]=r=>A(S)?S.value=r:null),"items-per-page":l(g),"total-items":l(ie)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),t(Te,{modelValue:l(V),"onUpdate:modelValue":n[11]||(n[11]=r=>A(V)?V.value=r:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[t(be,{onClick:n[9]||(n[9]=r=>V.value=!l(V))}),t(te,{title:"Êtes-vous sûr de vouloir supprimer le colis "+l(N).code+" ?"},{default:a(()=>[t(Z,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[t(j,{color:"secondary",variant:"tonal",onClick:n[10]||(n[10]=r=>V.value=!1)},{default:a(()=>n[18]||(n[18]=[R(" Non ")])),_:1}),t(j,{loading:l(o),onClick:q},{default:a(()=>n[19]||(n[19]=[R(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),l($)?(h(),M(Pt,{key:0,"is-print-colis":l($),"onUpdate:isPrintColis":n[12]||(n[12]=r=>A($)?$.value=r:null),item:l(D)},null,8,["is-print-colis","item"])):T("",!0),l(Y)?(h(),M(nl,{id:l(re),key:l(ue),"is-show-item":l(Y),"onUpdate:isShowItem":n[13]||(n[13]=r=>A(Y)?Y.value=r:null),onFetchItems:l(d)},null,8,["id","is-show-item","onFetchItems"])):T("",!0)])}}};export{zl as default};
