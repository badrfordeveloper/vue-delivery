import{_ as G}from"./DialogCloseBtn-DYkDxoTT.js";import{V as ne,a as ie,c as re,_ as de}from"./VDataTableServer-CfDYCTqh.js";import{_ as me}from"./AppSelect-y6FoQWxb.js";import{_ as ue}from"./AppTextField-CmS8k3i0.js";import{V as pe}from"./VNodeRenderer-BLvBNL9H.js";import{o as h,f as B,e as s,b as e,ai as P,t as C,d as l,m as o,H as F,v as d,r as i,aq as ce,Y as L,c as fe,ak as m,y as M,$ as Q,j as _e,a as ve,A as z}from"./index-DPEARWyz.js";import{Q as ge}from"./qrcode.vue.esm-mZ9N0P1f.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $,a as f}from"./VRow-Dfw-41Up.js";import{V as D}from"./VCard-B2jYeW2D.js";import{V as w}from"./VDivider-hzcI50H3.js";import{V as J}from"./VDialog-7lteG5Ac.js";import{$ as be}from"./api-DhWGbEVG.js";import{t as xe}from"./toast-qMdeGvQh.js";import{u as ye}from"./index-_IxcGEJc.js";import{V as H}from"./VCardText-f7-Kcvw5.js";import{V as Ce}from"./VSpacer-BqhLF761.js";import{V as we}from"./VMenu-CLGsvIgf.js";import{V as ke,a as Y}from"./VList-bbfuGvOt.js";import"./VSelect-CBQXVdf1.js";import"./VTextField-euNnZfEI.js";import"./VImg-B5j7I_AE.js";import"./forwardRefs-DWGaNmQL.js";import"./VOverlay-CFFYPqc7.js";import"./VAvatar-BH_YnDZc.js";import"./VChip-D585xh2w.js";import"./filter-CCjRknBQ.js";/* empty css              */const he={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Pe={class:"d-flex align-center app-logo"},$e={class:"app-logo-title"},Ne={class:"d-flex align-center"},Ue={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},Be={class:"mb-0"},De={class:"mb-0"},Ie={class:"mb-0"},Oe={class:"mb-0"},Re={class:"mb-0"},Te={class:"text-base"},je={class:"text-no-wrap"},Ae={class:"text-no-wrap"},Se={class:"mb-0"},qe={__name:"printRamassage",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis","update:rolePermissions","fetchItems"],setup(I,{emit:V}){const n=I,N=V,b=()=>{window.print()},_=()=>{N("update:isPrintColis",!1)};return(x,r)=>{const y=G;return h(),B(J,{width:x.$vuetify.display.smAndDown?"auto":400,"model-value":n.isPrintColis,"onUpdate:modelValue":_},{default:s(()=>[e(y,{class:"d-print-none",onClick:_}),e($,null,{default:s(()=>[e(f,{class:"d-print-none",cols:"12",md:"12"},{default:s(()=>[e(P,{color:"primary",class:"flex-grow-1",onClick:b},{default:s(()=>r[0]||(r[0]=[C(" Print ")])),_:1})]),_:1}),e(f,{cols:"12",md:"12",class:"ticket"},{default:s(()=>[e(D,{class:"props.item-preview-wrapper"},{default:s(()=>[l("div",he,[l("div",null,[l("div",Pe,[e(o(pe),{nodes:o(F).app.logo},null,8,["nodes"]),l("h6",$e,d(o(F).app.title),1)])]),l("div",Ne,d(n.item.destination),1)]),e(w,{class:"border-solid"}),e($,{class:"print-row mb-1"},{default:s(()=>[e(f,{class:"text-no-wrap"},{default:s(()=>[l("div",Ue,[l("div",null,[l("p",Be," Code : "+d(n.item.code),1),l("p",De," Nom : "+d(n.item.nom_client),1),l("p",Ie," tel : "+d(n.item.tel_client),1)]),l("div",null,[l("p",Oe,[e(ge,{size:"70",value:n.item.code},null,8,["value"])])])]),l("p",Re," Adresse : "+d(n.item.adresse),1)]),_:1})]),_:1}),e(w,{class:"border-solid"}),e(ne,{class:"props.item-preview-table border text-high-emphasis overflow-hidden mb-1"},{default:s(()=>[r[1]||(r[1]=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," Produits "),l("th",{scope:"col"}," Montant ")])],-1)),l("tbody",Te,[l("tr",null,[l("td",je,d(n.item.produit),1),l("td",Ae,d(n.item.montant),1)])])]),_:1}),e(w,{class:"border-solid"}),e($,{class:"align-right"},{default:s(()=>[e(f,{cols:"12"},{default:s(()=>[l("p",Se," essayage : "+d(n.item.essayage?"OUI":"NON")+" | ouvrir : "+d(n.item.ouvrir?"OUI":"NON")+" | echange : "+d(n.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),e(w,{class:"border-solid"}),r[2]||(r[2]=l("p",{class:"mb-0"},[l("span",{class:"text-high-emphasis font-weight-medium me-1"}," Remarque: "),l("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ee=Ve(qe,[["__scopeId","data-v-3822e713"]]),Fe={class:"d-flex flex-wrap gap-4 ma-6"},Le={class:"d-flex gap-4 flex-wrap align-center"},bt={__name:"list",async setup(I){let V,n;const N=[{title:"code",key:"code",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"adresse",key:"adresse",sortable:!1},{title:"actions",key:"actions",sortable:!1}],b=i(),_=i(),x=i(),r=i(),y=i(!1),p=i(!1),U=i(),k=i(!1),O=i(),c=i(5),v=i(1),R=i(),T=i(),K=u=>{var t,g;R.value=(t=u.sortBy[0])==null?void 0:t.key,T.value=(g=u.sortBy[0])==null?void 0:g.order},W=u=>{k.value=!0,O.value=u},X=u=>{p.value=!0,U.value=u},Z=async()=>{let u="/api/colis/"+U.value.id;y.value=!0,be({method:"DELETE",url:u}).then(async t=>{t.status===200&&(p.value=!1,xe.success(t.data),te()),y.value=!1}).catch(t=>{y.value=!1})},{data:j,error:Me,statusCode:Qe,isFetching:ee,execute:te}=([V,n]=ce(()=>ye(re("/api/colis",{query:{code:b,statut:_,nom_client:x,tel_client:r,page:v,itemsPerPage:c,sortBy:R,orderBy:T}}))),V=await V,n(),V),A=_e(),se=L(()=>j.value.items),S=L(()=>j.value.total);return(u,t)=>{const g=ue,le=me,q=ve("IconBtn"),ae=de,oe=G;return h(),fe("div",null,[e(D,{title:"Filtres",class:"mb-6"},{default:s(()=>[e(H,null,{default:s(()=>[e($,null,{default:s(()=>[e(f,{cols:"12",sm:"2"},{default:s(()=>[e(g,{modelValue:o(_),"onUpdate:modelValue":t[0]||(t[0]=a=>m(_)?_.value=a:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:s(()=>[e(g,{modelValue:o(b),"onUpdate:modelValue":t[1]||(t[1]=a=>m(b)?b.value=a:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:s(()=>[e(g,{modelValue:o(x),"onUpdate:modelValue":t[2]||(t[2]=a=>m(x)?x.value=a:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:s(()=>[e(g,{modelValue:o(r),"onUpdate:modelValue":t[3]||(t[3]=a=>m(r)?r.value=a:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w),l("div",Fe,[e(Ce),l("div",Le,[e(le,{modelValue:o(c),"onUpdate:modelValue":t[4]||(t[4]=a=>m(c)?c.value=a:null),items:[5,10,20,25,50]},null,8,["modelValue"]),o(z)("create","ramassage")?(h(),B(P,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:t[5]||(t[5]=a=>o(A).push({name:"ramassage-add"}))},{default:s(()=>t[13]||(t[13]=[C(" Ajouter Ramassage ")])),_:1})):M("",!0)])]),e(w,{class:"mt-4"}),e(ie,{"items-per-page":o(c),"onUpdate:itemsPerPage":t[7]||(t[7]=a=>m(c)?c.value=a:null),page:o(v),"onUpdate:page":t[8]||(t[8]=a=>m(v)?v.value=a:null),loading:o(ee),headers:N,items:o(se),"items-length":o(S),class:"text-no-wrap",locale:"fr","onUpdate:options":K},{"item.actions":s(({item:a})=>[o(z)("update","ramassage")?(h(),B(q,{key:0,onClick:E=>o(A).push("/ramassage/"+a.id)},{default:s(()=>[e(Q,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):M("",!0),e(q,null,{default:s(()=>[e(Q,{icon:"tabler-dots-vertical"}),e(we,{activator:"parent"},{default:s(()=>[e(ke,null,{default:s(()=>[e(Y,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:E=>W(a)},{default:s(()=>t[14]||(t[14]=[C(" Print ")])),_:2},1032,["onClick"]),e(Y,{value:"delete","prepend-icon":"tabler-trash",onClick:E=>X(a)},{default:s(()=>t[15]||(t[15]=[C(" Delete ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[e(ae,{page:o(v),"onUpdate:page":t[6]||(t[6]=a=>m(v)?v.value=a:null),"items-per-page":o(c),"total-items":o(S)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),e(J,{modelValue:o(p),"onUpdate:modelValue":t[11]||(t[11]=a=>m(p)?p.value=a:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[e(oe,{onClick:t[9]||(t[9]=a=>p.value=!o(p))}),e(D,{title:"Êtes-vous sûr de vouloir supprimer le ramassage "+o(U).code+" ?"},{default:s(()=>[e(H,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[e(P,{color:"secondary",variant:"tonal",onClick:t[10]||(t[10]=a=>p.value=!1)},{default:s(()=>t[16]||(t[16]=[C(" Non ")])),_:1}),e(P,{loading:o(y),onClick:Z},{default:s(()=>t[17]||(t[17]=[C(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),e(Ee,{"is-print-ramassage":o(k),"onUpdate:isPrintRamassage":t[12]||(t[12]=a=>m(k)?k.value=a:null),item:o(O)},null,8,["is-print-ramassage","item"])]),_:1})])}}};export{bt as default};
