import{V as j,c as q,_ as z,a as G}from"./VDataTableServer-CaQQzUpi.js";import{_ as O}from"./AppSelect-iL1fk0Jo.js";import{_ as Y}from"./VForm-CWdYMJf4.js";import{r as s,aG as H,Y as C,o as V,c as J,d as v,b as l,e as i,m as t,ak as n,f as U,t as K,ai as L,y as w,$ as M,F as Q,a as W,A as F}from"./index-DABRHePW.js";import{u as X}from"./index-KvMUYoor.js";import{V as Z}from"./VCardText-Bzu1rhbR.js";import{V as h,a as ee}from"./VRow-DSTTq9qk.js";import{V as A}from"./VDivider-_cLGmj7R.js";import{V as oe}from"./VSpacer-CjIk46Nw.js";import{V as te}from"./VCard-Cd53vQ86.js";import"./toast-BuVeXtw1.js";import"./VTextField-D74tfuBy.js";import"./VImg-BDgjSfMx.js";import"./forwardRefs-DWGaNmQL.js";import"./VDialog-DNOhfYon.js";import"./VOverlay-9InC0OrZ.js";import"./VChip-Dfs1XcIU.js";import"./VAvatar-CykQorsV.js";import"./VList-CLthwNSh.js";import"./VMenu-ICShgjIL.js";/* empty css              */const le={class:"d-flex flex-wrap gap-4 ma-6"},se={class:"d-flex gap-4 flex-wrap align-center"},De={__name:"list",async setup(ae){let p,_;const D=[{title:"Role",key:"name",sortable:!1},{title:"actions",key:"actions",sortable:!1}],d=s(),u=s(!1),c=s(!1);s(!1);const f=s({name:"",permissions:[]}),P=m=>{f.value={...m},c.value=!0},a=s(5),r=s(1),b=s(),R=s(),$=m=>{var e,g;b.value=(e=m.sortBy[0])==null?void 0:e.key,R.value=(g=m.sortBy[0])==null?void 0:g.order},{data:y,error:ie,statusCode:ne,isFetching:N,execute:k}=([p,_]=H(()=>X(q("/api/roles",{query:{name:d,page:r,itemsPerPage:a,sortBy:b,orderBy:R}}))),p=await p,_(),p),T=C(()=>y.value.items),x=C(()=>y.value.total);return(m,e)=>{const g=Y,E=O,I=W("IconBtn"),S=z,B=G;return V(),J(Q,null,[v("div",null,[l(te,{title:"Filters",class:"mb-6"},{default:i(()=>[l(Z,null,{default:i(()=>[l(h,null,{default:i(()=>[l(ee,{cols:"12",sm:"4"},{default:i(()=>[l(g,{modelValue:t(d),"onUpdate:modelValue":e[0]||(e[0]=o=>n(d)?d.value=o:null),placeholder:"Recherche role",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A),v("div",le,[l(oe),v("div",se,[l(E,{modelValue:t(a),"onUpdate:modelValue":e[1]||(e[1]=o=>n(a)?a.value=o:null),items:[5,10,20,25,50]},null,8,["modelValue"]),t(F)("create","role")?(V(),U(L,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:e[2]||(e[2]=o=>u.value=!0)},{default:i(()=>e[10]||(e[10]=[K(" Ajouter Role ")])),_:1})):w("",!0)])]),l(A,{class:"mt-4"}),l(j,{"items-per-page":t(a),"onUpdate:itemsPerPage":e[4]||(e[4]=o=>n(a)?a.value=o:null),"model-value":m.selectedRows,"onUpdate:modelValue":e[5]||(e[5]=o=>m.selectedRows=o),page:t(r),"onUpdate:page":e[6]||(e[6]=o=>n(r)?r.value=o:null),loading:t(N),headers:D,items:t(T),"items-length":t(x),class:"text-no-wrap","onUpdate:options":$},{"item.actions":i(({item:o})=>[t(F)("update","role")?(V(),U(I,{key:0,onClick:re=>P(o)},{default:i(()=>[l(M,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):w("",!0)]),bottom:i(()=>[l(S,{page:t(r),"onUpdate:page":e[3]||(e[3]=o=>n(r)?r.value=o:null),"items-per-page":t(a),"total-items":t(x)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","loading","items","items-length"])]),_:1})]),l(B,{"is-dialog-visible":t(u),"onUpdate:isDialogVisible":e[7]||(e[7]=o=>n(u)?u.value=o:null),onFetchRoles:t(k)},null,8,["is-dialog-visible","onFetchRoles"]),l(B,{"is-dialog-visible":t(c),"onUpdate:isDialogVisible":e[8]||(e[8]=o=>n(c)?c.value=o:null),"role-permissions":t(f),"onUpdate:rolePermissions":e[9]||(e[9]=o=>n(f)?f.value=o:null),onFetchRoles:t(k)},null,8,["is-dialog-visible","role-permissions","onFetchRoles"])],64)}}};export{De as default};
