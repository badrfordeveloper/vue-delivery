import{_ as ke,s as me,V as Ce,a as Ie,b as $e,c as le,d as Te,e as De,Q as Re}from"./VTabs-CqAmUcw2.js";import{$ as M,r as Ue}from"./VForm-Be23ANTJ.js";import{aq as pe,r as u,as as oe,w as Se,A as B,f as h,o as m,e as a,b as t,n as s,J as ne,m as y,c as O,ai as U,$ as Q,d as e,x as r,s as ce,ak as b,F as Ae,h as Ne,K as ie,v as R,H as re,j as Pe,Y as de,a as Be}from"./index-DzV6yVlR.js";import{_ as fe}from"./AppTextField-BsPyopml.js";import{_ as _e}from"./AppSelect-CD9O45vb.js";import{_ as ge}from"./DialogCloseBtn-CAsxFcLK.js";import{t as P}from"./toast-CtX10tFY.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as W}from"./VCard-BG-sLHPS.js";import{V as G}from"./VCardText-DH-YrV8w.js";import{V as A,a as w}from"./VRow-l2emrWky.js";import{V as ue,b as Oe,a as Ee,_ as je,c as Fe}from"./VDataTableServer-YZ-f1CDH.js";import{V as be}from"./VChip-6G5F0vN_.js";import{V as S}from"./VDivider-D43WtKHi.js";import{V as Ve}from"./VDialog-CBNTIYzI.js";import{V as qe}from"./VNodeRenderer-BknNHLhf.js";import{u as ze}from"./index-Cp4yW6HO.js";import{V as Le}from"./VSpacer-D8O6v4X4.js";import{V as He}from"./VMenu-AGw7i9Pi.js";import{V as Ke,a as Me}from"./VList-x5vscWgM.js";import"./VOverlay-6aPDv4Z9.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-DpWbwdj8.js";import"./AppTextarea-CYeihCq1.js";import"./VTextField-DRhBZEdt.js";import"./VAlert-BBwriC9b.js";import"./VAvatar-B_166d6N.js";import"./VSelect-CvQu-CnL.js";/* empty css              */import"./filter-ovwvCeUH.js";const Qe={key:0,class:"text-end position-absolute right-0"},We={class:"text-body-1 mb-2"},Ge={class:"text-body-1 mb-2"},Je={class:"text-body-1 mb-2"},Ye={key:0},Xe={class:"text-body-1 mb-2"},Ze={class:"text-body-1 mb-2"},et={class:"text-body-1 mb-2"},tt={class:"text-body-1 mb-2"},st={class:"text-body-1 mb-2"},at={class:"text-body-1 mb-2"},lt={__name:"ShowRamassage",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(F,{emit:k}){let d,N;const C=F,f=k;let $={id:"",nom_vendeur:"",tel_vendeur:"",frais_ramasseur:"",tel_ramasseur:"",tarif_id:"",adresse:"",ramasseur:"",ramasseur_id:"",statut:"",vendeur:"",nombre_colis:"",colis:[],histories:[]};const V=([d,N]=pe(()=>M("/api/ramasseurs").then(c=>c.data)),d=await d,N(),d),i=u(structuredClone(oe($))),x=u(!1),J=async c=>{x.value=!0,await M("/api/ramassage/"+c).then(async l=>{l.status===200&&(i.value=l.data),x.value=!1}).catch(l=>{x.value=!1,l.response&&l.response.status===422?P.error(l.response.data.message):P.error("something wrong")})};Se(()=>C.id,c=>{J(c)},{immediate:!0});const g=()=>{f("update:isShowItem",!1),f("fetchItems"),i.value=structuredClone(oe($))},_=u(!1),E=B("gestionnaire","action"),q=B("livreur","action"),Y=c=>{_.value=!0,M({method:"POST",url:"/api/parametrerRamassage",data:{id:i.value.id,ramasseur_id:i.value.ramasseur_id,frais_ramasseur:i.value.frais_ramasseur}}).then(async l=>{l.status===200&&P.success(l.data),_.value=!1}).catch(l=>{_.value=!1,l.response&&l.response.status===422?P.error(l.response.data.message):P.error("something wrong")})},I=u("Actions"),X=["tabler-adjustments-share","tabler-logs"],T=u(!1),te=[{title:"code",key:"code"},{title:"destination",key:"destination"}];return(c,l)=>{const z=ge,L=Te,Z=De,H=_e,D=fe,K=ke;return m(),h(Ve,{width:c.$vuetify.display.smAndDown?"auto":900,"model-value":C.isShowItem,"onUpdate:modelValue":g,scrollable:""},{default:a(()=>[t(z,{onClick:g}),t(K,{title:"Details Ramassage",loading:s(x),"no-actions":""},{default:a(()=>[t(W,null,{default:a(()=>[ne(t(G,null,{default:a(()=>[s(E)?(m(),O("div",Qe,[t(U,{icon:"",class:"rounded-0",onClick:l[0]||(l[0]=p=>T.value=!0)},{default:a(()=>[t(Q,{size:"22",icon:"tabler-settings"})]),_:1})])):y("",!0),t(A,null,{default:a(()=>[t(w,{cols:"12",lg:"6"},{default:a(()=>[t(ue,{class:"billing-address-table"},{default:a(()=>[e("tr",null,[l[6]||(l[6]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),e("td",null,[e("p",We,r(s(i).code),1)])]),e("tr",null,[l[7]||(l[7]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramasseur : ")],-1)),e("td",null,[e("p",Ge,r(s(i).ramasseur),1)])]),e("tr",null,[l[8]||(l[8]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Ramasseur: ")],-1)),e("td",null,[e("p",Je,r(s(i).tel_ramasseur),1)])]),s(q)?(m(),O("tr",Ye,[l[9]||(l[9]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Frais de ramassage: ")],-1)),e("td",null,[e("p",Xe,r(s(i).frais_ramasseur),1)])])):y("",!0),e("tr",null,[l[10]||(l[10]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Destination : ")],-1)),e("td",null,[e("p",Ze,r(s(i).destination),1)])]),e("tr",null,[l[11]||(l[11]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),e("td",null,[e("p",et,[t(be,ce(("statutInfos"in c?c.statutInfos:s(me))(s(i).statut),{density:"default",label:"",size:"small"}),null,16)])])])]),_:1})]),_:1}),t(w,{cols:"12",lg:"6"},{default:a(()=>[t(ue,{class:"billing-address-table"},{default:a(()=>[e("tr",null,[l[12]||(l[12]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Vendeur: ")],-1)),e("td",null,[e("p",tt,r(s(i).vendeur),1)])]),e("tr",null,[l[13]||(l[13]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Vendeur: ")],-1)),e("td",null,[e("p",st,r(s(i).tel_vendeur),1)])]),e("tr",null,[l[14]||(l[14]=e("td",null,[e("h6",{class:"text-h6 text-no-wrap mb-2"}," Colis: ")],-1)),e("td",null,[e("p",at,r(s(i).nombre_colis),1)])])]),_:1})]),_:1})]),_:1}),t(Ce,{modelValue:s(I),"onUpdate:modelValue":l[1]||(l[1]=p=>b(I)?I.value=p:null),grow:"",class:"disable-tab-transition",stacked:""},{default:a(()=>[(m(),O(Ae,null,Ne(X,(p,ee)=>t(Ie,{key:ee},{default:a(()=>[t(Q,{size:"40",icon:p},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),t($e,{modelValue:s(I),"onUpdate:modelValue":l[2]||(l[2]=p=>b(I)?I.value=p:null),class:"mt-3"},{default:a(()=>[t(le,null,{default:a(()=>[t(L,{id:s(i).id,"current-statut":s(i).statut,item:s(i)},null,8,["id","current-statut","item"])]),_:1}),t(le,null,{default:a(()=>[t(Z,{histories:s(i).histories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"]),t(S,{color:"white",thickness:"1",opacity:"0.2",class:"my-6"}),t(Oe,{headers:te,items:s(i).colis,"items-per-page":5},null,8,["items"])]),_:1},512),[[ie,!s(T)]]),s(E)?ne((m(),h(G,{key:0},{default:a(()=>[t(A,null,{default:a(()=>[t(w,{md:"6",cols:"12"},{default:a(()=>[t(H,{modelValue:s(i).ramasseur_id,"onUpdate:modelValue":l[3]||(l[3]=p=>s(i).ramasseur_id=p),placeholder:"Ramasseurs",label:"Ramasseurs",items:s(V),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(w,{cols:"12",md:"6"},{default:a(()=>[t(D,{modelValue:s(i).frais_ramasseur,"onUpdate:modelValue":l[4]||(l[4]=p=>s(i).frais_ramasseur=p),rules:["requiredValidator"in c?c.requiredValidator:s(Ue)],label:"Frais de ramassage",type:"number",placeholder:"Frais de ramassage"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(w,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[t(U,{color:"secondary",onClick:l[5]||(l[5]=p=>T.value=!1)},{default:a(()=>l[15]||(l[15]=[R(" retour ")])),_:1}),t(U,{loading:s(_),onClick:Y},{default:a(()=>l[16]||(l[16]=[R(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[ie,s(T)]]):y("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},ot=ve(lt,[["__scopeId","data-v-5049a9f9"]]),nt={key:0},it={id:"print-area"},rt={class:"print-content"},dt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},ut={class:"d-flex align-center app-logo"},mt={class:"app-logo-title"},pt={class:"d-flex align-center destination"},ct={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},ft={class:"mb-0"},_t={class:"mb-0"},gt={class:"mb-0"},vt={class:"mb-0"},bt={class:"mb-0"},Vt={class:"mb-0"},yt={class:"mb-0"},wt={class:"mb-0"},xt={__name:"printRamassage",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(F,{emit:k}){const d=F,N=k;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){N("update:isPrintColis",!1)},(C,f)=>d.isPrintColis?(m(),O("div",nt,[e("div",it,[e("div",rt,[t(W,{class:"props.item-preview-wrapper"},{default:a(()=>[f[0]||(f[0]=e("div",null,null,-1)),e("div",dt,[e("div",null,[e("div",ut,[t(s(qe),{nodes:s(re).app.logo},null,8,["nodes"]),e("h6",mt,r(s(re).app.title),1)])]),e("div",pt,r(d.item.destination),1)]),t(S,{class:"border-solid"}),t(A,{class:"print-row little-margin"},{default:a(()=>[t(w,{class:"text"},{default:a(()=>[e("div",ct,[e("div",null,[e("p",ft," Code : "+r(d.item.code),1),e("p",_t," Nom : "+r(d.item.nom_client),1),e("p",gt," tel : "+r(d.item.tel_client),1)]),e("div",null,[e("p",vt,[t(Re,{size:"70",value:d.item.code},null,8,["value"])])])]),e("p",bt," Adresse : "+r(d.item.adresse),1)]),_:1})]),_:1}),t(S,{class:"border-solid"}),t(A,{class:"align-right little-margin"},{default:a(()=>[t(w,{cols:"12"},{default:a(()=>[e("p",Vt," Produits : "+r(d.item.produit),1),e("p",yt," Montant : "+r(d.item.montant),1)]),_:1})]),_:1}),t(S,{class:"border-solid"}),t(A,{class:"align-right little-margin"},{default:a(()=>[t(w,{cols:"12"},{default:a(()=>[e("p",wt," essayage : "+r(d.item.essayage?"OUI":"NON")+" | ouvrir : "+r(d.item.ouvrir?"OUI":"NON")+" | echange : "+r(d.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),t(S,{class:"border-solid"}),f[1]||(f[1]=e("p",{class:"mb-0"},[e("span",null," Remarque: "),e("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):y("",!0)}},ht=ve(xt,[["__scopeId","data-v-f626c156"]]),kt={class:"d-flex flex-wrap gap-4 ma-6"},Ct={class:"d-flex gap-4 flex-wrap align-center"},It={key:1},as={__name:"list",async setup(F){let k,d;const N=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Nombre de colis",key:"nombre_colis",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],C=u(),f=u(),$=u(!1),V=u(!1),i=u(),x=u(!1),J=u(),g=u(5),_=u(1),E=u(),q=u(),Y=v=>{V.value=!0,i.value=v},I=async()=>{let v="/api/ramassage/"+i.value.id;$.value=!0,M({method:"DELETE",url:v}).then(async o=>{o.status===200&&(V.value=!1,P.success(o.data),z()),$.value=!1}).catch(o=>{$.value=!1})},X=v=>{var o,j;E.value=(o=v.sortBy[0])==null?void 0:o.key,q.value=(j=v.sortBy[0])==null?void 0:j.order},{data:T,error:te,statusCode:c,isFetching:l,execute:z}=([k,d]=pe(()=>ze(Fe("/api/ramassage",{query:{code:C,statut:f,page:_,itemsPerPage:g,sortBy:E,orderBy:q}}))),k=await k,d(),k),L=Pe(),Z=de(()=>T.value.items),H=de(()=>T.value.total),D=u(!1),K=u(0),p=u(0),ee=v=>{p.value=v.id,K.value++,D.value=!0};return(v,o)=>{const j=fe,ye=_e,se=Be("IconBtn"),we=je,xe=ge,he=ot;return m(),O("div",null,[t(W,{title:"Filtres",class:"mb-6 d-print-none"},{default:a(()=>[t(G,null,{default:a(()=>[t(A,null,{default:a(()=>[t(w,{cols:"12",sm:"2"},{default:a(()=>[t(j,{modelValue:s(f),"onUpdate:modelValue":o[0]||(o[0]=n=>b(f)?f.value=n:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12",sm:"2"},{default:a(()=>[t(j,{modelValue:s(C),"onUpdate:modelValue":o[1]||(o[1]=n=>b(C)?C.value=n:null),placeholder:"Code"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(S),e("div",kt,[t(Le),e("div",Ct,[t(ye,{modelValue:s(g),"onUpdate:modelValue":o[2]||(o[2]=n=>b(g)?g.value=n:null),items:[5,10,20,25,50]},null,8,["modelValue"]),s(B)("create","ramassage")?(m(),h(U,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:o[3]||(o[3]=n=>s(L).push({name:"ramassage-add"}))},{default:a(()=>o[12]||(o[12]=[R(" Ajouter Ramassage ")])),_:1})):y("",!0)])]),t(S,{class:"mt-4"}),t(Ee,{"items-per-page":s(g),"onUpdate:itemsPerPage":o[5]||(o[5]=n=>b(g)?g.value=n:null),page:s(_),"onUpdate:page":o[6]||(o[6]=n=>b(_)?_.value=n:null),loading:s(l),headers:N,items:s(Z),"items-length":s(H),class:"text-no-wrap",locale:"fr","onUpdate:options":X},{"item.code":a(({item:n})=>[s(B)("show","ramassage")?(m(),h(U,{key:0,variant:"text",onClick:ae=>ee(n)},{default:a(()=>[R(r(n.code),1)]),_:2},1032,["onClick"])):(m(),O("span",It,r(n.code),1))]),"item.statut":a(({item:n})=>[t(be,ce(("statutInfos"in v?v.statutInfos:s(me))(n.statut),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":a(({item:n})=>[n.statut=="EN_ATTENTE"&&s(B)("update","ramassage")?(m(),h(se,{key:0,onClick:ae=>s(L).push("/ramassage/"+n.id)},{default:a(()=>[t(Q,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):y("",!0),n.statut=="EN_ATTENTE"?(m(),h(se,{key:1},{default:a(()=>[t(Q,{icon:"tabler-dots-vertical"}),t(He,{activator:"parent"},{default:a(()=>[t(Ke,null,{default:a(()=>[s(B)("delete","ramassage")?(m(),h(Me,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:ae=>Y(n)},{default:a(()=>o[13]||(o[13]=[R(" Delete ")])),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)]),bottom:a(()=>[t(we,{page:s(_),"onUpdate:page":o[4]||(o[4]=n=>b(_)?_.value=n:null),"items-per-page":s(g),"total-items":s(H)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),t(Ve,{modelValue:s(V),"onUpdate:modelValue":o[9]||(o[9]=n=>b(V)?V.value=n:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[t(xe,{onClick:o[7]||(o[7]=n=>V.value=!s(V))}),t(W,{title:"Êtes-vous sûr de vouloir supprimer le ramassage "+s(i).code+" ?"},{default:a(()=>[t(G,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[t(U,{color:"secondary",variant:"tonal",onClick:o[8]||(o[8]=n=>V.value=!1)},{default:a(()=>o[14]||(o[14]=[R(" Non ")])),_:1}),t(U,{loading:s($),onClick:I},{default:a(()=>o[15]||(o[15]=[R(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),s(x)?(m(),h(ht,{key:0,"is-print-ramassage":s(x),"onUpdate:isPrintRamassage":o[10]||(o[10]=n=>b(x)?x.value=n:null),item:s(J)},null,8,["is-print-ramassage","item"])):y("",!0),s(D)?(m(),h(he,{id:s(p),key:s(K),"is-show-item":s(D),"onUpdate:isShowItem":o[11]||(o[11]=n=>b(D)?D.value=n:null),onFetchItems:s(z)},null,8,["id","is-show-item","onFetchItems"])):y("",!0)])}}};export{as as default};
