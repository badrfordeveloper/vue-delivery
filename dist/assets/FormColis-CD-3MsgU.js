import{r as R,P as He,V as We}from"./VForm-CMCpW6Fd.js";import{a1 as re,al as Ie,a8 as de,ab as Ye,r as T,ar as B,am as Y,Y as A,ac as Je,as as Qe,w as M,at as ve,au as Xe,af as ce,b as l,F as E,q,$ as pe,av as Ze,aw as el,t as Ae,ax as ll,ay as al,az as Ve,aA as ye,aB as tl,o as se,c as xe,m as n,f as ol,y as ul,aC as nl,h as sl,e as r,z as il,aD as ge,aE as be,x as rl,a2 as he,an as dl,aF as cl,aq as ml,aG as _e,d as te,v as fl,ai as vl}from"./index-DD7JbDxk.js";import{m as pl,u as Vl,V as Ce,a as j,b as yl,c as we}from"./VTextField-D4UJrYDN.js";import{m as gl,u as bl,V as hl,a as _l,b as Cl,c as ie,d as wl,e as Sl}from"./VSelect-nxaznvC5.js";import{m as kl,u as Pl}from"./filter-aNf94gTY.js";import{f as Il}from"./forwardRefs-DWGaNmQL.js";import{u as Al,V as xl,a as Se}from"./VList-f_0I5L_Q.js";import{m as Fl}from"./VImg-9WcrJedd.js";import{V as Rl}from"./VMenu-CsfeN7cH.js";import{V as ql}from"./VAvatar-BfkrWQxM.js";import{V as Tl}from"./VChip-Swjz0Prw.js";import{_ as Dl}from"./AppTextField-oLCXZWk_.js";import{$ as ke}from"./api-DoENDU7p.js";import{t as Pe}from"./toast-CUbcpQy7.js";import{V as L,a as S}from"./VRow-DLetuWDj.js";import{V as oe}from"./VCard-BRUBZ8oR.js";import{V as ue}from"./VCardText-BL_NRqOR.js";function Ul(e,p,u){if(p==null)return e;if(Array.isArray(p))throw new Error("Multiple matches is not implemented");return typeof p=="number"&&~p?l(E,null,[l("span",{class:"v-autocomplete__unmask"},[e.substr(0,p)]),l("span",{class:"v-autocomplete__mask"},[e.substr(p,u)]),l("span",{class:"v-autocomplete__unmask"},[e.substr(p+u)])]):e}const Ol=re({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...kl({filterKeys:["title"]}),...gl(),...Ie(pl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Fl({transition:!1})},"VAutocomplete"),$l=de()({name:"VAutocomplete",props:Ol(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,p){let{slots:u}=p;const{t:v}=Ye(),V=T(),h=B(!1),y=B(!0),x=B(!1),d=T(),D=T(),s=Y(e,"menu"),t=A({get:()=>s.value,set:a=>{var i;s.value&&!a&&((i=d.value)!=null&&i.Î¨openChildren.size)||(s.value=a)}}),o=B(-1),k=A(()=>{var a;return(a=V.value)==null?void 0:a.color}),m=A(()=>t.value?e.closeText:e.openText),{items:z,transformIn:J,transformOut:Q}=Al(e),{textColorClasses:Fe,textColorStyles:Re}=Je(k),_=Y(e,"search",""),f=Y(e,"modelValue",[],a=>J(a===null?[null]:Qe(a)),a=>{const i=Q(a);return e.multiple?i:i[0]??null}),qe=A(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:f.value.length),G=Vl(e),{filteredItems:X,getMatches:Te}=Pl(e,z,()=>y.value?"":_.value),F=A(()=>e.hideSelected?X.value.filter(a=>!f.value.some(i=>i.value===a.value)):X.value),K=A(()=>!!(e.chips||u.chip)),N=A(()=>K.value||!!u.selection),De=A(()=>f.value.map(a=>a.props.value)),Z=A(()=>{var i;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&_.value===((i=F.value[0])==null?void 0:i.title))&&F.value.length>0&&!y.value&&!x.value}),ee=A(()=>e.hideNoData&&!F.value.length||G.isReadonly.value||G.isDisabled.value),le=T(),Ue=bl(le,V);function Oe(a){e.openOnClear&&(t.value=!0),_.value=""}function $e(){ee.value||(t.value=!0)}function Me(a){ee.value||(h.value&&(a.preventDefault(),a.stopPropagation()),t.value=!t.value)}function Ee(a){var i;al(a)&&((i=V.value)==null||i.focus())}function Ne(a){var c,g,P;if(G.isReadonly.value)return;const i=V.value.selectionStart,b=f.value.length;if((o.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(t.value=!0),["Escape"].includes(a.key)&&(t.value=!1),Z.value&&["Enter","Tab"].includes(a.key)&&!f.value.some(C=>{let{value:w}=C;return w===F.value[0].value})&&U(F.value[0]),a.key==="ArrowDown"&&Z.value&&((c=le.value)==null||c.focus("next")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&N.value&&f.value.length>0&&!_.value)return U(f.value[0],!1);if(~o.value){const C=o.value;U(f.value[o.value],!1),o.value=C>=b-1?b-2:C}else a.key==="Backspace"&&!_.value&&(o.value=b-1)}if(e.multiple){if(a.key==="ArrowLeft"){if(o.value<0&&i>0)return;const C=o.value>-1?o.value-1:b-1;f.value[C]?o.value=C:(o.value=-1,V.value.setSelectionRange((g=_.value)==null?void 0:g.length,(P=_.value)==null?void 0:P.length))}if(a.key==="ArrowRight"){if(o.value<0)return;const C=o.value+1;f.value[C]?o.value=C:(o.value=-1,V.value.setSelectionRange(0,0))}}}function Be(a){if(Ve(V.value,":autofill")||Ve(V.value,":-webkit-autofill")){const i=z.value.find(b=>b.title===a.target.value);i&&U(i)}}function Le(){var a;e.eager&&((a=D.value)==null||a.calculateVisibleItems())}function je(){var a;h.value&&(y.value=!0,(a=V.value)==null||a.focus())}function ze(a){h.value=!0,setTimeout(()=>{x.value=!0})}function Ge(a){x.value=!1}function Ke(a){(a==null||a===""&&!e.multiple&&!N.value)&&(f.value=[])}const ae=B(!1);function U(a){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const b=f.value.findIndex(g=>e.valueComparator(g.value,a.value)),c=i??!~b;if(~b){const g=c?[...f.value,a]:[...f.value];g.splice(b,1),f.value=g}else c&&(f.value=[...f.value,a]);e.clearOnSelect&&(_.value="")}else{const b=i!==!1;f.value=b?[a]:[],_.value=b&&!N.value?a.title:"",ve(()=>{t.value=!1,y.value=!0})}}return M(h,(a,i)=>{var b;a!==i&&(a?(ae.value=!0,_.value=e.multiple||N.value?"":String(((b=f.value.at(-1))==null?void 0:b.props.title)??""),y.value=!0,ve(()=>ae.value=!1)):(!e.multiple&&_.value==null&&(f.value=[]),t.value=!1,f.value.some(c=>{let{title:g}=c;return g===_.value})||(_.value=""),o.value=-1))}),M(_,a=>{!h.value||ae.value||(a&&(t.value=!0),y.value=!a)}),M(t,()=>{if(!e.hideSelected&&t.value&&f.value.length){const a=F.value.findIndex(i=>f.value.some(b=>i.value===b.value));Xe&&window.requestAnimationFrame(()=>{var i;a>=0&&((i=D.value)==null||i.scrollToIndex(a))})}}),M(()=>e.items,(a,i)=>{t.value||h.value&&!i.length&&a.length&&(t.value=!0)}),ce(()=>{const a=!!(!e.hideNoData||F.value.length||u["prepend-item"]||u["append-item"]||u["no-data"]),i=f.value.length>0,b=Ce.filterProps(e);return l(Ce,q({ref:V},b,{modelValue:_.value,"onUpdate:modelValue":[c=>_.value=c,Ke],focused:h.value,"onUpdate:focused":c=>h.value=c,validationValue:f.externalValue,counterValue:qe.value,dirty:i,onChange:Be,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":t.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!N.value,"v-autocomplete--selecting-index":o.value>-1},e.class],style:e.style,readonly:G.isReadonly.value,placeholder:i?void 0:e.placeholder,"onClick:clear":Oe,"onMousedown:control":$e,onKeydown:Ne}),{...u,default:()=>l(E,null,[l(Rl,q({ref:d,modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,activator:"parent",contentClass:"v-autocomplete__content",disabled:ee.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Le,onAfterLeave:je},e.menuProps),{default:()=>[a&&l(xl,q({ref:le,selected:De.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:Ee,onFocusin:ze,onFocusout:Ge,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Ue,e.listProps),{default:()=>{var c,g,P;return[(c=u["prepend-item"])==null?void 0:c.call(u),!F.value.length&&!e.hideNoData&&(((g=u["no-data"])==null?void 0:g.call(u))??l(Se,{title:v(e.noDataText)},null)),l(hl,{ref:D,renderless:!0,items:F.value},{default:C=>{var fe;let{item:w,index:O,itemRef:I}=C;const me=q(w.props,{ref:I,key:O,active:Z.value&&O===0?!0:void 0,onClick:()=>U(w,null)});return((fe=u.item)==null?void 0:fe.call(u,{item:w,index:O,props:me}))??l(Se,q(me,{role:"option"}),{prepend:H=>{let{isSelected:W}=H;return l(E,null,[e.multiple&&!e.hideSelected?l(_l,{key:w.value,modelValue:W,ripple:!1,tabindex:"-1"},null):void 0,w.props.prependAvatar&&l(ql,{image:w.props.prependAvatar},null),w.props.prependIcon&&l(pe,{icon:w.props.prependIcon},null)])},title:()=>{var H,W;return y.value?w.title:Ul(w.title,(H=Te(w))==null?void 0:H.title,((W=_.value)==null?void 0:W.length)??0)}})}}),(P=u["append-item"])==null?void 0:P.call(u)]}})]}),f.value.map((c,g)=>{function P(I){I.stopPropagation(),I.preventDefault(),U(c,!1)}const C={"onClick:close":P,onKeydown(I){I.key!=="Enter"&&I.key!==" "||(I.preventDefault(),I.stopPropagation(),P(I))},onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},w=K.value?!!u.chip:!!u.selection,O=w?Ze(K.value?u.chip({item:c,index:g,props:C}):u.selection({item:c,index:g})):void 0;if(!(w&&!O))return l("div",{key:c.value,class:["v-autocomplete__selection",g===o.value&&["v-autocomplete__selection--selected",Fe.value]],style:g===o.value?Re.value:{}},[K.value?u.chip?l(el,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[O]}):l(Tl,q({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},C),null):O??l("span",{class:"v-autocomplete__selection-text"},[c.title,e.multiple&&g<f.value.length-1&&l("span",{class:"v-autocomplete__selection-comma"},[Ae(",")])])])})]),"append-inner":function(){var C;for(var c=arguments.length,g=new Array(c),P=0;P<c;P++)g[P]=arguments[P];return l(E,null,[(C=u["append-inner"])==null?void 0:C.call(u,...g),e.menuIcon?l(pe,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Me,onClick:ll,"aria-label":v(m.value),title:v(m.value),tabindex:"-1"},null):void 0])}})}),Il({isFocused:h,isPristine:y,menu:t,search:_,filteredItems:X,select:U},V)}}),Ml=Object.assign({name:"AppAutocomplete",inheritAttrs:!1},{__name:"AppAutocomplete",setup(e){const p=A(()=>{const V=ye().id,h=tl();return V?`app-autocomplete-${V}`:h}),u=A(()=>ye().label);return(v,V)=>(se(),xe("div",{class:rl(["app-autocomplete flex-grow-1",v.$attrs.class])},[n(u)?(se(),ol(j,{key:0,for:n(p),class:"mb-1 text-body-2",text:n(u)},null,8,["for","text"])):ul("",!0),l($l,ge(be({...v.$attrs,class:null,label:void 0,id:n(p),variant:"outlined",menuProps:{contentClass:["app-inner-list","app-autocomplete__content","v-autocomplete__content"]}})),nl({_:2},[sl(v.$slots,(h,y)=>({name:y,fn:r(x=>[il(v.$slots,y,ge(be(x||{})))])}))]),1040)],2))}}),El=re({...Cl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),$=de()({name:"VRadio",props:El(),setup(e,p){let{slots:u}=p;return ce(()=>{const v=ie.filterProps(e);return l(ie,q(v,{class:["v-radio",e.class],style:e.style,type:"radio"}),u)}),{}}}),Nl=re({height:{type:[Number,String],default:"auto"},...yl(),...Ie(wl(),["multiple"]),trueIcon:{type:he,default:"$radioOn"},falseIcon:{type:he,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),ne=de()({name:"VRadioGroup",inheritAttrs:!1,props:Nl(),emits:{"update:modelValue":e=>!0},setup(e,p){let{attrs:u,slots:v}=p;const V=dl(),h=A(()=>e.id||`radio-group-${V}`),y=Y(e,"modelValue");return ce(()=>{const[x,d]=cl(u),D=we.filterProps(e),s=ie.filterProps(e),t=v.label?v.label({label:e.label,props:{for:h.value}}):e.label;return l(we,q({class:["v-radio-group",e.class],style:e.style},x,D,{modelValue:y.value,"onUpdate:modelValue":o=>y.value=o,id:h.value}),{...v,default:o=>{let{id:k,messagesId:m,isDisabled:z,isReadonly:J}=o;return l(E,null,[t&&l(j,{id:k.value},{default:()=>[t]}),l(Sl,q(s,{id:k.value,"aria-describedby":m.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:z.value,readonly:J.value,"aria-labelledby":t?k.value:void 0,multiple:!1},d,{modelValue:y.value,"onUpdate:modelValue":Q=>y.value=Q}),v)])}})}),{}}}),Bl={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},Ll={class:"d-flex flex-column justify-center"},jl={class:"text-h4 font-weight-medium"},sa={__name:"FormColis",props:{method:{type:String,required:!0},item:{type:Object,required:!1},identity:{type:String,required:!1}},async setup(e){let p,u;const v=e,V=T(),h=T([]),y=T(!1);h.value=([p,u]=ml(()=>ke("/api/tarifs").then(s=>s.data.items)),p=await p,u(),p);let x={nom_client:"",tel_client:"",tarif_id:"",frais_livraison:"",adresse:"",produit:"",montant:"",commentaire_vendeur:"",essayage:0,ouvrir:0,echange:0};const d=T(structuredClone(_e(x)));M(()=>v.item,s=>{v.method=="PUT"&&(d.value={...s})},{immediate:!0}),M(()=>d.value.tarif_id,s=>{const t=h.value.find(o=>o.id===s);d.value.frais_livraison=t?t.tarif:""});const D=async()=>{const{valid:s}=await V.value.validate();if(s){let t="/api/colis";v.method=="PUT"&&(t="/api/colis/"+v.identity),y.value=!0,ke({method:v.method,url:t,data:d.value}).then(async o=>{var k;o.status===200&&(Pe.success(o.data),v.method=="POST"&&((k=V.value)==null||k.reset(),d.value=structuredClone(_e(x)))),y.value=!1}).catch(o=>{if(y.value=!1,o.response&&o.response.status===422){const k=o.response.data.errors;for(let m in k)Pe.error(`${m}: ${k[m].join(", ")}`)}})}};return(s,t)=>{const o=Dl,k=Ml;return se(),xe(E,null,[te("div",Bl,[te("div",Ll,[te("h4",jl,fl(v.method=="POST"?"Ajouter Colis":"Modifier Colis"),1)])]),l(We,{ref_key:"refForm",ref:V,class:"mt-3"},{default:r(()=>[l(L,null,{default:r(()=>[l(S,{cols:"12",md:"6"},{default:r(()=>[l(S,{cols:"12",class:"pa-0"},{default:r(()=>[l(oe,{title:"Informations du client"},{default:r(()=>[l(ue,null,{default:r(()=>[l(L,null,{default:r(()=>[l(S,{md:"6",cols:"12"},{default:r(()=>[l(o,{modelValue:n(d).nom_client,"onUpdate:modelValue":t[0]||(t[0]=m=>n(d).nom_client=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],placeholder:"Nom",label:"Nom"},null,8,["modelValue","rules"])]),_:1}),l(S,{cols:"12",md:"6"},{default:r(()=>[l(o,{modelValue:n(d).tel_client,"onUpdate:modelValue":t[1]||(t[1]=m=>n(d).tel_client=m),rules:["requiredValidator"in s?s.requiredValidator:n(R),"PhoneValidator"in s?s.PhoneValidator:n(He)],label:"Telephone",size:"10",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(S,{cols:"12",class:"px-0"},{default:r(()=>[l(oe,{title:"Informations d'adresse"},{default:r(()=>[l(ue,null,{default:r(()=>[l(L,null,{default:r(()=>[l(S,{md:"6",cols:"12"},{default:r(()=>[l(k,{modelValue:n(d).tarif_id,"onUpdate:modelValue":t[2]||(t[2]=m=>n(d).tarif_id=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],label:"Destination",items:n(h),"item-title":"destination","item-value":"id",placeholder:"Select State"},null,8,["modelValue","rules","items"])]),_:1}),l(S,{cols:"12",md:"6"},{default:r(()=>[l(o,{modelValue:n(d).frais_livraison,"onUpdate:modelValue":t[3]||(t[3]=m=>n(d).frais_livraison=m),disabled:"",label:"Frais de livraison",placeholder:""},null,8,["modelValue"])]),_:1}),l(S,{cols:"12"},{default:r(()=>[l(o,{modelValue:n(d).adresse,"onUpdate:modelValue":t[4]||(t[4]=m=>n(d).adresse=m),"prepend-inner-icon":"tabler-map-pin",rules:["requiredValidator"in s?s.requiredValidator:n(R)],label:"Adresse",placeholder:"Adresse"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(S,{cols:"12",md:"6"},{default:r(()=>[l(oe,{title:"Informations des produits"},{default:r(()=>[l(ue,null,{default:r(()=>[l(L,null,{default:r(()=>[l(S,{cols:"12"},{default:r(()=>[l(o,{modelValue:n(d).produit,"onUpdate:modelValue":t[5]||(t[5]=m=>n(d).produit=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],label:"Produits",placeholder:"Produits"},null,8,["modelValue","rules"])]),_:1}),l(S,{cols:"12",md:"6"},{default:r(()=>[l(o,{modelValue:n(d).montant,"onUpdate:modelValue":t[6]||(t[6]=m=>n(d).montant=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],type:"number",label:"Montant Total",placeholder:"Montant Total"},null,8,["modelValue","rules"])]),_:1}),l(S,{cols:"12",md:"6",class:"app-text-field"},{default:r(()=>[l(j,{text:"Essayage",class:"mb-1 text-body-2 text-wrap"}),l(ne,{modelValue:n(d).essayage,"onUpdate:modelValue":t[7]||(t[7]=m=>n(d).essayage=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],inline:""},{default:r(()=>[l($,{label:"Non",value:0,density:"compact"}),l($,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),l(S,{cols:"12",md:"6",class:"app-text-field"},{default:r(()=>[l(j,{text:"Ouvrir",class:"mb-1 text-body-2 text-wrap"}),l(ne,{modelValue:n(d).ouvrir,"onUpdate:modelValue":t[8]||(t[8]=m=>n(d).ouvrir=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],inline:""},{default:r(()=>[l($,{label:"Non",value:0,density:"compact"}),l($,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),l(S,{cols:"12",md:"6",class:"app-text-field"},{default:r(()=>[l(j,{text:"Echange",class:"mb-1 text-body-2 text-wrap"}),l(ne,{modelValue:n(d).echange,"onUpdate:modelValue":t[9]||(t[9]=m=>n(d).echange=m),rules:["requiredValidator"in s?s.requiredValidator:n(R)],inline:""},{default:r(()=>[l($,{label:"Non",value:0,density:"compact"}),l($,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),l(S,{cols:"12"},{default:r(()=>[l(o,{modelValue:n(d).commentaire_vendeur,"onUpdate:modelValue":t[10]||(t[10]=m=>n(d).commentaire_vendeur=m),label:"commentaire",placeholder:"commentaire"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(L,null,{default:r(()=>[l(S,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:r(()=>[l(vl,{loading:n(y),onClick:D},{default:r(()=>t[11]||(t[11]=[Ae(" Enregistrer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)],64)}}};export{sa as _};
