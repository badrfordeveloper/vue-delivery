import{s as L}from"./statutInfos-DxhNQ7GY.js";import{r as te,V as ye,$ as X}from"./VForm-CJaJdYDY.js";import{r as u,w as ae,Y as H,c as $,o as p,b as t,F as se,h as le,f as A,e as s,v as k,x as b,n as e,ak as I,d as a,m as N,ai as j,A as Y,aq as Ve,as as pe,J as ce,$ as oe,s as we,K as fe,H as ve,j as $e,a as Ne}from"./index-fsRyKtKg.js";import{_ as Oe,a as Ue,V as De,b as Pe,c as qe,d as _e,e as je}from"./VTabs-B9kq2Fll.js";import{_ as ue}from"./AppTextField-DK30dysE.js";import{_ as Ee}from"./AppSelect-D_S-Wr8X.js";import{_ as xe}from"./AppTextarea-BPzQHCZZ.js";import{t as B}from"./toast-DS4ULJxE.js";import{V as ge}from"./VAlert-BfXbiEOA.js";import{V as O,a as y}from"./VRow-4KV1s1En.js";import{V as ee,a as Fe}from"./VList-Bn2doB7Z.js";import{_ as he}from"./DialogCloseBtn-xJDt34SS.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ne}from"./VCard-DomSwUkk.js";import{V as re}from"./VCardText-DqluLgVN.js";import{V as be,b as Me,a as Be,_ as Le,c as Ge}from"./VDataTableServer-B3amBy8F.js";import{V as Se}from"./VChip-NqVJeC3x.js";import{V as J}from"./VDivider-pvaLhjLf.js";import{V as Ae}from"./VDialog-DJUiE49P.js";import{V as ze}from"./VNodeRenderer-CB0glb9e.js";import{Q as He}from"./qrcode.vue.esm-pbmtpKko.js";import{u as Ke}from"./index-z8Ds3KiQ.js";import{V as Qe}from"./VSpacer-XUrmBUhf.js";import{V as We}from"./VMenu-Cl8KFenY.js";import"./VInput-Bk9SxLVM.js";import"./VImg-iMHcjiPU.js";import"./forwardRefs-DWGaNmQL.js";import"./VOverlay-Dm4bTj6U.js";import"./VTextField-CCTLa4RH.js";import"./VSelect-DAmpojO8.js";import"./VAvatar-BQI6NB6w.js";/* empty css              */import"./filter-i6tYmAT2.js";const Ye={__name:"Entrepot",props:{item:{type:Object,required:!0},isShowEntrepot:{type:Boolean,required:!0}},emits:["hideEntrepot","getItemData"],setup(K,{emit:U}){const v=K,D=U,x=u({}),_=u("");ae(()=>v.item,f=>{x.value=f},{immediate:!0});const h=u(),w=u(!1),o=u([]),C=u([]),R=u([]),g=u(!1),V=u(!1),G=async()=>{const{valid:f}=await h.value.validate();f&&await z()},Q=()=>{D("hideEntrepot")},z=f=>{w.value=!0,g.value=!1,g.value=!1,X({method:"POST",url:"/api/scannerEntrepot",data:{ramassage_id:x.value.id,commonColis:l.value,duplicatedColis:n.value,externeColis:c.value,missingColis:E.value}}).then(async r=>{if(r.status===200){let d=r.data;console.log(d),o.value=d.success,C.value=d.errors,R.value=d.colisError,g.value=!0,V.value=C.value.length==0,C.value.length==0&&D("getItemData")}w.value=!1}).catch(r=>{w.value=!1,r.response&&r.response.status===422?B.error(r.response.data.message):B.error("something wrong")})},S=H(()=>x.value.colis.map(f=>f.code)),F=H(()=>_.value?_.value.split(`
`).map(f=>f.trim()).filter(f=>f.length>0):[]),n=H(()=>F.value.filter((f,r,d)=>d.indexOf(f)!==r)),c=H(()=>{const f=new Set(S.value);let r=F.value.filter(d=>!f.has(d));return r=new Set(r),[...r]}),E=H(()=>{const f=new Set(F.value);return S.value.filter(r=>!f.has(r))}),l=H(()=>{const f=new Set(S.value),r=new Set(F.value);return[...f].filter(d=>r.has(d))});return(f,r)=>{const d=xe;return p(),$(se,null,[(p(!0),$(se,null,le(e(o),(P,q)=>(p(),A(ge,{key:q,modelValue:e(V),"onUpdate:modelValue":r[0]||(r[0]=W=>I(V)?V.value=W:null),color:"success",class:"ma-1"},{default:s(()=>[k(b(P),1)]),_:2},1032,["modelValue"]))),128)),(p(!0),$(se,null,le(e(C),(P,q)=>(p(),A(ge,{key:q,modelValue:e(g),"onUpdate:modelValue":r[1]||(r[1]=W=>I(g)?g.value=W:null),color:"error",class:"ma-1"},{default:s(()=>[k(b(P),1)]),_:2},1032,["modelValue"]))),128)),t(ye,{ref_key:"refForm",ref:h,class:"mt-3"},{default:s(()=>[a("div",null,[t(O,{class:"d-flex align-center justify-center"},{default:s(()=>[t(y,{cols:"12"},{default:s(()=>[t(d,{modelValue:e(_),"onUpdate:modelValue":r[2]||(r[2]=P=>I(_)?_.value=P:null),rows:"5","row-height":"20",label:"Scanner",rules:["requiredValidator"in f?f.requiredValidator:e(te)],placeholder:"Select pour scanner"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),t(O,null,{default:s(()=>[e(R).length>0?(p(),A(y,{key:0,cols:"12",md:"3"},{default:s(()=>[r[3]||(r[3]=a("p",{class:"text-error"}," Colis erroné ",-1)),t(ee,{items:e(R),class:"border border-error border-opacity-75"},null,8,["items"])]),_:1})):N("",!0),e(n).length>0?(p(),A(y,{key:1,cols:"12",md:"3"},{default:s(()=>[r[4]||(r[4]=a("p",{class:"text-error"}," Colis dupliqués ",-1)),t(ee,{items:e(n),class:"border border-error border-opacity-75"},null,8,["items"])]),_:1})):N("",!0),t(y,{cols:"12",md:"3"},{default:s(()=>[r[5]||(r[5]=k(" Colis manquant ")),t(ee,{items:e(E)},null,8,["items"])]),_:1}),t(y,{cols:"12",md:"3"},{default:s(()=>[r[6]||(r[6]=k(" Colis externe ")),t(ee,{items:e(c)},null,8,["items"])]),_:1})]),_:1}),t(O,null,{default:s(()=>[t(y,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[t(j,{color:"secondary",onClick:Q},{default:s(()=>r[7]||(r[7]=[k(" retour ")])),_:1}),t(j,{loading:e(w),onClick:G},{default:s(()=>r[8]||(r[8]=[k(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)],64)}}},Je={key:0,class:"text-center"},Xe={key:0},Ze={key:1},et={class:"text-center"},tt={key:0},st={key:1},at={__name:"actionsRamassage",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},emits:["getItemData"],setup(K,{emit:U}){const v=K,D=U,x=u({}),_=u(""),h=u(!1),w=u(),o=u({id:null,statut:"",nombre_colis_ramasseur:"",commentaire:"",date:"",file:""}),C=()=>{h.value=!1,g.value=!1};ae(()=>v.currentStatut,n=>{_.value=n},{immediate:!0}),ae(()=>v.item,n=>{x.value=n},{immediate:!0});const R=u(""),g=u(!1),V=n=>{h.value=!0,o.value.statut=n,n=="ENTREPOT"&&(g.value=!0)},G=async()=>{const{valid:n}=await w.value.validate();n&&await Q(o.value.statut)},Q=async n=>{o.value.statut=n,o.value.id=v.id,R.value=n,X({method:"POST",url:"/api/updateStatutRamassage",data:o.value}).then(async c=>{c.status===200&&(B.success(c.data),n!="COMMENTAIRE"&&(_.value=n),h.value=!1,D("getItemData")),R.value=""}).catch(c=>{R.value="",c.response&&c.response.status===422?B.error(c.response.data.message):B.error("something wrong")})},z=Y("livreur","action"),S=Y("gestionnaire","action"),F=H(()=>{let n=[];return n.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),_.value=="REPORTE"&&(z||S)&&n.push({...L("EN_COURS_RAMASSAGE"),statut:"EN_COURS_RAMASSAGE"}),_.value=="EN_ATTENTE"?z&&n.push({...L("EN_COURS_RAMASSAGE"),statut:"EN_COURS_RAMASSAGE"}):_.value=="EN_COURS_RAMASSAGE"||_.value=="REPORTE"?(z&&(n.push({statut:"RAMASSE",...L("RAMASSE")}),n.push({statut:"REPORTE",...L("REPORTE")})),S&&n.push({statut:"ANNULE",...L("ANNULE")})):_.value=="RAMASSE"&&S&&(n.push({...L("ENTREPOT"),statut:"ENTREPOT"}),x.value.colis.length==0&&n.push({statut:"ANNULE",...L("ANNULE")})),n});return(n,c)=>{const E=Ye,l=ue,f=Oe,r=xe;return e(h)?(p(),$("div",Ze,[e(o).statut=="ENTREPOT"&&e(g)?(p(),A(E,{key:0,"is-show-entrepot":e(g),"onUpdate:isShowEntrepot":c[0]||(c[0]=d=>I(g)?g.value=d:null),"hide-entrepot":"",item:e(x),onHideEntrepot:C,onGetItemData:c[1]||(c[1]=d=>D("getItemData"))},null,8,["is-show-entrepot","item"])):(p(),A(ye,{key:1,ref_key:"refForm",ref:w,class:"mt-3"},{default:s(()=>[a("p",et," Statut à envoyer : "+b(("statutInfos"in n?n.statutInfos:e(L))(e(o).statut).text),1),e(o).statut=="RAMASSE"?(p(),$("div",tt,[t(O,{class:"d-flex align-center justify-center"},{default:s(()=>[t(y,{md:"6",cols:"12"},{default:s(()=>[t(l,{modelValue:e(o).nombre_colis_ramasseur,"onUpdate:modelValue":c[2]||(c[2]=d=>e(o).nombre_colis_ramasseur=d),rules:["requiredValidator"in n?n.requiredValidator:e(te)],placeholder:"Nombre de colis",label:"Nombre de colis",type:"number"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):N("",!0),e(o).statut=="REPORTE"?(p(),$("div",st,[t(O,{class:"d-flex align-center justify-center"},{default:s(()=>[t(y,{md:"6",cols:"12"},{default:s(()=>[t(f,{modelValue:e(o).date,"onUpdate:modelValue":c[3]||(c[3]=d=>e(o).date=d),rules:["requiredValidator"in n?n.requiredValidator:e(te)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):N("",!0),a("div",null,[t(O,{class:"d-flex align-center justify-center"},{default:s(()=>[t(y,{md:"6",cols:"12"},{default:s(()=>[t(r,{modelValue:e(o).commentaire,"onUpdate:modelValue":c[4]||(c[4]=d=>e(o).commentaire=d),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE","REPORTE","ANNULE"].includes(e(o).statut)?["requiredValidator"in n?n.requiredValidator:e(te)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),t(O,null,{default:s(()=>[t(y,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[t(j,{color:"secondary",onClick:c[5]||(c[5]=d=>h.value=!1)},{default:s(()=>c[6]||(c[6]=[k(" retour ")])),_:1}),t(j,{loading:e(R)==e(o).statut,onClick:G},{default:s(()=>c[7]||(c[7]=[k(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512))])):(p(),$("div",Je,[(p(!0),$(se,null,le(e(F),(d,P)=>(p(),A(j,{key:P,color:d.color,class:"ma-1",loading:e(R)==d.statut,onClick:q=>V(d.statut)},{default:s(()=>[k(b(d.text),1)]),_:2},1032,["color","loading","onClick"]))),128)),e(F).length==0?(p(),$("div",Xe," Aucune action requise ")):N("",!0)]))}}},lt={key:0,class:"text-end position-absolute right-0"},ot={class:"text-body-1 mb-2"},nt={class:"text-body-1 mb-2"},rt={class:"text-body-1 mb-2"},it={key:0},ut={class:"text-body-1 mb-2"},dt={class:"text-body-1 mb-2"},mt={class:"text-body-1 mb-2"},pt={class:"text-body-1 mb-2"},ct={class:"text-body-1 mb-2"},ft={class:"text-body-1 mb-2"},vt={__name:"ShowRamassage",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(K,{emit:U}){let v,D;const x=K,_=U;let h={id:"",nom_vendeur:"",tel_vendeur:"",frais_ramasseur:"",tel_ramasseur:"",tarif_id:"",adresse:"",ramasseur:"",ramasseur_id:"",statut:"",vendeur:"",nombre_colis:"",colis:[],histories:[]};const w=([v,D]=Ve(()=>X("/api/ramasseurs").then(E=>E.data)),v=await v,D(),v),o=u(structuredClone(pe(h))),C=u(!1),R=async E=>{C.value=!0,await X("/api/ramassage/"+E).then(async l=>{l.status===200&&(o.value=l.data),C.value=!1}).catch(l=>{C.value=!1,l.response&&l.response.status===422?B.error(l.response.data.message):B.error("something wrong")})};ae(()=>x.id,E=>{R(E)},{immediate:!0});const g=()=>{_("update:isShowItem",!1),_("fetchItems"),o.value=structuredClone(pe(h))},V=u(!1),G=Y("gestionnaire","action"),Q=Y("livreur","action"),z=E=>{V.value=!0,X({method:"POST",url:"/api/parametrerRamassage",data:{id:o.value.id,ramasseur_id:o.value.ramasseur_id,frais_ramasseur:o.value.frais_ramasseur}}).then(async l=>{V.value=!1,l.status===200&&B.success(l.data),R(o.value.id),n.value=!1}).catch(l=>{V.value=!1,l.response&&l.response.status===422?B.error(l.response.data.message):B.error("something wrong")})},S=u("Actions"),F=["tabler-adjustments-share","tabler-logs"],n=u(!1),c=[{title:"code",key:"code"},{title:"destination",key:"destination"}];return(E,l)=>{const f=he,r=at,d=je,P=Ee,q=ue,W=Ue;return p(),A(Ae,{width:E.$vuetify.display.smAndDown?"auto":900,"model-value":x.isShowItem,scrollable:"","onUpdate:modelValue":g},{default:s(()=>[t(f,{onClick:g}),t(W,{title:"Details Ramassage",loading:e(C),"no-actions":""},{default:s(()=>[t(ne,null,{default:s(()=>[ce(t(re,null,{default:s(()=>[e(G)?(p(),$("div",lt,[t(j,{icon:"",class:"rounded-0",onClick:l[0]||(l[0]=T=>n.value=!0)},{default:s(()=>[t(oe,{size:"22",icon:"tabler-settings"})]),_:1})])):N("",!0),t(O,null,{default:s(()=>[t(y,{cols:"12",lg:"6"},{default:s(()=>[t(be,{class:"billing-address-table"},{default:s(()=>[a("tr",null,[l[7]||(l[7]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),a("td",null,[a("p",ot,b(e(o).code),1)])]),a("tr",null,[l[8]||(l[8]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramasseur : ")],-1)),a("td",null,[a("p",nt,b(e(o).ramasseur),1)])]),a("tr",null,[l[9]||(l[9]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Ramasseur: ")],-1)),a("td",null,[a("p",rt,b(e(o).tel_ramasseur),1)])]),e(Q)?(p(),$("tr",it,[l[10]||(l[10]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Frais de ramassage: ")],-1)),a("td",null,[a("p",ut,b(e(o).frais_ramasseur),1)])])):N("",!0),a("tr",null,[l[11]||(l[11]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Destination : ")],-1)),a("td",null,[a("p",dt,b(e(o).destination),1)])]),a("tr",null,[l[12]||(l[12]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),a("td",null,[a("p",mt,[t(Se,we(("statutInfos"in E?E.statutInfos:e(L))(e(o).statut),{density:"default",label:"",size:"small"}),null,16)])])])]),_:1})]),_:1}),t(y,{cols:"12",lg:"6"},{default:s(()=>[t(be,{class:"billing-address-table"},{default:s(()=>[a("tr",null,[l[13]||(l[13]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Vendeur: ")],-1)),a("td",null,[a("p",pt,b(e(o).vendeur),1)])]),a("tr",null,[l[14]||(l[14]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Vendeur: ")],-1)),a("td",null,[a("p",ct,b(e(o).tel_vendeur),1)])]),a("tr",null,[l[15]||(l[15]=a("td",null,[a("h6",{class:"text-h6 text-no-wrap mb-2"}," Colis: ")],-1)),a("td",null,[a("p",ft,b(e(o).nombre_colis),1)])])]),_:1})]),_:1})]),_:1}),t(De,{modelValue:e(S),"onUpdate:modelValue":l[1]||(l[1]=T=>I(S)?S.value=T:null),grow:"",class:"disable-tab-transition",stacked:""},{default:s(()=>[(p(),$(se,null,le(F,(T,ie)=>t(Pe,{key:ie},{default:s(()=>[t(oe,{size:"40",icon:T},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),t(qe,{modelValue:e(S),"onUpdate:modelValue":l[3]||(l[3]=T=>I(S)?S.value=T:null),class:"mt-3"},{default:s(()=>[t(_e,null,{default:s(()=>[t(r,{id:e(o).id,"current-statut":e(o).statut,item:e(o),onGetItemData:l[2]||(l[2]=T=>R(e(o).id))},null,8,["id","current-statut","item"])]),_:1}),t(_e,null,{default:s(()=>[t(d,{histories:e(o).histories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"]),t(J,{color:"white",thickness:"1",opacity:"0.2",class:"my-6"}),t(Me,{headers:c,items:e(o).colis,"items-per-page":5},null,8,["items"])]),_:1},512),[[fe,!e(n)]]),e(G)?ce((p(),A(re,{key:0},{default:s(()=>[t(O,null,{default:s(()=>[t(y,{md:"6",cols:"12"},{default:s(()=>[t(P,{modelValue:e(o).ramasseur_id,"onUpdate:modelValue":l[4]||(l[4]=T=>e(o).ramasseur_id=T),placeholder:"Ramasseurs",label:"Ramasseurs",items:e(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(y,{cols:"12",md:"6"},{default:s(()=>[t(q,{modelValue:e(o).frais_ramasseur,"onUpdate:modelValue":l[5]||(l[5]=T=>e(o).frais_ramasseur=T),rules:["requiredValidator"in E?E.requiredValidator:e(te)],label:"Frais de ramassage",type:"number",placeholder:"Frais de ramassage"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(O,null,{default:s(()=>[t(y,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[t(j,{color:"secondary",onClick:l[6]||(l[6]=T=>n.value=!1)},{default:s(()=>l[16]||(l[16]=[k(" retour ")])),_:1}),t(j,{loading:e(V),onClick:z},{default:s(()=>l[17]||(l[17]=[k(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[fe,e(n)]]):N("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},_t=Ce(vt,[["__scopeId","data-v-532e0699"]]),gt={key:0},bt={id:"print-area"},yt={class:"print-content"},Vt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},wt={class:"d-flex align-center app-logo"},Et={class:"app-logo-title"},xt={class:"d-flex align-center destination"},ht={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},Ct={class:"mb-0"},St={class:"mb-0"},At={class:"mb-0"},kt={class:"mb-0"},Rt={class:"mb-0"},Tt={class:"mb-0"},It={class:"mb-0"},$t={class:"mb-0"},Nt={__name:"printRamassage",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(K,{emit:U}){const v=K,D=U;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){D("update:isPrintColis",!1)},(x,_)=>v.isPrintColis?(p(),$("div",gt,[a("div",bt,[a("div",yt,[t(ne,{class:"props.item-preview-wrapper"},{default:s(()=>[_[0]||(_[0]=a("div",null,null,-1)),a("div",Vt,[a("div",null,[a("div",wt,[t(e(ze),{nodes:e(ve).app.logo},null,8,["nodes"]),a("h6",Et,b(e(ve).app.title),1)])]),a("div",xt,b(v.item.destination),1)]),t(J,{class:"border-solid"}),t(O,{class:"print-row little-margin"},{default:s(()=>[t(y,{class:"text"},{default:s(()=>[a("div",ht,[a("div",null,[a("p",Ct," Code : "+b(v.item.code),1),a("p",St," Nom : "+b(v.item.nom_client),1),a("p",At," tel : "+b(v.item.tel_client),1)]),a("div",null,[a("p",kt,[t(He,{size:"70",value:v.item.code},null,8,["value"])])])]),a("p",Rt," Adresse : "+b(v.item.adresse),1)]),_:1})]),_:1}),t(J,{class:"border-solid"}),t(O,{class:"align-right little-margin"},{default:s(()=>[t(y,{cols:"12"},{default:s(()=>[a("p",Tt," Produits : "+b(v.item.produit),1),a("p",It," Montant : "+b(v.item.montant),1)]),_:1})]),_:1}),t(J,{class:"border-solid"}),t(O,{class:"align-right little-margin"},{default:s(()=>[t(y,{cols:"12"},{default:s(()=>[a("p",$t," essayage : "+b(v.item.essayage?"OUI":"NON")+" | ouvrir : "+b(v.item.ouvrir?"OUI":"NON")+" | echange : "+b(v.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),t(J,{class:"border-solid"}),_[1]||(_[1]=a("p",{class:"mb-0"},[a("span",null," Remarque: "),a("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):N("",!0)}},Ot=Ce(Nt,[["__scopeId","data-v-f626c156"]]),Ut={class:"d-flex flex-wrap gap-4 ma-6"},Dt={class:"d-flex gap-4 flex-wrap align-center"},Pt={key:1},gs={__name:"list",async setup(K){let U,v;const D=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Nombre de colis",key:"nombre_colis",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],x=u(),_=u(),h=u(!1),w=u(!1),o=u(),C=u(!1),R=u(),g=u(5),V=u(1),G=u(),Q=u(),z=M=>{w.value=!0,o.value=M},S=async()=>{let M="/api/ramassage/"+o.value.id;h.value=!0,X({method:"DELETE",url:M}).then(async i=>{i.status===200&&(w.value=!1,B.success(i.data),f()),h.value=!1}).catch(i=>{h.value=!1})},F=M=>{var i,Z;G.value=(i=M.sortBy[0])==null?void 0:i.key,Q.value=(Z=M.sortBy[0])==null?void 0:Z.order},{data:n,error:c,statusCode:E,isFetching:l,execute:f}=([U,v]=Ve(()=>Ke(Ge("/api/ramassage",{query:{code:x,statut:_,page:V,itemsPerPage:g,sortBy:G,orderBy:Q}}))),U=await U,v(),U),r=$e(),d=H(()=>n.value.items),P=H(()=>n.value.total),q=u(!1),W=u(0),T=u(0),ie=M=>{T.value=M.id,W.value++,q.value=!0};return(M,i)=>{const Z=ue,ke=Ee,de=Ne("IconBtn"),Re=Le,Te=he,Ie=_t;return p(),$("div",null,[t(ne,{title:"Filtres",class:"mb-6 d-print-none"},{default:s(()=>[t(re,null,{default:s(()=>[t(O,null,{default:s(()=>[t(y,{cols:"12",sm:"2"},{default:s(()=>[t(Z,{modelValue:e(_),"onUpdate:modelValue":i[0]||(i[0]=m=>I(_)?_.value=m:null),placeholder:"Statut"},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",sm:"2"},{default:s(()=>[t(Z,{modelValue:e(x),"onUpdate:modelValue":i[1]||(i[1]=m=>I(x)?x.value=m:null),placeholder:"Code"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(J),a("div",Ut,[t(Qe),a("div",Dt,[t(ke,{modelValue:e(g),"onUpdate:modelValue":i[2]||(i[2]=m=>I(g)?g.value=m:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e(Y)("create","ramassage")?(p(),A(j,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:i[3]||(i[3]=m=>e(r).push({name:"ramassage-add"}))},{default:s(()=>i[12]||(i[12]=[k(" Ajouter Ramassage ")])),_:1})):N("",!0)])]),t(J,{class:"mt-4"}),t(Be,{"items-per-page":e(g),"onUpdate:itemsPerPage":i[5]||(i[5]=m=>I(g)?g.value=m:null),page:e(V),"onUpdate:page":i[6]||(i[6]=m=>I(V)?V.value=m:null),loading:e(l),headers:D,items:e(d),"items-length":e(P),class:"text-no-wrap",locale:"fr","onUpdate:options":F},{"item.code":s(({item:m})=>[e(Y)("show","ramassage")?(p(),A(j,{key:0,variant:"text",onClick:me=>ie(m)},{default:s(()=>[k(b(m.code),1)]),_:2},1032,["onClick"])):(p(),$("span",Pt,b(m.code),1))]),"item.statut":s(({item:m})=>[t(Se,we(("statutInfos"in M?M.statutInfos:e(L))(m.statut),{density:"default",label:"",size:"small"}),null,16)]),"item.actions":s(({item:m})=>[m.statut=="EN_ATTENTE"&&e(Y)("update","ramassage")?(p(),A(de,{key:0,onClick:me=>e(r).push("/ramassage/"+m.id)},{default:s(()=>[t(oe,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):N("",!0),m.statut=="EN_ATTENTE"?(p(),A(de,{key:1},{default:s(()=>[t(oe,{icon:"tabler-dots-vertical"}),t(We,{activator:"parent"},{default:s(()=>[t(ee,null,{default:s(()=>[e(Y)("delete","ramassage")?(p(),A(Fe,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:me=>z(m)},{default:s(()=>i[13]||(i[13]=[k(" Delete ")])),_:2},1032,["onClick"])):N("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):N("",!0)]),bottom:s(()=>[t(Re,{page:e(V),"onUpdate:page":i[4]||(i[4]=m=>I(V)?V.value=m:null),"items-per-page":e(g),"total-items":e(P)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),t(Ae,{modelValue:e(w),"onUpdate:modelValue":i[9]||(i[9]=m=>I(w)?w.value=m:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[t(Te,{onClick:i[7]||(i[7]=m=>w.value=!e(w))}),t(ne,{title:"Êtes-vous sûr de vouloir supprimer le ramassage "+e(o).code+" ?"},{default:s(()=>[t(re,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[t(j,{color:"secondary",variant:"tonal",onClick:i[8]||(i[8]=m=>w.value=!1)},{default:s(()=>i[14]||(i[14]=[k(" Non ")])),_:1}),t(j,{loading:e(h),onClick:S},{default:s(()=>i[15]||(i[15]=[k(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),e(C)?(p(),A(Ot,{key:0,"is-print-ramassage":e(C),"onUpdate:isPrintRamassage":i[10]||(i[10]=m=>I(C)?C.value=m:null),item:e(R)},null,8,["is-print-ramassage","item"])):N("",!0),e(q)?(p(),A(Ie,{id:e(T),key:e(W),"is-show-item":e(q),"onUpdate:isShowItem":i[11]||(i[11]=m=>I(q)?q.value=m:null),onFetchItems:e(f)},null,8,["id","is-show-item","onFetchItems"])):N("",!0)])}}};export{gs as default};
