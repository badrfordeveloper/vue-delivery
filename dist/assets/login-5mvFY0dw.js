import{V as Y,r as B}from"./VForm-ByDnFICH.js";import{a7 as K,c as D,o as _,F as M,h as Z,b as a,e as r,$ as j,n as s,ai as S,at as J,a1 as Q,a2 as W,al as X,Y as w,au as ee,av as ae,aw as te,ax as le,ay as oe,a8 as se,az as re,a4 as ne,a6 as ie,Z as ue,a5 as de,aA as ce,ab as me,ac as fe,ad as ve,aB as pe,ae as ge,aC as ye,aD as be,aE as Ve,af as ke,ag as he,aF as _e,aG as $,s as xe,r as p,i as Ce,j as Pe,d as c,H as F,x as we,ah as Ie,f as De,m as Se,v as Le,aH as I,aI as Te}from"./index-CDDwny-K.js";import{_ as Ae}from"./AppTextField-B71EgLUu.js";import{u as R,m as Be,a as $e}from"./misc-mask-light-CGSqLbHs.js";import{V as Fe}from"./VNodeRenderer-B_RQ16A2.js";import{$ as Re}from"./api-CmUFIEMg.js";import{a as g,V as q}from"./VRow-BSePUP6J.js";import{V as qe}from"./VCard-DKep4z2G.js";import{V as E}from"./VCardText-C4f9vuwE.js";import{c as Ee}from"./VAvatar-oKMy1cq5.js";import{V as z}from"./VDivider-CkbwQFHj.js";import"./VTextField-Cq9gHUQ4.js";import"./VImg-ClcHaf1h.js";import"./forwardRefs-DWGaNmQL.js";import"./toast-Dv8jPkVd.js";/* empty css              */const ze={class:"d-flex justify-center flex-wrap gap-1"},Me={__name:"AuthProvider",setup(e){const{global:u}=K(),y=[{icon:"tabler-brand-facebook-filled",color:"#4267b2",colorInDark:"#497CE2"},{icon:"tabler-brand-twitter-filled",color:"#1da1f2",colorInDark:"#1da1f2"},{icon:"tabler-brand-github-filled",color:"#272727",colorInDark:"#fff"},{icon:"tabler-brand-google-filled",color:"#dd4b39",colorInDark:"#db4437"}];return(t,f)=>(_(),D("div",ze,[(_(),D(M,null,Z(y,n=>a(S,{key:n.icon,icon:"",variant:"text",size:"small",color:s(u).name.value==="dark"?n.colorInDark:n.color},{default:r(()=>[a(j,{size:"20",icon:n.icon},null,8,["icon"])]),_:2},1032,["color"])),64))]))}},je="/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",Ne="/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",He="/assets/auth-v2-login-illustration-dark-ClExSVqL.png",Ge="/assets/auth-v2-login-illustration-light-C4sKfRS1.png",Oe=()=>J(),Ue=Ee("v-alert-title"),Ye=["success","info","warning","error"],Ke=W({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:he,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ye.includes(e)},...ke(),...Ve(),...be(),...ye(),...ge(),...pe(),...ve(),...fe(),...me(),...ce({variant:"flat"})},"VAlert"),Ze=Q()({name:"VAlert",props:Ke(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,u){let{emit:y,slots:t}=u;const f=X(e,"modelValue"),n=w(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),d=w(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:h}=ee(e),{colorClasses:b,colorStyles:m,variantClasses:V}=ae(d),{densityClasses:x}=te(e),{dimensionStyles:C}=le(e),{elevationClasses:o}=oe(e),{locationStyles:l}=se(e),{positionClasses:v}=re(e),{roundedClasses:i}=ne(e),{textColorClasses:N,textColorStyles:H}=ie(ue(e,"borderColor")),{t:G}=de(),L=w(()=>({"aria-label":G(e.closeLabel),onClick(P){f.value=!1,y("click:close",P)}}));return()=>{const P=!!(t.prepend||n.value),O=!!(t.title||e.title),U=!!(t.close||e.closable);return f.value&&a(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,b.value,x.value,o.value,v.value,i.value,V.value,e.class],style:[m.value,C.value,l.value,e.style],role:"alert"},{default:()=>{var T,A;return[_e(!1,"v-alert"),e.border&&a("div",{key:"border",class:["v-alert__border",N.value],style:H.value},null),P&&a("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?a($,{key:"prepend-defaults",disabled:!n.value,defaults:{VIcon:{density:e.density,icon:n.value,size:e.prominent?44:28}}},t.prepend):a(j,{key:"prepend-icon",density:e.density,icon:n.value,size:e.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[O&&a(Ue,{key:"title"},{default:()=>{var k;return[((k=t.title)==null?void 0:k.call(t))??e.title]}}),((T=t.text)==null?void 0:T.call(t))??e.text,(A=t.default)==null?void 0:A.call(t)]),t.append&&a("div",{key:"append",class:"v-alert__append"},[t.append()]),U&&a("div",{key:"close",class:"v-alert__close"},[t.close?a($,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var k;return[(k=t.close)==null?void 0:k.call(t,{props:L.value})]}}):a(S,xe({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},L.value),null)])]}})}}}),Je={href:"javascript:void(0)"},Qe={class:"auth-logo d-flex align-center gap-x-3"},We={class:"auth-title"},Xe={class:"position-relative bg-background w-100 me-0"},ea=["src"],ya={__name:"login",setup(e){const u=p(!1);R(Ge,He,Ne,je,!0);const y=R($e,Be),t=Oe(),f=Ce(),n=Pe(),d=p({email:"admin@gmail.com",password:"",remember:!1}),h=p(),b=p(!1),m=p(!1),V=p(!1),x=async()=>{try{m.value=!1,V.value=!0,Re.post("/api/auth/login",{email:d.value.email,password:d.value.password}).then(async o=>{const{accessToken:l,userData:v,userAbilityRules:i}=o.data;I("userAbilityRules").value=i,t.update(i),I("userData").value=v,I("accessToken").value=l,m.value=!1,await Te(()=>{n.replace(f.query.to?String(f.query.to):"/")})}).catch(o=>{o.status===403?(b.value=o.response.data.message,m.value=!0):o.status===422&&(b.value="Email ou mot de passe est incorrect",m.value=!0),console.log("error login")}).then(()=>{V.value=!1})}catch(o){console.error(o)}},C=()=>{var o;(o=h.value)==null||o.validate().then(({valid:l})=>{l&&x()})};return(o,l)=>{const v=Ae;return _(),D(M,null,[c("a",Je,[c("div",Qe,[a(s(Fe),{nodes:s(F).app.logo},null,8,["nodes"]),c("h1",We,we(s(F).app.title),1)])]),a(q,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:r(()=>[a(g,{md:"8",class:"d-none d-md-flex"},{default:r(()=>[c("div",Xe,[c("img",{class:"auth-footer-mask flip-in-rtl",src:s(y),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ea)])]),_:1}),a(g,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:r(()=>[a(qe,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:r(()=>[a(E,null,{default:r(()=>l[3]||(l[3]=[c("h4",{class:"text-h4 mb-1"}," Login ",-1)])),_:1}),a(E,null,{default:r(()=>[a(Y,{ref_key:"refVForm",ref:h,onSubmit:Ie(C,["prevent"])},{default:r(()=>[a(q,null,{default:r(()=>[s(m)?(_(),De(Ze,{key:0,title:s(b),type:"error"},null,8,["title"])):Se("",!0),a(g,{cols:"12"},{default:r(()=>[a(v,{modelValue:s(d).email,"onUpdate:modelValue":l[0]||(l[0]=i=>s(d).email=i),rules:["requiredValidator"in o?o.requiredValidator:s(B)],autofocus:"",label:"Email",type:"email",placeholder:"test@gmail.com"},null,8,["modelValue","rules"])]),_:1}),a(g,{cols:"12"},{default:r(()=>[a(v,{modelValue:s(d).password,"onUpdate:modelValue":l[1]||(l[1]=i=>s(d).password=i),rules:["requiredValidator"in o?o.requiredValidator:s(B)],label:"Mot de passe",placeholder:"············",type:s(u)?"text":"password",autocomplete:"password","append-inner-icon":s(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[2]||(l[2]=i=>u.value=!s(u))},null,8,["modelValue","rules","type","append-inner-icon"]),l[5]||(l[5]=c("div",{class:"my-5"},null,-1)),a(S,{loading:s(V),block:"",type:"submit"},{default:r(()=>l[4]||(l[4]=[Le(" Login ")])),_:1},8,["loading"])]),_:1}),a(g,{cols:"12",class:"d-flex align-center"},{default:r(()=>[a(z),l[6]||(l[6]=c("span",{class:"mx-4"},"or",-1)),a(z)]),_:1}),a(g,{cols:"12",class:"text-center"},{default:r(()=>[a(Me)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{ya as default};
