import{r as u,P as A,V as O}from"./VForm-Cy5hsHMQ.js";import{V as y,a as f,_ as R}from"./VRadioGroup-DK4a1K_b.js";import{_ as $}from"./AppTextField-CmS8k3i0.js";import{j as k,r as v,aq as B,ar as C,w as P,o as E,c as I,d as q,v as D,b as e,e as a,m as l,ai as M,t as z,F as G}from"./index-DPEARWyz.js";import{$ as S}from"./api-DhWGbEVG.js";import{t as j}from"./toast-qMdeGvQh.js";import{V as p,a as s}from"./VRow-Dfw-41Up.js";import{V as g}from"./VCard-B2jYeW2D.js";import{V as w}from"./VCardText-f7-Kcvw5.js";import{V as h}from"./VTextField-euNnZfEI.js";const L={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},H={class:"d-flex flex-column justify-center"},J={class:"text-h4 font-weight-medium"},oe={__name:"FormRamassage",props:{method:{type:String,required:!0},item:{type:Object,required:!1},identity:{type:String,required:!1}},async setup(x){let V,U;const n=x,F=k(),_=v(),b=v([]),c=v(!1);b.value=([V,U]=B(()=>S("/api/tarifs").then(o=>o.data.items)),V=await V,U(),V);let T={nom_client:"",tel_client:"",tarif_id:"",frais_livraison:"",adresse:"",produit:"",montant:"",commentaire_vendeur:"",essayage:0,ouvrir:0,echange:0};const r=v(structuredClone(C(T)));P(()=>n.item,o=>{n.method=="PUT"&&(r.value={...o})},{immediate:!0}),P(()=>r.value.tarif_id,o=>{const t=b.value.find(i=>i.id===o);r.value.frais_livraison=t?t.tarif:""});const N=async()=>{const{valid:o}=await _.value.validate();if(o){let t="/api/colis";n.method=="PUT"&&(t="/api/colis/"+n.identity),c.value=!0,S({method:n.method,url:t,data:r.value}).then(async i=>{var m;i.status===200&&(j.success(i.data),n.method=="POST"?((m=_.value)==null||m.reset(),r.value=structuredClone(C(T))):F.push({name:"colis-list"})),c.value=!1}).catch(i=>{if(c.value=!1,i.response&&i.response.status===422){const m=i.response.data.errors;for(let d in m)j.error(`${d}: ${m[d].join(", ")}`)}})}};return(o,t)=>{const i=$,m=R;return E(),I(G,null,[q("div",L,[q("div",H,[q("h4",J,D(n.method=="POST"?"Ajouter Colis":"Modifier Colis"),1)])]),e(O,{ref_key:"refForm",ref:_,class:"mt-3"},{default:a(()=>[e(p,null,{default:a(()=>[e(s,{cols:"12",md:"6"},{default:a(()=>[e(s,{cols:"12",class:"pa-0"},{default:a(()=>[e(g,{title:"Informations du client"},{default:a(()=>[e(w,null,{default:a(()=>[e(p,null,{default:a(()=>[e(s,{md:"6",cols:"12"},{default:a(()=>[e(i,{modelValue:l(r).nom_client,"onUpdate:modelValue":t[0]||(t[0]=d=>l(r).nom_client=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],placeholder:"Nom",label:"Nom"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(i,{modelValue:l(r).tel_client,"onUpdate:modelValue":t[1]||(t[1]=d=>l(r).tel_client=d),rules:["requiredValidator"in o?o.requiredValidator:l(u),"PhoneValidator"in o?o.PhoneValidator:l(A)],label:"Telephone",size:"10",placeholder:"0655554747"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",class:"px-0"},{default:a(()=>[e(g,{title:"Informations d'adresse"},{default:a(()=>[e(w,null,{default:a(()=>[e(p,null,{default:a(()=>[e(s,{md:"6",cols:"12"},{default:a(()=>[e(m,{modelValue:l(r).tarif_id,"onUpdate:modelValue":t[2]||(t[2]=d=>l(r).tarif_id=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],label:"Destination",items:l(b),"item-title":"destination","item-value":"id",placeholder:"Select State"},null,8,["modelValue","rules","items"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(i,{modelValue:l(r).frais_livraison,"onUpdate:modelValue":t[3]||(t[3]=d=>l(r).frais_livraison=d),disabled:"",label:"Frais de livraison",placeholder:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(i,{modelValue:l(r).adresse,"onUpdate:modelValue":t[4]||(t[4]=d=>l(r).adresse=d),"prepend-inner-icon":"tabler-map-pin",rules:["requiredValidator"in o?o.requiredValidator:l(u)],label:"Adresse",placeholder:"Adresse"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(g,{title:"Informations des produits"},{default:a(()=>[e(w,null,{default:a(()=>[e(p,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(i,{modelValue:l(r).produit,"onUpdate:modelValue":t[5]||(t[5]=d=>l(r).produit=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],label:"Produits",placeholder:"Produits"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(i,{modelValue:l(r).montant,"onUpdate:modelValue":t[6]||(t[6]=d=>l(r).montant=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],type:"number",label:"Montant Total",placeholder:"Montant Total"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6",class:"app-text-field"},{default:a(()=>[e(h,{text:"Essayage",class:"mb-1 text-body-2 text-wrap"}),e(y,{modelValue:l(r).essayage,"onUpdate:modelValue":t[7]||(t[7]=d=>l(r).essayage=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],inline:""},{default:a(()=>[e(f,{label:"Non",value:0,density:"compact"}),e(f,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6",class:"app-text-field"},{default:a(()=>[e(h,{text:"Ouvrir",class:"mb-1 text-body-2 text-wrap"}),e(y,{modelValue:l(r).ouvrir,"onUpdate:modelValue":t[8]||(t[8]=d=>l(r).ouvrir=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],inline:""},{default:a(()=>[e(f,{label:"Non",value:0,density:"compact"}),e(f,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6",class:"app-text-field"},{default:a(()=>[e(h,{text:"Echange",class:"mb-1 text-body-2 text-wrap"}),e(y,{modelValue:l(r).echange,"onUpdate:modelValue":t[9]||(t[9]=d=>l(r).echange=d),rules:["requiredValidator"in o?o.requiredValidator:l(u)],inline:""},{default:a(()=>[e(f,{label:"Non",value:0,density:"compact"}),e(f,{label:"Oui",value:1,density:"compact"})]),_:1},8,["modelValue","rules"])]),_:1}),e(s,{cols:"12"},{default:a(()=>[e(i,{modelValue:l(r).commentaire_vendeur,"onUpdate:modelValue":t[10]||(t[10]=d=>l(r).commentaire_vendeur=d),label:"commentaire",placeholder:"commentaire"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(M,{loading:l(c),onClick:N},{default:a(()=>t[11]||(t[11]=[z(" Enregistrer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)],64)}}};export{oe as _};
