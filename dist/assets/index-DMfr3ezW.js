import{_ as Oe}from"./DialogCloseBtn-jFeUjWIh.js";import{V as Ge,_ as Ke,c as Qe}from"./VDataTableServer-BI-ePvWH.js";import{_ as Ne,s as Ye,a as se,b as me,e as he,c as Je}from"./constants-nDrBSXdr.js";import{_ as Ae}from"./AppTextField-CjMF6sBU.js";import{_ as $e}from"./AppSelect-Cx4sYSc0.js";import{_ as Xe}from"./AppAutocomplete-DFFAMqsh.js";import{V as Ze}from"./VNodeRenderer-BvAAXyPw.js";import{c as I,m as y,o as c,d as t,b as l,e as s,n as e,H as Ee,x as d,r as u,w as ie,A as R,Y as ce,f as C,F as Re,h as Pe,ai as D,v as T,aq as ae,ar as Ce,J as Ie,$ as re,s as oe,ak as g,K as ke,j as et,a as tt}from"./index-Cn4GOq09.js";import{Q as lt}from"./qrcode.vue.esm-Biyerob7.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Y}from"./VDivider-CSx1XzIQ.js";import{V as S,a as _}from"./VRow-_eMtTXOa.js";import{V as X}from"./VCard-C8xyqS8Y.js";import{s as h}from"./statutInfos-Dl5tZIw7.js";import{r as ne,V as st,$ as G}from"./VForm-B-RrgLOX.js";import{_ as at,V as ot,a as nt,b as it,c as Te,d as rt,s as ut}from"./VTabs-BXNaAe7P.js";import{_ as dt}from"./AppTextarea-CUdfnPlM.js";import{t as M}from"./toast-Cs2lwIGd.js";import{V as mt}from"./VFileInput-Dz4YXIpc.js";import{V as J}from"./VCardText-oDAfMypB.js";import{V as Se}from"./VDataTable-BcoK-fRS.js";import{V as fe}from"./VChip-DvpeVEqC.js";import{V as De}from"./VDialog-C1fNNfVN.js";import{u as pt}from"./index-DbX47XIY.js";import{a as pe,V as ct}from"./VList-COcPg8cx.js";import{V as ft}from"./VSpacer-BVxtiIgt.js";import{V as vt}from"./VMenu-ClR026Z9.js";import"./VInput-DnGVuAhw.js";import"./VImg-BcxKOzCh.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-Cf1CINQn.js";import"./VSelect-DOHcxXJU.js";import"./VOverlay-BZZDccpP.js";import"./VSelectionControl-CxcP7L5m.js";import"./VAvatar-CUGtIZAw.js";import"./filter-FvdvvAwW.js";/* empty css              */const _t={key:0},bt={id:"print-area"},gt={class:"print-content"},yt={class:"props.item-header-preview d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row bg-var-theme-background gap-6 rounded"},Vt={class:"d-flex align-center app-logo"},xt={class:"app-logo-title"},wt={class:"d-flex align-center destination"},ht={class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-6"},Et={class:"mb-0"},Ct={class:"mb-0"},It={class:"mb-0"},kt={class:"mb-0"},Tt={class:"mb-0"},St={class:"mb-0"},Ot={class:"mb-0"},Nt={class:"mb-0"},At={__name:"printColis",props:{item:{type:Object,required:!0},isPrintColis:{type:Boolean,required:!0}},emits:["update:isPrintColis"],setup(W,{emit:b}){const p=W,j=b;return setTimeout(()=>{window.print()},500),window.onafterprint=function(){j("update:isPrintColis",!1)},(L,E)=>p.isPrintColis?(c(),I("div",_t,[t("div",bt,[t("div",gt,[l(X,{class:"props.item-preview-wrapper"},{default:s(()=>[E[0]||(E[0]=t("div",null,null,-1)),t("div",yt,[t("div",null,[t("div",Vt,[l(e(Ze),{nodes:e(Ee).app.logo},null,8,["nodes"]),t("h6",xt,d(e(Ee).app.title),1)])]),t("div",wt,d(p.item.destination),1)]),l(Y,{class:"border-solid"}),l(S,{class:"print-row little-margin"},{default:s(()=>[l(_,{class:"text"},{default:s(()=>[t("div",ht,[t("div",null,[t("p",Et," Code : "+d(p.item.code),1),t("p",Ct," Nom : "+d(p.item.nom_client),1),t("p",It," tel : "+d(p.item.tel_client),1)]),t("div",null,[t("p",kt,[l(lt,{size:"70",value:p.item.code},null,8,["value"])])])]),t("p",Tt," Adresse : "+d(p.item.adresse),1)]),_:1})]),_:1}),l(Y,{class:"border-solid"}),l(S,{class:"align-right little-margin"},{default:s(()=>[l(_,{cols:"12"},{default:s(()=>[t("p",St," Produits : "+d(p.item.produit),1),t("p",Ot," Montant : "+d(p.item.montant),1)]),_:1})]),_:1}),l(Y,{class:"border-solid"}),l(S,{class:"align-right little-margin"},{default:s(()=>[l(_,{cols:"12"},{default:s(()=>[t("p",Nt," Essayage : "+d(p.item.essayage?"OUI":"NON")+" | Ouvrir : "+d(p.item.ouvrir?"OUI":"NON")+" | Echange : "+d(p.item.echange?"OUI":"NON"),1)]),_:1})]),_:1}),l(Y,{class:"border-solid"}),E[1]||(E[1]=t("p",{class:"mb-0"},[t("span",null," Remarque: "),t("span",null,"Entrepirse de livraison n'est pas responsable sur vos achat")],-1))]),_:1})])])])):y("",!0)}},$t=Ue(At,[["__scopeId","data-v-ad22cfed"]]),Rt={key:0},Pt={key:1},Ut={class:"text-center"},Dt={key:0},Lt={key:1},Ft={__name:"actionsColis",props:{currentStatut:{type:String,required:!0},item:{type:Object,required:!0},id:{type:Number,required:!0}},emits:["getItemData"],setup(W,{emit:b}){const p=W,j=b,L=u({}),E=u(""),A=u(!1),x=u(),o=u({id:null,statut:"",commentaire:"",date:"",file:""});ie(()=>p.currentStatut,r=>{E.value=r},{immediate:!0}),ie(()=>p.item,r=>{L.value=r},{immediate:!0});const V=u(""),B=r=>{A.value=!0,o.value.statut=r},K=async()=>{const{valid:r}=await x.value.validate();r&&await $(o.value.statut)},$=async r=>{o.value.statut=r,o.value.id=p.id,V.value=r;const m=new FormData;m.append("file",o.value.file),m.append("id",o.value.id),m.append("statut",o.value.statut),m.append("commentaire",o.value.commentaire),m.append("date",o.value.date),G({method:"POST",url:"/api/updateStatutColis",data:m,headers:{"Content-Type":"multipart/form-data"}}).then(async O=>{O.status===200&&(M.success(O.data),r!="COMMENTAIRE"&&(E.value=r),A.value=!1,j("getItemData")),V.value=""}).catch(O=>{V.value="",O.response&&O.response.status===422?M.error(O.response.data.message):M.error("something wrong")})},P=R("livreur","action"),k=R("admin","action");R("gestionnaire","action");const F=ce(()=>{let r=[];return k&&(r.push({...h("EN_ATTENTE"),statut:"EN_ATTENTE"}),r.push({...h("ENTREPOT"),statut:"ENTREPOT"})),r.push({text:"Commentaire",color:"secondary",statut:"COMMENTAIRE"}),["ENTREPOT","REPORTE","PAS_REPONSE"].includes(E.value)&&P&&r.push({...h("EN_COURS_LIVRAISON"),statut:"EN_COURS_LIVRAISON"}),["EN_COURS_LIVRAISON"].includes(E.value)&&P&&(r.push({...h("LIVRE"),statut:"LIVRE"}),r.push({...h("LIVRE_PARTIELLEMENT"),statut:"LIVRE_PARTIELLEMENT"}),r.push({...h("PAS_REPONSE"),statut:"PAS_REPONSE"}),r.push({...h("REPORTE"),statut:"REPORTE"}),r.push({...h("ANNULE"),statut:"ANNULE"}),r.push({...h("REFUSE"),statut:"REFUSE"})),r});return(r,m)=>{const O=Ne,v=dt;return e(A)?(c(),I("div",Pt,[l(st,{ref_key:"refForm",ref:x,class:"mt-3"},{default:s(()=>[t("p",Ut," Statut à envoyer : "+d(("statutInfos"in r?r.statutInfos:e(h))(e(o).statut).text),1),["LIVRE_PARTIELLEMENT","PAS_REPONSE","REPORTE","REFUSE","ANNULE"].includes(e(o).statut)?(c(),I("div",Dt,[l(S,{class:"d-flex align-center justify-center"},{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(mt,{modelValue:e(o).file,"onUpdate:modelValue":m[0]||(m[0]=a=>e(o).file=a),rules:["requiredValidator"in r?r.requiredValidator:e(ne)],accept:"image/*",label:"File input"},null,8,["modelValue","rules"])]),_:1})]),_:1})])):y("",!0),e(o).statut=="REPORTE"?(c(),I("div",Lt,[l(S,{class:"d-flex align-center justify-center"},{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(O,{modelValue:e(o).date,"onUpdate:modelValue":m[1]||(m[1]=a=>e(o).date=a),rules:["requiredValidator"in r?r.requiredValidator:e(ne)],label:"Date & TIme",placeholder:"Select date and time",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue","rules"])]),_:1})]),_:1})])):y("",!0),t("div",null,[l(S,{class:"d-flex align-center justify-center"},{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(v,{modelValue:e(o).commentaire,"onUpdate:modelValue":m[2]||(m[2]=a=>e(o).commentaire=a),rows:"2","row-height":"20",label:"Commentaire",rules:["COMMENTAIRE"].includes(e(o).statut)?["requiredValidator"in r?r.requiredValidator:e(ne)]:[],placeholder:"Commentaire"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),l(S,null,{default:s(()=>[l(_,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[l(D,{color:"secondary",onClick:m[3]||(m[3]=a=>A.value=!1)},{default:s(()=>m[4]||(m[4]=[T(" retour ")])),_:1}),l(D,{loading:e(V)==e(o).statut,onClick:K},{default:s(()=>m[5]||(m[5]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):(c(),C(S,{key:0,class:"text-center v-row m-0"},{default:s(()=>[(c(!0),I(Re,null,Pe(e(F),(a,N)=>(c(),C(_,{key:N,cols:"6"},{default:s(()=>[l(D,{color:a.color,loading:e(V)==a.statut,style:{width:"inherit"},onClick:Q=>B(a.statut)},{default:s(()=>[T(d(a.text),1)]),_:2},1032,["color","loading","onClick"])]),_:2},1024))),128)),e(F).length==0?(c(),I("div",Rt," Aucune action requise ")):y("",!0)]),_:1}))}}},qt={key:0,class:"text-end position-absolute right-0 parms-btn"},Mt={class:"text-body-1 mb-2"},jt={key:0,class:"text-body-1 mb-2"},Bt={key:1,class:"text-body-1 mb-2"},zt={key:0},Wt={class:"text-body-1 mb-2"},Ht={class:"text-body-1 mb-2"},Gt={class:"text-body-1 mb-2"},Kt={class:"text-body-1 mb-2"},Qt={class:"text-body-1 mb-2"},Yt={class:"text-body-1 mb-2"},Jt={class:"text-body-1 mb-2"},Xt={class:"text-body-1 mb-2"},Zt={class:"text-body-1 mb-2"},el={class:"text-body-1 mb-2"},tl={class:"text-body-1 mb-2"},ll={class:"text-body-1 mb-2"},sl={class:"text-body-1 mb-2"},al={__name:"showColis",props:{id:{type:Object,required:!1},isShowItem:{type:Boolean,required:!0}},emits:["update:isShowItem","fetchItems"],async setup(W,{emit:b}){let p,j;const L=W,E=b;let A={id:"",nom_vendeur:"",tel_vendeur:"",tarif_id:"",commentaire_vendeur:"",code_ramassage:"",frais_livreur:"",adresse:"",livreur:"",livreur_id:"",tel_livreur:"",statut:"",vendeur:"",colisHistories:[]};const x=([p,j]=ae(()=>G("/api/ramasseurs").then(v=>v.data)),p=await p,j(),p),o=u(structuredClone(Ce(A))),V=u(!1),B=async v=>{V.value=!0,await G("/api/colis/"+v).then(async a=>{a.status===200&&(o.value=a.data),V.value=!1}).catch(a=>{V.value=!1,a.response&&a.response.status===422?M.error(a.response.data.message):M.error("something wrong")})};ie(()=>L.id,v=>{B(v)},{immediate:!0});const K=()=>{E("update:isShowItem",!1),E("fetchItems"),o.value=structuredClone(Ce(A))},$=R("gestionnaire","action");R("livreur","action");const P=R("vendeur","action"),k=u("Actions"),F=["tabler-adjustments-share","tabler-logs"],r=u(!1),m=u(!1),O=async()=>{m.value=!0,await G({method:"POST",url:"/api/parametrerColis",data:{id:o.value.id,livreur_id:o.value.livreur_id,frais_livreur:o.value.frais_livreur}}).then(async v=>{v.status===200&&(M.success(v.data),B(o.value.id)),m.value=!1}).catch(v=>{m.value=!1,v.response&&v.response.status===422?M.error(v.response.data.message):M.error("something wrong")})};return(v,a)=>{const N=Oe,Q=Ft,H=rt,te=$e,U=Ae,q=at;return c(),C(De,{width:v.$vuetify.display.smAndDown?"auto":900,"model-value":L.isShowItem,"onUpdate:modelValue":K},{default:s(()=>[l(N,{onClick:K}),l(q,{title:"Details Colis",style:{overflow:"scroll","max-height":"90vh"},loading:e(V),"no-actions":""},{default:s(()=>[l(X,null,{default:s(()=>[Ie(l(J,null,{default:s(()=>[e($)?(c(),I("div",qt,[l(D,{icon:"",class:"rounded-0",onClick:a[0]||(a[0]=w=>r.value=!0)},{default:s(()=>[l(re,{size:"22",icon:"tabler-settings"})]),_:1})])):y("",!0),l(S,null,{default:s(()=>[l(_,{cols:"12",lg:"6"},{default:s(()=>[l(X,{title:"Informations colis"},{default:s(()=>[l(J,null,{default:s(()=>[l(Se,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[7]||(a[7]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Code : ")],-1)),t("td",null,[t("p",Mt,d(e(o).code),1)])]),t("tr",null,[a[8]||(a[8]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Livreur : ")],-1)),t("td",null,[e(P)&&!e($)?(c(),I("p",jt," Livreur Drop ")):(c(),I("p",Bt,d(e(o).livreur),1))])]),e($)?(c(),I("tr",zt,[a[9]||(a[9]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel Livreur : ")],-1)),t("td",null,[t("p",Wt,d(e(o).tel_livreur),1)])])):y("",!0),t("tr",null,[a[10]||(a[10]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ramassage : ")],-1)),t("td",null,[t("p",Ht,d(e(o).code_ramassage),1)])]),t("tr",null,[a[11]||(a[11]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Statut: ")],-1)),t("td",null,[t("p",Gt,[l(fe,oe(("statutInfos"in v?v.statutInfos:e(h))(e(o).statut),{density:"default",label:"",size:"small"}),null,16)])])]),t("tr",null,[a[12]||(a[12]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Prix : ")],-1)),t("td",null,[t("p",Kt,d(e(o).montant),1)])]),t("tr",null,[a[13]||(a[13]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Produit : ")],-1)),t("td",null,[t("p",Qt,d(e(o).produit),1)])]),t("tr",null,[a[14]||(a[14]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Essayage : ")],-1)),t("td",null,[t("p",Yt,d(e(o).essayage?"OUI":"NON"),1)])]),t("tr",null,[a[15]||(a[15]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Ouvrir : ")],-1)),t("td",null,[t("p",Jt,d(e(o).ouvrir?"OUI":"NON"),1)])]),t("tr",null,[a[16]||(a[16]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Echange : ")],-1)),t("td",null,[t("p",Xt,d(e(o).echange?"OUI":"NON"),1)])]),t("tr",null,[a[17]||(a[17]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Commentaire : ")],-1)),t("td",null,[t("p",Zt,d(e(o).commentaire_vendeur),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"6"},{default:s(()=>[l(X,{title:"Informations client"},{default:s(()=>[l(J,null,{default:s(()=>[l(Se,{class:"billing-address-table"},{default:s(()=>[t("tr",null,[a[18]||(a[18]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Nom de client : ")],-1)),t("td",null,[t("p",el,d(e(o).nom_client),1)])]),t("tr",null,[a[19]||(a[19]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Tel de client : ")],-1)),t("td",null,[t("p",tl,d(e(o).tel_client),1)])]),t("tr",null,[a[20]||(a[20]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Distination : ")],-1)),t("td",null,[t("p",ll,d(e(o).destination),1)])]),t("tr",null,[a[21]||(a[21]=t("td",null,[t("h6",{class:"text-h6 text-no-wrap mb-2"}," Adresse : ")],-1)),t("td",null,[t("p",sl,d(e(o).adresse),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ot,{modelValue:e(k),"onUpdate:modelValue":a[1]||(a[1]=w=>g(k)?k.value=w:null),grow:"",class:"disable-tab-transition",stacked:""},{default:s(()=>[(c(),I(Re,null,Pe(F,(w,le)=>l(nt,{key:le},{default:s(()=>[l(re,{size:"40",icon:w},null,8,["icon"])]),_:2},1024)),64))]),_:1},8,["modelValue"]),l(it,{modelValue:e(k),"onUpdate:modelValue":a[3]||(a[3]=w=>g(k)?k.value=w:null),class:"mt-3"},{default:s(()=>[l(Te,null,{default:s(()=>[l(Q,{id:e(o).id,"current-statut":e(o).statut,onGetItemData:a[2]||(a[2]=w=>B(e(o).id))},null,8,["id","current-statut"])]),_:1}),l(Te,null,{default:s(()=>[l(H,{histories:e(o).colisHistories},null,8,["histories"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[ke,!e(r)]]),e($)?Ie((c(),C(J,{key:0},{default:s(()=>[l(S,null,{default:s(()=>[l(_,{md:"6",cols:"12"},{default:s(()=>[l(te,{modelValue:e(o).livreur_id,"onUpdate:modelValue":a[4]||(a[4]=w=>e(o).livreur_id=w),placeholder:"Livreurs",label:"Livreurs",items:e(x),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),l(_,{cols:"12",md:"6"},{default:s(()=>[l(U,{modelValue:e(o).frais_livreur,"onUpdate:modelValue":a[5]||(a[5]=w=>e(o).frais_livreur=w),rules:["requiredValidator"in v?v.requiredValidator:e(ne)],label:"Frais de livreur",type:"number",placeholder:"Frais de livreur"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(S,null,{default:s(()=>[l(_,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:s(()=>[l(D,{color:"secondary",onClick:a[6]||(a[6]=w=>r.value=!1)},{default:s(()=>a[22]||(a[22]=[T(" retour ")])),_:1}),l(D,{loading:e(m),onClick:O},{default:s(()=>a[23]||(a[23]=[T(" Envoyer ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)),[[ke,e(r)]]):y("",!0)]),_:1})]),_:1},8,["loading"])]),_:1},8,["width","model-value"])}}},ol=Ue(al,[["__scopeId","data-v-beb5ad0d"]]),nl={class:"d-flex flex-wrap gap-4 ma-6"},il={class:"d-flex gap-4 flex-wrap align-center"},rl={key:1},ul={key:0},Ql={__name:"index",props:{statut:{type:String,required:!0}},async setup(W){let b,p;const j=W,L=u(!1),E=u([{title:"Aujourd'hui",value:"today"},{title:"Hier",value:"yesterday"},{title:"La semaine dernière",value:"lastWeek"},{title:"Ce mois",value:"thisMonth"},{title:"Le mois précédent",value:"lastMonth"},{title:"Personnalisé",value:"custom"}]),A=R("gestionnaire","action"),x=u(),o=u(),V=u("today"),B=()=>{const f=new Date;switch(L.value=V.value==="custom",V.value){case"today":x.value=f.toISOString().split("T")[0],o.value=f.toISOString().split("T")[0];break;case"yesterday":const n=se(f,-1);x.value=n.toISOString().split("T")[0],o.value=n.toISOString().split("T")[0];break;case"lastWeek":x.value=ut(se(f,-7)).toISOString().split("T")[0],o.value=Je(se(f,-7)).toISOString().split("T")[0];break;case"thisMonth":x.value=me(f).toISOString().split("T")[0],o.value=he(f).toISOString().split("T")[0];break;case"lastMonth":const z=se(me(f),-1);x.value=me(z).toISOString().split("T")[0],o.value=he(z).toISOString().split("T")[0];break}};B();const K=[{title:"code",key:"code",sortable:!1},{title:"Statut",key:"statut",sortable:!1},{title:"destination",key:"destination",sortable:!1},{title:"Montant",key:"montant",sortable:!1},{title:"Nom du client",key:"nom_client",sortable:!1},{title:"Tel du client",key:"tel_client",sortable:!1},{title:"Vendeur",key:"vendeur",sortable:!1},{title:"actions",key:"actions",sortable:!1}],$=u(),P=u(),k=u(),F=u(),r=u(),m=u(),O=([b,p]=ae(()=>G("/api/ramasseurs").then(f=>f.data)),b=await b,p(),b),v=([b,p]=ae(()=>G("/api/vendeurs").then(f=>f.data)),b=await b,p(),b),a=u(!1),N=u(!1),Q=u(),H=u(!1),te=u(),U=u(5),q=u(1),w=u(),le=u();ie(()=>j.statut,f=>{P.value=f},{immediate:!0});const Le=f=>{var n,z;w.value=(n=f.sortBy[0])==null?void 0:n.key,le.value=(z=f.sortBy[0])==null?void 0:z.order},Fe=f=>{H.value=!0,te.value=f},qe=f=>{N.value=!0,Q.value=f},Me=async()=>{let f="/api/colis/"+Q.value.id;a.value=!0,G({method:"DELETE",url:f}).then(async n=>{n.status===200&&(N.value=!1,M.success(n.data),_e()),a.value=!1}).catch(n=>{a.value=!1})},{data:ve,error:dl,statusCode:ml,isFetching:je,execute:_e}=([b,p]=ae(()=>pt(Qe("/api/colis",{query:{livreur_id:r,vendeur_id:m,begin_date:x,end_date:o,code:$,statut:P,nom_client:k,tel_client:F,page:q,itemsPerPage:U,sortBy:w,orderBy:le}}))),b=await b,p(),b),be=et(),Be=ce(()=>ve.value.items),ge=ce(()=>ve.value.total),Z=u(!1),ye=u(0),Ve=u(0),ze=f=>{Ve.value=f.id,ye.value++,Z.value=!0};return(f,n)=>{const z=Xe,ue=$e,de=Ae,xe=Ne,we=tt("IconBtn"),We=Ke,He=Oe;return c(),I("div",null,[l(X,{title:"Filtres",class:"mb-6 d-print-none"},{default:s(()=>[l(J,null,{default:s(()=>[l(S,null,{default:s(()=>[e(A)?(c(),C(_,{key:0,cols:"12",sm:"3"},{default:s(()=>[l(z,{modelValue:e(m),"onUpdate:modelValue":n[0]||(n[0]=i=>g(m)?m.value=i:null),placeholder:"Vendeurs",items:e(v),clearable:"","clear-icon":"tabler-x",autocomplete:"no-autocompeletse"},null,8,["modelValue","items"])]),_:1})):y("",!0),e(A)?(c(),C(_,{key:1,cols:"12",sm:"3"},{default:s(()=>[l(z,{modelValue:e(r),"onUpdate:modelValue":n[1]||(n[1]=i=>g(r)?r.value=i:null),placeholder:"Livreurs",items:e(O),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):y("",!0),l(_,{cols:"12",sm:"3"},{default:s(()=>[l(ue,{modelValue:e(P),"onUpdate:modelValue":n[2]||(n[2]=i=>g(P)?P.value=i:null),placeholder:"Statut",items:e(Ye),clearable:"","clear-icon":"tabler-x"},{item:s(({item:i,props:ee})=>[l(pe,oe(ee,{title:e(h)(i.value).text}),null,16,["title"])]),selection:s(({item:i})=>[T(d(e(h)(i.value).text),1)]),_:1},8,["modelValue","items"])]),_:1}),l(_,{cols:"12",sm:"2"},{default:s(()=>[l(de,{modelValue:e($),"onUpdate:modelValue":n[3]||(n[3]=i=>g($)?$.value=i:null),placeholder:"Code"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",sm:"2"},{default:s(()=>[l(de,{modelValue:e(k),"onUpdate:modelValue":n[4]||(n[4]=i=>g(k)?k.value=i:null),placeholder:"Nom du client"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",sm:"2"},{default:s(()=>[l(de,{modelValue:e(F),"onUpdate:modelValue":n[5]||(n[5]=i=>g(F)?F.value=i:null),placeholder:"Telephone du client"},null,8,["modelValue"])]),_:1})]),_:1}),l(S,null,{default:s(()=>[l(_,{cols:"12",sm:"3"},{default:s(()=>[l(ue,{modelValue:e(V),"onUpdate:modelValue":[n[6]||(n[6]=i=>g(V)?V.value=i:null),B],placeholder:"Plage de dates",items:e(E),label:e(x)+" - "+e(o)},null,8,["modelValue","items","label"])]),_:1}),e(L)?(c(),C(_,{key:0,cols:"12",sm:"3"},{default:s(()=>[l(xe,{modelValue:e(x),"onUpdate:modelValue":n[7]||(n[7]=i=>g(x)?x.value=i:null),label:"Début",placeholder:"date"},null,8,["modelValue"])]),_:1})):y("",!0),e(L)?(c(),C(_,{key:1,cols:"12",sm:"3"},{default:s(()=>[l(xe,{modelValue:e(o),"onUpdate:modelValue":n[8]||(n[8]=i=>g(o)?o.value=i:null),label:"Fin",placeholder:"date"},null,8,["modelValue"])]),_:1})):y("",!0)]),_:1})]),_:1}),l(Y),t("div",nl,[l(ft),t("div",il,[l(ue,{modelValue:e(U),"onUpdate:modelValue":n[9]||(n[9]=i=>g(U)?U.value=i:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e(R)("create","colis")?(c(),C(D,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:n[10]||(n[10]=i=>e(be).push({name:"colis-add"}))},{default:s(()=>n[19]||(n[19]=[T(" Ajouter Colis ")])),_:1})):y("",!0)])]),l(Y,{class:"mt-4"}),l(Ge,{"items-per-page":e(U),"onUpdate:itemsPerPage":n[12]||(n[12]=i=>g(U)?U.value=i:null),page:e(q),"onUpdate:page":n[13]||(n[13]=i=>g(q)?q.value=i:null),loading:e(je),headers:K,items:e(Be),"items-length":e(ge),class:"text-no-wrap",locale:"fr","onUpdate:options":Le},{"item.code":s(({item:i})=>[e(R)("show","colis")?(c(),C(D,{key:0,variant:"text",onClick:ee=>ze(i)},{default:s(()=>[T(d(i.code),1)]),_:2},1032,["onClick"])):(c(),I("span",rl,d(i.code),1))]),"item.statut":s(({item:i})=>[l(fe,oe(e(h)(i.statut),{density:"default",label:"",size:"small"}),null,16),i.statut_retour?(c(),I("span",ul,[n[20]||(n[20]=T(" - ")),l(fe,oe(e(h)(i.statut_retour),{density:"default",label:"",size:"small"}),null,16)])):y("",!0)]),"item.actions":s(({item:i})=>[t("div",null,[e(R)("update","colis")&&(i.statut=="EN_ATTENTE"||i.statut=="EN_COURS_LIVRAISON"&&e(A))?(c(),C(we,{key:0,onClick:ee=>e(be).push("/colis/"+i.id)},{default:s(()=>[l(re,{icon:"tabler-edit"})]),_:2},1032,["onClick"])):y("",!0),l(we,null,{default:s(()=>[l(re,{icon:"tabler-dots-vertical"}),l(vt,{activator:"parent"},{default:s(()=>[l(ct,null,{default:s(()=>[l(pe,{value:"print","prepend-icon":"tabler-text-scan-2",onClick:ee=>Fe(i)},{default:s(()=>n[21]||(n[21]=[T(" Print ")])),_:2},1032,["onClick"]),e(R)("delete","colis")&&i.statut=="EN_ATTENTE"?(c(),C(pe,{key:0,value:"delete","prepend-icon":"tabler-trash",onClick:ee=>qe(i)},{default:s(()=>n[22]||(n[22]=[T(" Delete ")])),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:s(()=>[l(We,{page:e(q),"onUpdate:page":n[11]||(n[11]=i=>g(q)?q.value=i:null),"items-per-page":e(U),"total-items":e(ge)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","loading","items","items-length"]),l(De,{modelValue:e(N),"onUpdate:modelValue":n[16]||(n[16]=i=>g(N)?N.value=i:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[l(He,{onClick:n[14]||(n[14]=i=>N.value=!e(N))}),l(X,{title:"Êtes-vous sûr de vouloir supprimer le colis "+e(Q).code+" ?"},{default:s(()=>[l(J,{class:"d-flex justify-end gap-3 flex-wrap"},{default:s(()=>[l(D,{color:"secondary",variant:"tonal",onClick:n[15]||(n[15]=i=>N.value=!1)},{default:s(()=>n[23]||(n[23]=[T(" Non ")])),_:1}),l(D,{loading:e(a),onClick:Me},{default:s(()=>n[24]||(n[24]=[T(" Oui ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),e(H)?(c(),C($t,{key:0,"is-print-colis":e(H),"onUpdate:isPrintColis":n[17]||(n[17]=i=>g(H)?H.value=i:null),item:e(te)},null,8,["is-print-colis","item"])):y("",!0),e(Z)?(c(),C(ol,{id:e(Ve),key:e(ye),"is-show-item":e(Z),"onUpdate:isShowItem":n[18]||(n[18]=i=>g(Z)?Z.value=i:null),onFetchItems:e(_e)},null,8,["id","is-show-item","onFetchItems"])):y("",!0)])}}};export{Ql as default};
